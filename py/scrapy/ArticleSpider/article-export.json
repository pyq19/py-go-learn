[
{"front_image_url": ["http://wx1.sinaimg.cn/large/63918611gy1fdnc0d4hz3j20qy0b4dky.jpg"], "fav_nums": 1, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"><p><script src=\"http://www.imooc.com/open/courselistrandjs\"></script><span style=\"display:block;margin-bottom:10px;\"></span></p>\n</div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/zumagia\">Ree Ray</a> 翻译，<a href=\"http://www.jobbole.com/members/hanxiaomax\">艾凌风</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"http://www.folklore.org/StoryView.py?project=Macintosh&amp;story=A_Rich_Neighbor_Named_Xerox.txt\">Andy Hertzfeld</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p><img class=\" wp-image-62047 aligncenter\" src=\"http://wx4.sinaimg.cn/mw690/63918611gy1fdnc01cmv7j20sb0rdwkr.jpg\" alt=\"xerox-star\" width=\"503\" height=\"486\"></p>\n<p style=\"text-align: center;\"><strong>施乐（Xerox）的 Star 电脑影响深远</strong></p>\n<p>当史蒂夫·乔布斯（Steve Jobs）找微软作为 Macintosh（麦金塔电脑）的首个第三方应用软件开发者时，他就思考过他们可能会把苹果的创意复制到基于 PC 机的用户界面上。作为早期能为 Macintosh 开发的条件，斯蒂夫要微软保证至少在 Macintosh 首发（first shipment）的一年内，不能发行任何鼠标应用软件。</p>\n<p>微软的主系统程序员 Neil Konzen 被分配到了 Mac 项目，这个年轻有为的 Apple II（苹果第二代电脑）黑客成长于西雅图的郊区。当他还是个高中生的时候，就已经开始为微软工作了，并且他独立地为成功的 Z80扩展卡（可以使 Apple II 运行 CP/M 系统的软件）编写了系统软件。</p>\n<p>因为 Neil 对苹果（Apple）的喜爱，微软顺理成章地把他分配到这个既新奇又高度机密的 Macintosh 计划。尽管 Macintosh OS（麦金塔电脑操作系统）迅速迭代，他依然尽职地集成微软基于字节码（byte-code）的解释环境（interpreted environment）（实际上复制自施乐注重内存效率甚于执行速度的系统，这恰好适合 Mac 有限的内存）。因此 Neil 跃居为微软在 Mac 系统技术细节方面的专家。</p>\n<p>到 1983 年中期，微软已经能很好地向我们展示他们正在进行的电子制表软件（spreadsheet）与商务图形软件的原型：Multiplan 和 Chart（他们也在研究文字处理机，但却避而不谈，因为这会与 MacWrite 造成竞争）。我每周会花上一些时间和 Neil 通电话。他有时会要我给出实现部分的特性或者抱怨已经实现的方法。但大多数时候我会回答他关于正在复杂迭代的 API 的提问。</p>\n<p>我渐渐开始发现 Neil 会问一些他不需要清楚的实现细节。尤其是他对于每个区域的所代表和实现的功能都充满好奇，还常常对此详述他的认识，希望得到我的证实。</p>\n<p>撇开求知欲不谈，除非你想实现自己的版本，否则没有理由关心系统的内部构件。我告诉史蒂夫我怀疑微软企图克隆 Mac，但他并不担心，因为他不认为他们有能力完整地（decent）实现，即使有 Mac 作为借鉴。</p>\n<p>1983 年 11 月的时候，我们听到微软在 Comdex（业内首屈一指的交易展，一年在拉斯维加斯举办两次） 宣布了惊人的消息：他们介绍了一款全新的、使用鼠标的图形用户界面——Windows，这直接和 Personal Software 早期推出的 Vision 竞争。此外，他们还推出了额外的鼠标应用软件——Microsoft Word。当史蒂夫之知道 Windows 后，暴跳如雷。</p>\n<p><img id=\"pic\" class=\"aligncenter\" src=\"http://wx1.sinaimg.cn/large/63918611gy1fdnc0d4hz3j20qy0b4dky.jpg\"></p>\n<p style=\"text-align: center;\">（比尔盖茨和乔布斯，额外配图）</p>\n<p>“立刻让盖茨到这里来！”他怒气冲天地对 Mac 初期的布道师（original evangelist），也是处理我们和第三方开发者关系的 Mike Boich 说，“他必须给我解释，最好能让我满意。叫他明天下午来这里，不然的话！”</p>\n<p>出乎意料的是，第二天下午我也被邀请到会议室参加会议。在那里，比尔·盖茨（Bill Gates）必须独自当着 10 个苹果员工的面解释。我想史蒂夫是想让我证明 Neil 询问过内部构件的事，但他并没有这样做，所以当史蒂夫开始对比尔大吼，质问他为什么要破坏协议的时候，我变成了一个奇特的（fascinated）观察者。</p>\n<p>“你剽窃了我们！”史蒂夫咆哮道，并提高了声调。“我信任你，但你却正在抄袭我们！”</p>\n<p>比尔·盖茨开口之前，只是很平静地站在那，直视着史蒂夫。</p>\n<p>“史蒂夫，我觉得应该用另一种方式看待这个问题。这就像我们有个叫施乐的有钱邻居，当我闯进去想偷走电视时，却发现你已经这么干了。”</p>\n<p>不幸的是，事实证明微软在 1981 年签署的协议中约定，他们不能在 Mac 开售一年内发布鼠标应用软件，所以到 1983 年 9 月的时候已经到期了。因为 1981 年后期时我们认为 Mac 应该会在 1982 年秋发行，所以我们傻到没有顺延（float）协议中的发行日期。因此微软完全有权推出 Windows。由于苹果依然需要微软为 Macintosh 提供应用，所以史蒂夫无法从中把它们砍掉。</p>\n<p>微软一直没能发布 Windows。直到两年后，也就是 1985 年秋天，Windows 1.0 才发布。但它实在很粗糙，如史蒂夫所料，只有 Mac 的皮毛。它甚至连窗口重叠的功能都没有，取代的是所谓“并列式窗口（tiling）”的技术。几个月后，颓势已经很明显了，比尔·盖茨解雇了实施团队并从头开始制作新的版本，正是由 Neil Konzen 所带领。</p>\n<p><img id=\"pic\" class=\"\" src=\"http://wx1.sinaimg.cn/large/63918611gy1fdnbexx83ej20wi0hrdk9.jpg\"></p>\n<p>Neil 负责的 Windows 版本在几年后发布，优秀到让苹果在 1988 年申请了永久版权诉讼来抗衡微软，但他们最终还是失去了独特性（technicality）（这个官司认定苹果在 1985 年 11 月无意中给与了微软 Mac 用户界面的永久许可证）。</p>\n\r\n        \r\n            <blockquote class=\"rewards\">\n        <p><strong>打赏支持我翻译更多好文章，谢谢！</strong></p>\n        <a href=\"#rewardbox\" id=\"rewards-button\" class=\"fancybox\"><span class=\"btn-bluet-blue href-style\"><i class=\"fa fa-jpy\"></i> 打赏译者</span></a>\n    </blockquote>\n\n    <div id=\"rewardbox\">\n        <h4>打赏支持我翻译更多好文章，谢谢！</h4>\n                <p>任选一种支付方式</p>\n                <p>\n                        <img src=\"http://www.jobbole.com/wp-content/uploads/2016/04/a506abb819712f3ff382705191f99fd3.png\">\n            \n                            <img src=\"http://www.jobbole.com/wp-content/uploads/2016/04/1b97911a419986c1b5901239023b587e.jpg\">\n                    </p>\n    </div>\n\n    \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"110434\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"110434votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"110434\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/zumagia\">Ree Ray</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/zumagia\">\r\n\t\t\t<img src=\"http://www.jobbole.com/wp-content/uploads/2015/08/5ae0c1c8a5260bc7b6648f6fbd115c35.png\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            学习Python        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/zumagia\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/zumagia/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/zumagia/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 17</a>        </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "趣文小说,Xerox,微软,苹果", "url": "http://blog.jobbole.com/110434/", "title": "我们有一个富邻居，他叫施乐", "front_image_path": "full/b9e933f040c62d2fe74541e8f0f3afee2e0a48fd.jpg", "comment_nums": 0, "create_time": "2017/03/15", "url_object_id": "09304ef8f9d30b76ef0c6ae5ad2a8c2a", "praise_nums": "2"},
{"front_image_url": ["http://wx2.sinaimg.cn/large/7cc829d3gy1fdpmrcg07vj20dw0cata1.jpg"], "fav_nums": 3, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"><p><script src=\"http://www.imooc.com/open/courselistrandjs\"></script><span style=\"display:block;margin-bottom:10px;\"></span></p>\n</div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/MiaLiang\">MiaLiang</a> 翻译，<a href=\"http://www.jobbole.com/members/hanxiaomax\">艾凌风</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://m.facebook.com/story.php?story_fbid=639922279542652&amp;id=100005746562773\">Bruce Lucas</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>【伯乐在线导读】：2009年，美国 Radford 大学心理学系的 Michael G. Aamodt 博士做了一项关于离婚率的调查研究。博士最初是为了研究“美国执法部门警官的离婚率要远高于其他职业人群的平均水平”这一普遍而奇怪的现象，但此项课题的研究，还顺带产生了许多有用的副成果。发现绝大多数工程专业的从业人员的离婚率都位于 13% 以下。详情看这里：<a href=\"http://blog.jobbole.com/86055/\" target=\"_blank\">http://blog.jobbole.com/86055/</a></p>\n<p>国外程序员 Bruce Lucas 今年 1 月份在 Facebook 发的一个帖子。他认为是程序员是可靠的约会对象和伴侣选择，列举了 20 个理由。</p>\n<hr>\n<h3>1、程序员聪明</h3>\n<p>他们透彻掌握自己知道的东西，并且总是在学习新东西。当遇到不懂的事时，他们热衷于去学习。他们从小就有了这种心态，因而积累了很多知识，随时准备与他人分享。</p>\n<h3>2、他们会珍视你们之间的感情/关系，且意识到并不是每个人都有火辣的身材</h3>\n<p>这是真的。</p>\n<p><img id=\"pic\" class=\"\" src=\"http://wx2.sinaimg.cn/large/7cc829d3gy1fdpmrcg07vj20dw0cata1.jpg\"></p>\n<h3>3、程序员是问题解决者</h3>\n<p>如果事情出错了，他们会竭尽全力解决（fix）。</p>\n<h3>4、相对其他人群来说，程序员都有可观的收入</h3>\n<p>和你交往的程序员很有可能非常富有，因此你大可放心的在一个高级场所就餐，而且不需要担心要掏腰包。</p>\n<p>Mark Zuckerberg 是世界上最富有、最成功和最有能力的科技企业家之一。他是通过 Facebook 社交网络改变世界的程序员。如果你正在找寻一个成功的伴侣，绝大多数程序员有资格做到。</p>\n<h3>5、程序员一般都不缺幽默感</h3>\n<p>Builds failing, code breaking。良好的幽默感，是每个程序员都要具备的。</p>\n<h3>6、程序员注重细节</h3>\n<p>你正在找一个会注意你的人？优秀的程序员总是注重细节。</p>\n<p><img id=\"pic\" class=\"\" src=\"http://wx2.sinaimg.cn/large/7cc829d3gy1fdpmjs4upaj20dw0as75d.jpg\"></p>\n<h3>7、三思熟虑</h3>\n<p>为了用户做优秀产品，他们会花很多时间。这就涉及到理解用户、了解用户需求以及知道他们不喜欢什么。因此他很可能有非常强的感受能力。为什么你有时候会举止异常，他会懂的。在对你做一些可能会影响你的事情前，他会再三考虑。</p>\n<h3>8、程序员通常对自己的职业感到满意</h3>\n<p>这意味着如果你和程序员约会，在家中会有较少的压力。</p>\n<h3>9、程序员是理性物种，少和他们玩心理游戏</h3>\n<p>心理游戏是没啥逻辑，所以程序员不会跟你玩这种游戏。当然了，视频游戏中的心理游戏可能例外了。</p>\n<h3>10、程序员是思考者和学习者</h3>\n<p>他们会喜欢和你进行一次有趣的、深思熟虑的对话，他们会欣赏你的观点。</p>\n<h3>11、</h3>\n<p>如果上面的理由都不能说服你，这一个绝对会。<strong>他所有的人际技巧，让他成为完美的男朋友人选；他的理性将使他成为一个成熟而明智的伴侣。</strong></p>\n<p>程序员最突出的特点是十分尽忠。最有天赋的程序员不一定做收入最高的工作。即使他们可以赚很多很多钱，他们仍会选择最触动他们情感的项目去做。一旦他认定了你，再漂亮的女孩也引诱不了他们。他是你的，他值得拥有。</p>\n<p><img id=\"pic\" class=\"\" src=\"http://wx3.sinaimg.cn/large/7cc829d3gy1fdpmrd6w8ij20dw09a0to.jpg\"></p>\n<h3>12、程序员真的是很好的人</h3>\n<p>一直是！</p>\n<h3>13、程序员有激情；</h3>\n<p>他们是一群有激情的人，会把他们所有时间和精力花在他们心爱的事物上。</p>\n<h3>14、优秀的程序员有耐心</h3>\n<p>如果程序员能在无数行代码中寻找一个分号，这意味着他们拥有足够的耐心。</p>\n<h3>15、程序员可能比较害羞，但他们极其坦率</h3>\n<p>所以如果他们感受到了什么，他们一定会当面告诉你。虽然这可能不是你一直想要的，但是你可以相信这个人对你真诚。</p>\n<h3>16、虽然程序员不是修电脑的，但对你会例外</h3>\n<p>你的电脑坏了？程序员知道为什么，并且能电脑运行得更快！</p>\n<p><img id=\"pic\" class=\"aligncenter\" src=\"http://wx4.sinaimg.cn/large/63918611gy1fdrb0znktdj20go0go0wr.jpg\" width=\"446\" height=\"446\"></p>\n<p style=\"text-align: center\">（喜欢这款T恤的，<a href=\"https://item.taobao.com/item.htm?spm=a1z10.1-c.w4004-15063610009.41.mmsx1s&amp;id=546384800820\" target=\"_blank\">请移步这里</a>）</p>\n<h3>17、程序员不难找</h3>\n<p>他们总是在网上而且等着你！！！ 小编补充：再次推荐「<a href=\"http://date.jobbole.com/?sort=latest\" target=\"_blank\">面向对象</a>」征友活动，虽然只发布单身女生的信息，但非常值得单身男保持关注。从这里可以看到最新发布的单身女生信息：<a href=\"http://date.jobbole.com/?sort=latest\" target=\"_blank\">http://date.jobbole.com/?sort=latest</a></p>\n<h3>18、程序员能维持长久的关系</h3>\n<p>因为他对处理异常、重新检查他的代码、接受自己的错误非常有经验。最重要的是，他从不让他的自负影响他的行为。因为如果你尝试过调试代码，你会意识到，即使是最困难的关系问题，都会有简单的解决办法。</p>\n<p><img id=\"pic\" class=\"\" src=\"http://wx2.sinaimg.cn/large/7cc829d3gy1fdpmjqz8tlj209g0citdz.jpg\"></p>\n<h3>19、程序员都比较温柔和敏感</h3>\n<p>原因之一是他们知道什么时候应该对他们的伴侣妥协。当你某天过得不好，想对人抱怨一下生活中烦心事的时候，他们会在你身边聆听。即使你碰巧责备他们是所有坏事的源头，为了让你感觉好点，他们会选择对你妥协而不是跟你争吵。</p>\n<hr>\n<h3>小编后话：</h3>\n<p>喜欢一样东西或一个人，你能找出很多诸多理由了。讨厌起来，也能找出 N 多理由。</p>\n<p>欢迎大家留言。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"110595\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"110595votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"110595\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 3 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 7 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/MiaLiang\">MiaLiang</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/MiaLiang\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2016/09/13bf5e68935f892cdea9821c47a12c11.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            Hello我是Mia Liang，关注前端，期望成为前端开发工程师        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/MiaLiang\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/mialiang/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/MiaLiang/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 11</a> · <a title=\"QQ：1484265623\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a> <a title=\"个人微信：mia_LSW\" target=\"_blank\" href=\"#\"><i class=\"fa fa-weixin\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "其他,约会", "url": "http://blog.jobbole.com/110595/", "title": "为什么该和程序员约会？我有 20 个理由", "front_image_path": "full/045121baaca13779b5fc617cee060a500caf6831.jpg", "comment_nums": 7, "create_time": "2017/03/18", "url_object_id": "2aee19743fefa2c9527dd1cb9e90560f", "praise_nums": "2"},
{"front_image_url": ["http://wx1.sinaimg.cn/mw690/63918611gy1fdtb3cb7n6j20sg0j0wff.jpg"], "fav_nums": 10, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"><p><script src=\"http://www.imooc.com/open/courselistrandjs\"></script><span style=\"display:block;margin-bottom:10px;\"></span></p>\n</div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/huangxiaofei\">黄小非</a> 翻译。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"http://prog3.com/article/1970-01-01/292096\">prog3.com</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p class=\"p0\">【伯乐在线导读】：本文要讨论的健康问题，其实并不仅仅限于程序员，其他那些需要长期坐在电脑前的工作，比如：网络编辑、网站管理员、IT 从业人员等，也会面临同样的健康问题。本文目的就是要让业界的朋友们对自己面临的健康问题引起关注。</p>\n<p class=\"p0\">Zed Shaw，程序员，吉他手，作家，《笨方法学 Python》的作者。</p>\n<p class=\"p0\"> <img class=\"alignnone aligncenter\" src=\"http://wx4.sinaimg.cn/mw690/63918611gy1fdtb36v11oj208c08c0v2.jpg\" width=\"300\" height=\"300\"></p>\n<p class=\"p0\" style=\"text-align: center\">（本文作者：Zed Shaw ）</p>\n<p>我在最近几次的博客中谈论了《Python The Hard Way Learn | 笨方法学 Python》这个话题，现在我想再开一个新话题：<span style=\"color: #ff0000\"><strong>程序员在职业生涯中可能遇到的健康问题</strong></span>。</p>\n<p>我发现很多程序员都认为敲代码对他们的身体健康貌似没什么影响。我真的非常希望，大家能对程序员面临的健康问题引起重视并从中获益，至少不要像我和其他一些人一样，身体犯了毛病才去后悔。这个话题我应该不会写到我的书里，因为要展开的话内容太多。但是我会在这里写一个“简短版”。你可以对号入座看看自己的情况，也可以参考一下我引用的的那些资料。</p>\n<h3>我的背景和专业</h3>\n<p>我曾经是一名美国军人，并练习过多种武术。最近，我不太痴迷于那些“硬武术”了，但是对于瑜伽，冥想等这些简单的身体活动还是很喜欢的。我的身体非常健美，并且能做到保持，这要感谢我长期以来养成的习惯。首先我还是快速列举一下我学过的武术项目吧：忍术、合气道（一种日本武术技艺——译者注）、柔道、巴西柔术、泰拳、翼宗拳、卡泼卫勒（一种巴西自卫术——译者注）、菲律宾魔杖术，上述的这些武术并不是按照系统训练一样连续学习的。而我一直坚持训练的武术只有泰拳，大约持续了6年。其他的大概也就是各自学了个一到两年的样子。</p>\n<p>我去过很多地方，也从中学到了很多东西。并且，我在军队服役的时候，大约有连续两年的时间，我的身体受到了严格的考验。如果我记得没错的话，在军队里的训练每次会持续2到4小时，除此之外别无他事。以至于后来，即使处于休假状态，我也会保持体重，敏捷性和身体力量。我可能没法告诉你该怎么减肥。因为我生来就不需要减肥。所以在参考我的建议时，你一定要结合自身的情况。在了解我的身体状况以后，随着年龄的增长，我开始在身体柔韧性上下功夫。游泳、舞蹈以及一切避免直接身体冲撞的运动都是我推荐的。我尤其推荐普拉提，瑜伽，这些运动往往被众人认为很难，但实际上并不是如此。我还对我的手下了很多功夫，一会儿我就会说这个事情。</p>\n<p>写了这么多，是为了让读者了解我的能力。但是更重要的是，在做到我上面说的这些的同时，我还是一个职业程序员。在我从军队退役以后，我平均每天学习8到16小时。此外我还弹吉他，并且我避免了腕管综合征和重复性劳动损伤的危害。我希望我在健康方面的经验能够帮助你恢复或者维持你的健康。</p>\n<h1>程序员面临的普遍问题</h1>\n<p>程序员是一种在劳损方面欺骗性很强的职业，部分因为是这个职业看上去只是坐在那里，什么体力也没有消耗，并且很多程序员对他们的身体情况也毫不重视。不过你真的应该留意一下健康问题，因为如果你身体非常棒，那么在心理方面你也会非常和谐，进而你就可以把精力放在更重要的事情上。否则你还要去担心那些恼人的健康问题，这是非常不爽的。</p>\n<p>很显然，“注意饮食”、”多去户外”、”注意运动”这些老生常谈的东西肯定是正确的。所以这里我不跟你谈吃、运动或者练武术能保持健康什么的。如果你对运动或者武术感兴趣，你可以去找专业的教练来指导你。</p>\n<p>我真正想说的是，因自身职业原因，程序员可能面临的那些健康问题。这些问题的成因都非常简单明显，稍加注意根本就不会发生，不过程序员们却并没意识到这一点。</p>\n<ul>\n<li>因重复性劳损导致的手腕疼痛</li>\n<li>因长期盯着滚动的屏幕造成的眼部问题</li>\n<li>因为坐姿不对（尤其是背部太低或者肩膀太高）造成的背部问题</li>\n<li>因为该去厕所的时候不去造成的肠道和泌尿系统问题</li>\n<li>因为喝水不够或者喝了太多咖啡而造成的脱水问题</li>\n<li>因为久坐而造成的痔疮或者前列腺问题。是的，我也面临这个问题。</li>\n<li>因为接触阳光不足造成的缺乏维生素D</li>\n<li>因熬夜或者喝太多咖啡造成的睡眠失调</li>\n<li>因缺乏伸展而造成的身体僵硬或酸痛</li>\n</ul>\n<p>我也曾经在一段时间内面临过上述的各种健康问题，因为我的程序员工作，弹吉他以及不太科学的举重锻炼。后来我解决了大多数的健康问题，并保证以后不会再犯，只有少数几个问题需要周期性地解决。也许你觉得这些健康问题很愚蠢，不过相信我，即使你没有，很多程序员也会面临这些问题的困扰。</p>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/mw690/63918611gy1fdtb3cb7n6j20sg0j0wff.jpg\" width=\"540\" height=\"361\"></p>\n<h1>主要原因：</h1>\n<p>总的来说，这些健康问题的成因可以归结为对于编程的“着魔”。如果你想要成为优秀的程序员，就像我想要的那样，你就要排除其他一切干扰去掌握编程技术。这样即使你编程10个小时也不会想到要去洗澡，你也不会按时吃饭，这些行为模式都源自于你对“成为真正程序员”的疯狂信仰。</p>\n<p>实际情况是，真正的程序员其实和啥子没什么区别。你不按时吃饭，甚至连定期啪啪啪都做不到。你跑两步就开始喘。你的体内器官出现问题，但却并不是因为疾病。说实话，为了成为一个优秀程序员而把自己弄垮，可不是什么值得的事情。</p>\n<p>所以，当你了解到我是如何解决这些健康问题的时候，记住最重要的是要在生活和编程、工作之间保持平衡。相信我，如果你能放松心态保持健康，你在编程方面甚至能做到更好。</p>\n<h1>手腕疼痛</h1>\n<p>这个问题大概是我最常见的一个健康问题。因为我既是程序员又是吉他手，我经常弹吉他并且弹奏的时间很长。从22岁我成为程序员开始，我就周期性地遭受手腕疼痛的困扰。不过我通过合气道练习来有效地治疗手腕疼痛。</p>\n<p>如你所知，合气道技术中有很多神奇的手腕练习动作，比如拉伸、撕扯、反向关节技等等，能让你的手腕变得既强壮又柔韧。</p>\n<p>我就是通过这些练习来修复关节错位和疼痛问题，并且靠这种练习做到了长时间编程且不造成手腕劳损。我唯一一次遇到问题是因为我换了个新键盘，新键盘的按键布局非常怪异，所以造成我打字以后手腕很疼。但是通过一周的手腕练习以后，我的手腕就又变得很强壮了，问题迎刃而解。</p>\n<p>当然，如果你现在患有严重的腕管综合症或者其他类型的重复性劳损症，在尝试自主练习恢复之前还是要咨询一下医生。如果你已经开始自我恢复练习了，那么注意要慢慢来，不要伤到自己。拉伸动作太大造成伤害就不好了，拉伸只要做到“稍微不适”的程度即可。如果你真的把自己拉伤了，那么就不要这么做了。</p>\n<p>其实每次拉伸对你来说就是一种“放松”。这很难用语言解释，你把关节强制掰到某个位置，其实是让关节能够到达这个位置然后放松，或者说是能让你关节的活动范围更多一点点。</p>\n<p>记住这个理念，下面的这些视频能为你演示如何做这些关节方面的练习</p>\n<ul>\n<li>Reverse Wrist 反向腕关节练习</li>\n<li><a href=\"http://www.ehow.com/video_2354920_twisting-wrist-aikido-stretch.html\">Twisting Wrist腕部扭动练习</a></li>\n<li><a href=\"http://kiwi.kz/watch/32max3wdu3ha\">Bent Wrist Fingers Out 腕部和手部向外弯曲练习</a></li>\n<li>Bent Wrist Fingers Down 腕部和手指向下弯曲练习</li>\n</ul>\n<p>下面就向你解释了在你久坐打字之前如何去开展这些练习：</p>\n<ol>\n<li>首先，你要做一下热身，把你的双手放在身体前部，然后快速地做抓空气的动作，重复20次，越快越好。然后抖抖手腕放松一下，接着转动你的手腕，正向和反向各10次。</li>\n<li>挑一个你最擅长的练习模式作为开始，然后用中等速度做5-10组。</li>\n<li>继续做其余的练习，每做完一个练习就抖抖手和胳膊，转动手腕，让关节重新复位。因为这些练习都是涉及到关节的，所以每组做完了以后让关节复位很重要。</li>\n<li>一定不要给你的手腕施加太大的压力。练习就做到刚刚让关节感觉到变化并放松即可。传说中的“练得越狠收获越大”只会让你受伤。</li>\n</ol>\n<p>每次你开始打字之前都要做运动，每天都要坚持，不过中途随时可以停下来。这些运动不会占据你很多时间，一开始可能有点不适，但是很快你的手腕就开始适应这种“复位”锻炼了，然后你的感觉就会好很多。</p>\n<p>有件事情要再强调一次：<span style=\"color: #ff0000\"><strong>开始锻炼之前先咨询医生</strong></span>。擅自开始进行锻炼是存在风险的，所以如果你自己把自己弄伤了可不要怪我没提醒你啊。这些练习在千年的武术套路中已经不断加以实践了，所以我知道它们是安全的，不过“安全”这个概念因人而异。如果你做得不对，真的可能会伤到自己。所以先跟你的医生谈谈，然后再考虑开始练习的事情。</p>\n<h2>吉他手的情况更糟：</h2>\n<p>如果说程序员都会因为职业原因而患上腕管综合症的话，那么吉他手和贝斯手的情况就更加糟糕了。对很多人来说，一些大腕音乐家声称自己“每天练琴8小时”，“每天练琴16小时”，这让人感到神秘。因为这种负荷的练习会让这些大牌吉他手严重损伤自己的健康，甚至可能让他们以后永远都没法再弹琴了。</p>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/mw690/63918611gy1fdtb3hvosbj20sg0j03zv.jpg\" width=\"540\" height=\"361\"></p>\n<p>吉他对你的手来说真是要求很高的乐器，所以你的手只要有一点点疼痛就能让你弹不了吉他。我是在学校里明白这个道理的，当然我当时是个白痴什么都不懂，我相信我的导师告诉我的话，每天弹8小时。我就照着字面的意思，每天连续弹8小时，结果是一个月下来，我的手快废了。</p>\n<p>我的大拇指长出故此，其他的手指也基本没法看了。我的手腕僵硬，手指也不能灵活运动了。我当时就是不听劝告，其实任何新事物都应该循序渐进的，就像健身一样。</p>\n<p>我花了一年半的时间来恢复，其间做了如下的事情：</p>\n<ol>\n<li>找了一把合适的吉他，不伤手的。“什么吉他都一样，没区别”这种观念简直是屁话。你需要找一把不会伤你手的吉他。</li>\n<li>做上一节提到的各种联系，尤其是针对手指部分的。</li>\n<li>通过一套练习来慢慢增加我的手指和大拇指的力量以及柔韧性。</li>\n<li>坚持专注于用更放松的方式来演奏，这样我的按弦动作就会更轻。</li>\n<li>注意手腕弯曲程度，避免受伤。</li>\n<li>改变演奏姿势，使得我在快速的演奏中不用紧握吉他，让我的按弦手的大拇指在琴颈背后的位置更加舒服。</li>\n<li>调整吉他的高度，使得肩膀和手在拿吉他演奏时更加舒适。</li>\n<li>坚持站立演奏，尽量减少坐着演奏的时间，因为坐着演奏的姿势很奇怪。如果一定要坐着演奏，那么要经常更换坐姿。</li>\n</ol>\n<p>做出这些调整后，去年我的手终于感觉好了很多，然后恢复了，不过为了不让我自己再受伤，我也有不少损失。我是个老家伙了，这些保护措施对我来说很重要，但是也意味着那些可能伤到手的事情，我再也不能做了。</p>\n<p>我的手就是我的生命，这意味着拳击、卡泼卫勒，还有那些其他我感兴趣的武术都不能再做了。我可不能让我的手浪费在击打沙袋这种活动上。</p>\n<h1>眼疲劳：</h1>\n<p>我想这对我来说并不是什么大问题，但是读者则需要时刻注意自己的视力。我年轻的时候视力测验是20分满分，但是这么多年来盯着电脑让我的视力有了“些许下降”。我有一副轻度视力矫正眼睛，这些天我一直戴着，哪怕有时候我不需要很仔细看东西的时候我也戴着。对于我来说，世界稍微有一点模糊都是很烦人的。</p>\n<p>早年的时候，大家还整天在用CRT显示器，老显示器的闪烁废了很多人的视力。那时候也有液晶显示器，但是对字体的渲染效果非常糟糕。感谢苹果的专利（我觉得是苹果的专利）让电脑能够在液晶显示器上正常渲染字体。当然还是有很多人认为苹果的字体渲染看上去有点“模糊”，如果是这样的话，那只能说你没能体验到我对字体渲染改进的欣喜。</p>\n<p>我的情况是，我每天花两小时时间，完全不看电脑。取而代之的是我用这些时间来做一些完全不用眼的事情，比如弹吉他，或者出去散个步什么的。这些事情我一次可能做不满2小时，但是我保证我每天离开电脑至少达到2小时。</p>\n<p>这种做法对缓解头疼很有效。程序员经常抱怨说屋子里的灯光是导致头疼的原因，但实际上，错误的字体，屏幕上糟糕的字体，喝水不够以及长时间坐在电脑前面不运动，才是导致头疼的真正原因。</p>\n<p>如果真的在意灯光的因素，那么与其去做一些极端的事情（有的程序员真的把办公室里的所有灯都关了），还不如调整一下屋里的采光，以及把你的桌面主题调节成适合显示器型号和屋内光线的模式。合理调配屋内的光线，显示器亮度，显示质量，字体以及桌面主题颜色，会让你的感觉好很多。</p>\n<p>但最重要的是，一定要按时休息。</p>\n<h1>背部问题：</h1>\n<p>我真的非常幸运，大部分的时间里我的背部都很健康。甚至是在我久坐在椅子的那部分时间里，我的背部都很强壮而且柔韧性很好。</p>\n<p>对我来说，问题在于背的上半部，脖颈以及肩膀。我习惯支起键盘，促使我的身体坐直。实际上在我开始打字的时候我注意到我并没有坐得很直，所以我需要迫使自己改正。</p>\n<p>现在看来，对椅子的选择很重要，我比较推荐 Aeron 办公椅，板凳或者长凳那种。我现在很喜欢我的40美元的钢琴凳，我练习钢琴的时候就用它。凳子没有靠背，所以我必须让自己坐直，这就会用到我的核心肌肉（腹肌和背部肌肉）。</p>\n<p>我的肩膀一直比较紧张。在我注意力很集中的时候，我的肩膀处于缩紧的状态，导致我的整个上背部产生疼痛，并通过神经一直向上传导到我的脖子和头。如果我练习吉他的时间过长，这个问题会变得非常严重。</p>\n<p>然后我找到的最有用的办法是上肢伸展运动和俯卧撑。上肢运动的做法是，抓住门框，然后把一直手臂或者两只手臂朝一个不同的方向拉。如果你的手臂僵硬，你可以尝试如下的动作：</p>\n<ol>\n<li>用一直手抓住门框，手掌面向自己，然后把肩部往外拉，这样就可以拉伸你的胸部以及你肩部的前侧。</li>\n<li>用一只手抓住门框，让你的手臂与身体交叉（请自行脑补姿势——译者注），保持手掌朝向身体（某种反向的姿势），然后拉动肩膀，使得肩膀的背侧得到拉伸。</li>\n<li>双手从前方拉住位于头上的门框，然后离门稍微远一些，使得你的身体能够向下倾斜，并能做出拉动手臂和向后的动作。</li>\n</ol>\n<p>如果做了这组动作，并且完成肩部扭动和身体放松，你的感觉就会好很多。这套动作也可以在你每天上班之前和手腕练习一起做。</p>\n<p>另一种有效的锻炼方法就是做俯卧撑。但是我在开始工作之前是不会做俯卧撑的，因为这个运动太消耗体力，对工作不利。我是在晚上睡觉之前做10个俯卧撑。只要10个就足够锻炼你的胸部，背部，手腕和颈部了。做的时候不要太快，慢慢做，要注意保持身体平衡。</p>\n<h1>脱水：</h1>\n<p>这个问题很简单，但是我自己却常常犯。我每天要喝一吨咖啡，为此我必须要喝很多水来平衡喝咖啡的脱水效应。如果不这么做的话，可能就会造成头疼，或者其他什么问题。脱水的问题在于，如果感觉不到不舒服，你就不会引起重视，但是一旦感觉到了不舒服，往往问题已经很严重了。</p>\n<p>我的建议是，并且我已经在这么做了，无论你喝什么饮料（只要不是水），喝一瓶饮料就喝同样量的一瓶水来平衡。我还建议你少喝碳酸饮料。这些碳酸饮料里面放了很多恶心的假糖，只会让你变胖和得糖尿病，并且对缓解脱水一点帮助都没有。能喝点儿黑咖啡当然是好的，但是记得也要喝些水来平衡。</p>\n<h1>肠道和泌尿系统问题：</h1>\n<p>好吧，这个话题要是细说就太恶心了，所以我就不细说了。但是我要强调的是：</p>\n<blockquote><p>该上厕所的时候就赶快去！别憋着。</p></blockquote>\n<p>你可能不相信这个建议多重要，我在年轻的时候经常听人这么跟我讲。因为我像“真正的程序员”一样，在编程的时候不喜欢被打断，所以我一般能憋多久就憋多久。但是这么做的坏处是，因为肠蠕动的原因，一会儿你就失去了上厕所的感觉了，但是你的便便累积了下来。</p>\n<p>这最终会导致便秘，并影响你的健康。对于泌尿系统来说，憋尿的危害也许没有便秘那么大，但是也会造成尿道感染或者其他一些你意想不到的毛病。</p>\n<p>所以如果你已经深受憋着不上厕所的危害，那么你要做的就是多吃点儿纤维片，然后请两天假待在家里，因为你会经常跑厕所的。</p>\n<p>然后，当你有感觉时，赶快去！我跟你说，也许你在上厕所的时候能想出什么值好几百万的点子呢。</p>\n<h1>痔疮和前列腺的问题：</h1>\n<p>如果你该上厕所的时候憋着不去，那么还可能造成的一个问题就是你可能会得痔疮。是的，这个词儿听上去很恶心，我保证我以后不再提这么恶心的东西了。但是，很多程序员对这个问题羞于启齿，那么就让我来跟你们说明这个事情吧。下列不好的习惯其实我做过一次到两次：</p>\n<ol>\n<li>久坐</li>\n<li>搬运重物，但没有使用合适的工具</li>\n<li>该去上厕所的时候不去</li>\n<li>不想上厕所的时候强迫自己上厕所</li>\n<li>最糟糕的是：长时间坐在马桶上看书 （伯乐在线补充：长时间坐马桶玩手机更要注意）</li>\n</ol>\n<p>我跟你们说，最后一个才是真正的大杀器。如果不是必要，那么就不要在马桶上久坐。因为这样会让你身体的重量和肠道的重量都施加到你的直肠上了，要知道你的直肠本身就很有压力了。很恶心是不。而且此时你的血管是处于不自然状态的，血压会上升，所以会导致痔疮。</p>\n<p>这些事情不但听上去恶心，而且潜在的危险也很大。是的，你很可能会因此得痔疮，严重的话会造成各种出血现象。如果得了痔疮，那么请立刻去看医生。如果需要手术，那么马上就做。我虽然没得过痔疮，但是也就差一点儿而已。有一年的时间，我在减体重，工作环境是仓库，而且我长时间编程，并且不及时去上厕所。</p>\n<p>是的，我那个时候很傻。所以不要再犯我以前犯过的错误了。确保做到以下三件事情，这样能让你的屁股周边保持健康：</p>\n<ol>\n<li>多吃蔬菜，如果你不爱吃蔬菜，至少要吃点儿纤维片</li>\n<li>该去厕所就去厕所，别憋着</li>\n<li>不要给自己太大的压力。</li>\n</ol>\n<p>在这些方面不注意的话，你可能会得前列腺方面的疾病，这类疾病多少都和久坐有关。所以能站起来走走就起来走走，多休息休息，就能解决这类问题。如果你发现你尿液里有血，那么说明问题比较严重了，应该马上去看医生。如果你尿频，也应该去看医生。</p>\n<h1>缺乏维生素D：</h1>\n<p>维生素D是一种奇怪的东西。你晒会儿太阳就能得到维生素D，而且不用晒多长时间。根据阳光的强度，大约晒太阳5-30分钟即可。这同时依赖于你体内的钙含量以及磷酸盐的缺乏程度。如果你饮食规律，并且不常吃像薯片这样的垃圾食品的话，那么问题不会很大。</p>\n<p>有的时候，你可能会情绪低落，牙齿不好，身上哪儿都疼（例如胳膊上的骨头疼），肌肉紧张等等，总的来说就是身体不爽。这个时候你可以选择去看医生，不过可能出去晒个30分钟的太阳也能解决问题。</p>\n<p>实际上，我认为这些问题可能是硅谷这些创业公司提供的饮食服务造成的。因为有了这些，你就会长期待在办公室里，根本不愁没有吃的。然后办公室里面的灯光又比较暗，所以阳光很强的时候你也不愿意外出。再加上可能存在的不良的睡眠习惯，你很可能就缺乏维生素D了，而且还毫不自知。</p>\n<p>所以你要做的就是，不要去贪中午公司给提供的饮食，出门去买食物，顺便走走路，晒晒太阳，这种方式给你带来的好处可比你想象的要大。而且，外面的食物也不错哦。</p>\n<p>我住在温哥华和西雅图的时候，有轻微的维生素D不足的情况。因为这两个地方一年四季没几天能看见太阳，对我来说简直太糟糕了。有些人能忍受这种气候，但是对于我这种从小在热带海岛气候长大的人来说，这种气候简直就像是谋杀。</p>\n<p>所以，如果你能晒到太阳，那就快去晒吧。</p>\n<h1>睡眠紊乱：</h1>\n<p>我的睡眠习惯一直都不是很固定，总的来说要根据季节和我在的区域来决定。在有些地方我就习惯于在晚上做事，晚睡晚起。后来我搬到旧金山以后，我就养成了早起的习惯，晚上也不熬夜了，所以最近一段时间我感觉健康多了。</p>\n<p>不过有的时候，我也不知道为什么，我就是觉得在晚上或者天快亮的时候做事比较有效率，无论是写代码还是做音乐都是如此。我认为很可能是因为我的大脑在这些时候比较累，所以反而比较放松。还有一个可能的原因就是这些时间比较安静，所以我就能坚持做我要做的事情，减少干扰。</p>\n<p>无论采用什么方式，早起而晚睡这件事情对睡眠肯定是不利的。我发现随着年龄的增大，我更倾向于早起了。我觉得我在一天中清醒的时间越来越长。如果我睡得特别晚，或者喝大了的话，第二天起来都会头疼。</p>\n<p>如果你有睡眠方面的问题，那么我有一个非常简单的冥想法推荐，我自己用这个方法有几年的时间了，能够帮助你解决问题。这需要一点耐心，但是非常有效，而且见效很快。</p>\n<p>首先，选一个你能买得起的最贵的床。2000美元的床基本就是刚起步的水平。我花了2200美元去买了一个Tempur-Pedic的床。真是物有所值啊。</p>\n<p>现在你有了很好的床了，然后你就可以开始练习如何让自己睡着了。下面就是一个如何让自我催眠的好办法：</p>\n<ol>\n<li>关掉屋里所有的灯，让一切静音</li>\n<li>平躺，把手放在你身上舒服的位置，或放在身侧</li>\n<li>慢速深呼吸并吐气，并想象你能看见你呼吸的气流</li>\n<li>一旦你开始成功想象自己的呼吸，然后开始想象你能看透窗户，窗外是大片开阔的星空</li>\n<li>呼吸中，想象你自己漂浮起来，慢慢穿过窗户，然后飘入到星空当中，</li>\n<li>让这种状态持续，让周围的环境飘入你的床前，再飘出，直到一切都消失</li>\n</ol>\n<p>这样，你大概在步骤4或者5的时候就能睡着了，如果还没有的话，那么让自己继续飘着融入环境直到你睡着了为止。</p>\n<p>如果你患有严重失眠的话，那么上面的方法就不适合你了，尽快去看医生吧，或者你可以疯狂健身1到2小时。健身绝对能够帮助你入睡。</p>\n<h1>身体僵硬和柔韧性问题：</h1>\n<p>如果你长期觉得身体“僵硬”或者在运动方面不够理想，那么很可能需要做一些日常拉伸运动来改善。最好的办法是一周做一次瑜伽，然后平时再做一些其他的练习。如果你做不到这一点，那么就按照一些书上介绍的基本的拉伸知识来做吧，图书馆或者书店里都有这类书的。只需要最简单的那种书就可以，并不需要搞得太复杂。</p>\n<p>我觉得如果你能在晚上睡觉前做5-6组比较大幅度的伸展运动，就会对你放松身体有很大帮助，你也能在健康和自我感觉方面得到很大的改善。</p>\n<p>身体上的拉伸也能放松你的精神，做一做瑜伽，或者做30分钟拉伸运动，再去洗个晨澡，是帮助自己提升创造力，促进大脑运动的好办法。如果还能结合冥想一起锻炼，那么你会发现你的精神适应能力会得到显著的改善，并能做到很多以前做不到的事情。</p>\n<p>我不清楚其中的原理，但放松自己的精神，确实有助于提升创造性以及激发创意。</p>\n<h1>千里之行，始于足下：</h1>\n<p>本文可能对于一个人来说包含了太多的内容，说真心话伯乐在线是希望您的身体完全健康，一条都不用参照的。不过如果您没有这些问题，我还是建议您可以尝试一下这些方法，出于预防的目的。如果你已经决定开始尝试，那么您需要采用一种简单的“编码热身”的方法，就像你在写代码之前做的那样。</p>\n<p>下面的这些事情，是我在我写代码，弹吉他之前，或者身体僵硬需要运动之前做的：</p>\n<ol>\n<li>转动所有关节，手腕，手臂，脖子，背部以及胯部，每个关节画几个小圈，正向5次，反向5次</li>\n<li>做少量几组腕部练习，每组间抖手腕放松</li>\n<li>把手臂伸向头部上方进行拉伸，举得越高越好，然后向后拉伸，拉伸越大越好，然后在身体前方做手臂交叉拉伸</li>\n<li>最后，用手做头部的拉伸，把头拉向右、左、前、后，动作要小心，幅度要小。</li>\n</ol>\n<p>如果你能做到这些，那么你就可以避免很多程序员面临的健康问题。因为编程并不是什么重体力活，所以很多健康问题其实是可以自己避免的，而你要做的就是做上述的那些练习。</p>\n<p>不过，如果你有特定的健康问题，那么你需要咨询你的理疗师，如果理疗师说没什么大碍，你也可以听听其他人的建议。我在这里所说的一切方法都是不是什么极端或者古怪的东西，都是些基本的运动练习，也符合常识，所以对于医生来说，这些做法应该是没问题的。不过我可不想被人起诉说是在让人误入歧途，所以我强调过了，一切要先问问再做。</p>\n<p>希望这篇博客的内容对你有用，如果没有用的话，那么记住我的建议<span style=\"color: #ff0000\">是要先问问医生再做，以免你被我误导</span>。如果幸运的话，你可能并不存在任何健康问题，但是在我看来，基本上每个程序员都多多少少地有我提到的各种问题。</p>\n<p>所以，一定要自己保重身体。</p>\n\r\n        \r\n            <blockquote class=\"rewards\">\n        <p><strong>打赏支持我翻译更多好文章，谢谢！</strong></p>\n        <a href=\"#rewardbox\" id=\"rewards-button\" class=\"fancybox\"><span class=\"btn-bluet-blue href-style\"><i class=\"fa fa-jpy\"></i> 打赏译者</span></a>\n    </blockquote>\n\n    <div id=\"rewardbox\">\n        <h4>打赏支持我翻译更多好文章，谢谢！</h4>\n                <p>\n                        <img src=\"http://www.jobbole.com/wp-content/uploads/2016/04/78805a221a988e79ef3f42d7c5bfd4187.jpeg\">\n            \n                    </p>\n    </div>\n\n    \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"110628\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"110628votetotal\">3</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"110628\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 10 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 6 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/huangxiaofei\">黄小非</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/huangxiaofei\">\r\n\t\t\t<img src=\"http://www.jobbole.com/wp-content/uploads/avatars/5423/Corbis-42-221258652.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            黄小非：毕业于重庆大学计算机系，南开大学软件工程硕士，SCJP。 目前在一家国企信息中心任职软件开发工程师。主要技术兴趣为Java平台相关技术、系统构架、C/C++、计算机图形学等。（新浪微博：@黄小非）        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/huangxiaofei\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/huangxiaofei/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/huangxiaofei/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 48</a>        </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "职场,健康,程序员", "url": "http://blog.jobbole.com/110628/", "title": "常坐电脑前面，这些健康问题你注意到了么？", "front_image_path": "full/e0ecd0751fc329d2f703a677f8e848dc4aa19c86.jpg", "comment_nums": 6, "create_time": "2017/03/20", "url_object_id": "48d8039208eb2f9711bcf5331f976618", "praise_nums": "3"},
{"front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/01/d8ff4fd532a1a30d821049d62c62d106.jpg"], "fav_nums": 1, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"><p><script src=\"http://www.imooc.com/open/courselistrandjs\"></script><span style=\"display:block;margin-bottom:10px;\"></span></p>\n</div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/randomli\">欣仔</a> 翻译。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://www.sandimetz.com/blog/2016/1/20/the-wrong-abstraction\">Sandi Metz</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>这篇文章本来是我在Chainline Newsletter写的，不过后来我经常在推特上收到相关内容的@，所以我现在在我的博客上重新发布这篇文章，内容略有修改。</p>\n<p>我一直在思考“错误的抽象”所带来的结果，我在RailsConf2014“细枝末节”的演讲中有一部分说道：</p>\n<blockquote><p>重复是比错误的抽象更低成本的。</p></blockquote>\n<p>在摘要中，我也建议道：</p>\n<blockquote><p>建议使用重复而不是错误的抽象。</p></blockquote>\n<p>这个长篇演讲中的小插曲却一石激起千层浪，引起了强烈的反响。少数人觉得我糊涂了，但是更多的人对下面这句表示认同：</p>\n<blockquote><p>这些，无数次的这些情况！很多条都像如下这条这么说！“@BonzoESC:”重复是比错误的抽象更低成本的“ @sandimetz @rbonales pic.twitter.com/3qMI0waqWb”</p>\n<p>-41个蓝色调（@pims）2014.3.7</p></blockquote>\n<p>这些反应的力量使我意识到“错误的抽象”所带来的问题是如此普遍和棘手，下文是我提出的几个问题：</p>\n<p style=\"padding-left: 30px\">1、程序员A发现了重复。</p>\n<p style=\"padding-left: 30px\">2、程序员A抽取了重复部分并给它命名。</p>\n<p style=\"padding-left: 30px\">这就创造了一个新的抽象，它可以是一个新的方法，甚至也可能是一个新的类。</p>\n<p style=\"padding-left: 30px\">3、程序员A用这个新的抽象代替了重复。</p>\n<p style=\"padding-left: 30px\">吼！这段代码棒极了，程序员A欢快的跑了起来。</p>\n<p style=\"padding-left: 30px\">4、时光流逝。</p>\n<p style=\"padding-left: 30px\">5、针对目前这个近乎完美的抽象出现了一个新的需求。</p>\n<p style=\"padding-left: 30px\">6、程序员B被分配了实现这个需求的任务。</p>\n<p style=\"padding-left: 30px\">程序员B认为保留这些原来的抽象是荣誉攸关的，但是因为每种情况都不太一样，只能修改这些代码来接收参数，然后根据这些参数的值再加上执行逻辑的条件式来得到正确的结果。</p>\n<p style=\"padding-left: 30px\">一个曾经通用的抽象现在却需要根据不同情况做出不同表现。</p>\n<p style=\"padding-left: 30px\">7、一个新的需求出现。<br>\n程序员X。<br>\n又增加一个参数。<br>\n又增加一个条件式。<br>\n循环往复直到代码不可维护。</p>\n<p style=\"padding-left: 30px\">8、此时你在这个故事中登场了，然后你的生活戏剧性的急转直下。</p>\n<p>现有的代码有很强的影响力，其存在就说明它的正确性和必要性。这些代码代表了我们的努力，所以我们有很强的动机保卫这些努力的价值。但不幸的结局是这些代码越复杂越难懂，也就是说，创造这些代码的投资越多，越让我们感到维护它很有压力（这就是“沉没成本误区”）。犹如潜意识告诉我们：“神啊，这太难懂了，肯定调试了很久才调好吧。这段代码肯定很有用，不能让这些努力白费掉。”</p>\n<p>当你在如上这个故事的第八步出现时，这种压力可能会迫使你继续前进，也就是通过修改现有的代码来完成新的需求。然而尝试这样做是不理性的。这些代码不再代表一个纯粹的、通用的抽象，而是一个充满附加条件的过程，其中夹杂了一系列错综复杂的目的，令这代码既难理解又容易出问题。</p>\n<p>如果发现自己处于这种情况下，要坚决拒绝被沉没成本所驱使。当处理这些错误的抽象时，最快的前进道路是回头，照着下面的步骤来做：</p>\n<p style=\"padding-left: 30px\"><span id=\"pos_placeholder\" style=\"width: 0px;height: 0px;margin: 0px;padding: 0px\"></span>1、把嵌入在抽象代码中的重复部分再次引入到每个调用它的地方。<br>\n2、在每个调用内部，用被传递的参数来决定保留哪一部分inlined代码会被这个调用所执<br>\n3、删掉对每个不同调用来说不必要的部分。</p>\n<p>这样就同时移除了抽象和条件式，并且减少了每个调用的代码，只保留它所必要的。当你回过头来看使用这种方法的决定时，通常会发现，即使每个调用表面上调用了一个共享的抽象，但是每段代码平等且独立的运行着。一旦完成了对旧的抽象的移除，你就可以重新开始了。重新对重复隔离，然后重新提取抽象。</p>\n<p>我看过很多人试图勇敢的带着错误的抽象前行而出现很多问题，且鲜有成功。新增特性是非常困难的，并且每一次成功新增都会使代码更加复杂，也使下一次新增特性变得更加困难。当人们改变他们对“必须保留我们在这段代码中耗费的心血”的想法，转而成为“这段代码的意义是暂时的，可能我们已经掌握了所有我们能从它中所学到的东西”，让自己根据目前的需求重新思考这些抽象时，事情就变得简单了。当他们内嵌这些代码时，前面的路就清晰了，增加新特性也变得简单高效。</p>\n<p>这个故事的意义是什么？不要被沉没成本误区所困。如果你发现自己在共享代码中传递参数、增加条件分支时，这个抽象就是错误的。也许开始时它是正确的，但是那一天已经过去了。当一个抽象被证明是错误的时候，最佳策略是重新引入重复，让它告诉你什么是正确的。即使累积条件式偶尔有效，能让你深入了解这是怎么回事，但如果你越快放弃这些错误的抽象，你将会越少承受它所带来的痛苦。</p>\n<p>当抽象是错误的时候，最快的前行道路是回头，这不是倒退，而是向更好的方向进发。就这样做！将会使你和后人的生活更美好。</p>\n\r\n        \r\n            <blockquote class=\"rewards\">\n        <p><strong>打赏支持我翻译更多好文章，谢谢！</strong></p>\n        <a href=\"#rewardbox\" id=\"rewards-button\" class=\"fancybox\"><span class=\"btn-bluet-blue href-style\"><i class=\"fa fa-jpy\"></i> 打赏译者</span></a>\n    </blockquote>\n\n    <div id=\"rewardbox\">\n        <h4>打赏支持我翻译更多好文章，谢谢！</h4>\n                <p>\n                        <img src=\"http://jbcdn2.b0.upaiyun.com/2016/08/647babf96cf39feeea99ca6771f37763.jpg\">\n            \n                    </p>\n    </div>\n\n    \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"110594\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"110594votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"110594\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/randomli\">欣仔</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/randomli\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2016/12/5858dcb1cf754469936ed3326e54932e.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            假装会写代码的伪程序员~        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/randomli\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/randomli/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/randomli/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 11</a> · <a title=\"微博主页\" target=\"_blank\" href=\"http://weibo.com/1715653890/profile?rightmod=1&amp;wvr=6&amp;mod=personinfo&amp;is_all=1\"><i class=\"fa fa-weibo\"></i></a> <a title=\"QQ：497480210\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,抽象", "url": "http://blog.jobbole.com/110594/", "title": "错误的抽象", "front_image_path": "full/78311042527a7716a14c0a1eccd5b49d4931b8e9.jpg", "comment_nums": 0, "create_time": "2017/03/18", "url_object_id": "9e0321f9a362adcc138e72f15b4e2c39", "praise_nums": "2"},
{"front_image_url": ["http://tech-blog.oss-cn-hangzhou.aliyuncs.com/requirements-specification-apes-dog-fight.jpg"], "fav_nums": 4, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"><p><script src=\"http://www.imooc.com/open/courselistrandjs\"></script><span style=\"display:block;margin-bottom:10px;\"></span></p>\n</div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.cnblogs.com/charliechu/p/6553988.html\">CharlieChu</a>   </div><div id=\"cnblogs_post_body\">\n<p>在很多软件公司，特别是一些创业型的团队中，对于这样的情景可能大家都很熟悉：项目经理或者产品经理（<strong>产品狗</strong>）口头或者简单记录一下软件产品的大致要做的功能，直接就让研发团队的兄弟（<strong>程序猿</strong>）去狂撸代码。然后他就去喝茶撩妹或者回家陪老婆了…</p>\n<p>这种撸起袖子就开干的方式，看似简单高效，便于直接沟通，能够快速迭代。却不知，发现没有一份正规且实时更新的功能需求设计文档，会付出三四倍的代价来弥补。</p>\n<p>最终会引发一场产品狗和程序猿之间的“<strong>猿狗大战</strong>”…</p>\n<p><img src=\"http://tech-blog.oss-cn-hangzhou.aliyuncs.com/requirements-specification-apes-dog-fight.jpg\"></p>\n<h1 id=\"why---为什么需要功能需求设计说明书\">WHY – 为什么需要功能需求设计说明书</h1>\n<p>在没有功能设计文档时，主要有如下几个问题：</p>\n<ul>\n<li><strong>前期研究团队沟通成本</strong></li>\n</ul>\n<p>如何要让团队里面的所有人员对软件产品的功能需求设计有一个共识？<strong>没有功能设计文档，反正我是想不出有什么办法</strong>。当该项目的团队人员越多，沟通成本就变得很高。</p>\n<p>研发人员很容易有一个通病：以为自己了解了一小块需求就立即开始埋头狂撸……代码。最终很可能与项目经理和客户真正想要的功能相差甚远。</p>\n<p>更可怕的，研发人员把数据库设计好了，代码也已经写得差不多了，这时产品狗突然跑到程序猿这，说我们的需求要做一点变化，大家都知道，“<strong>对产品狗来说那一点变化，可能会害得程序猿撸过几天几夜</strong>”。那很小的变更可能导致之前设计的数据库，码的代码都不能用了。对于程序猿<strong>没有什么比加班加点写了几个月的代码，最终被产品狗告知需求变了</strong>，代码要删除重新写更可怕的。估计<strong>只能用涨工资来安慰一下那受伤的心灵了</strong>。</p>\n<p><img src=\"http://tech-blog.oss-cn-hangzhou.aliyuncs.com/requirements-specification-1.png?x-oss-process=style/scale-width-400\"></p>\n<p>还有一个比较隐藏的事情是，每个程序猿都认为自己写的代码很牛逼（其实对于大多数人这只是一个错觉，你写得代码并不优秀），不太愿意删除之前所写的东西，总是想在原有的代码基础上进行修改，<strong>让他们删除代码比杀了他还难</strong>。</p>\n<p>作为公司的技术负责人，我每几天都会Code Review团队里面所有人的代码，一直要求他们把不用的代码去掉，但他们的应对方式总是加两个<code>//</code>。注释掉他们写的代码，而不是去做真正的删除动作。他们总有自己的理由，<strong>“这只是暂时注释掉，后面会用到”</strong>，但最终的结果是那些代码就像尸体一样，一直在那里，干扰着团队人员正常的思路。所以我只能强制性让他们那些“暂时没有用，以后会用到的代码”干掉 。</p>\n<ul>\n<li><strong>前期任务进度安排和分配</strong></li>\n</ul>\n<p>该文档也是任务进度安排和分配的重要依据。<strong>在没有功能需求设计文档之前的所有任务进度计划都是瞎扯淡</strong>，都不知道具体要做什么东西，哪能拿出合理的任务进度计划。如果你拿出来了，我也不相信那是经过认真分析做的进度计划，我知道那只是用来看领导看的。</p>\n<ul>\n<li><strong>中期产品经理需求变更</strong></li>\n</ul>\n<p>软件在开发过程中难免会遇到功能的需求变更，将程序猿们召集在一起把所有的变更讲一遍？当走出会议室的时候可能每个人都有自己的理解。<strong>下一场战争已悄然临近…</strong></p>\n<p><img src=\"http://tech-blog.oss-cn-hangzhou.aliyuncs.com/requirements-specification-apes.jpg\"></p>\n<ul>\n<li><strong>后期测试团队产品测试</strong></li>\n</ul>\n<p>测试团队应该在项目Kickoff之时就应该介入，而不是在产品开发完成之后。测试团队应该对功能需求设计文档充分了解，且以此来编写具体的测试用例文档。否则，只能是在界面上进行简单的表面测试，而真正的BUG并不在表面，这些BUG会藏得很深，等发现的时候可能已经造成很大的损失。测试团队想覆盖全部的测试用例此时已经相当困难，他们甚至都不知道产品有哪些功能。</p>\n<p>测试用例应该尽可能详细，尽量保证测试用例走完能确保产品能上线发布。下图为我们在登录注册时用到的一部分用例：</p>\n<p><img src=\"http://tech-blog.oss-cn-hangzhou.aliyuncs.com/requirements-specification-testcase.png\"></p>\n<h1 id=\"where---文档应该放在何处\">WHERE – 文档应该放在何处</h1>\n<p>功能说明文档一定要保持实时性，任何变更的需求，新增的需求都必须在该文档中体现。</p>\n<p>一只产品狗（或一群）在编写完文档后，要发给项目经理、研发人员、销售人员、运营推广人员等人，如何保证每个人的文档都是最新的呢？如果通过QQ，邮件等方式，是不是每次更新都要重新通知所有人：“嘿，各位兄弟，文档作了一次修改，我给大家都重新发一份新的”。每个人电脑里面都有好几个版本的文档，时间长了，自己都忘记哪个文档是最新的；产品狗也记不清是否是所有相关的人都发了最新的文档。</p>\n<p>研发人员可能会说通过SVN来作版本管理啊，给每个人分配一个帐号。“天啊，SVN是啥？”-销售人员、运营推广人员估计一脸懵逼。</p>\n<p>更好的办法是通过团队实时协作的云端工具。从而实现分享和实时讨论，告别反复修改版本再发送邮件的麻烦。如果你会FQ，那你可以使用<a href=\"https://www.google.com/docs/about/\">Google Docs</a>、<a href=\"https://www.office.com/0/?ui=zh-CN&amp;rs=CN&amp;auth=1\">Office Online</a>。否则你可以使用<a href=\"https://shimo.im/\">石墨文档</a>、<a href=\"https://yiqixie.com/\">一起写</a>。</p>\n<h1 id=\"what---什么是功能需求设计文档-应该包含那些内容\">WHAT – 什么是功能需求设计文档 &amp; 应该包含那些内容</h1>\n<p>功能需求设计文档最重要的是描述产品所要包含的所有功能，越详细越好，可以结合产品的<strong>原型设计图</strong>来讲解。让项目所有相关人知道产品是什么，包含哪些页面，页面如何跳转等。</p>\n<p>该文档是产品经理、项目经理、研发人员、销售人员、运营推广人员沟通的一个桥梁，一份好的功能需求设计文档是软件产品是否能成功的关键。</p>\n<p>考虑是该文档的受众，这份文档不应该包含具体的编程技术上的说明。不管你是用C#/.NET、JAVA还是其它，这应该是另外研发团队内部使用的一份文档。</p>\n<p>一般人第一反映就是去网上找一份功能需求设计文档模板，我个人感觉那些模板90%根本没有存在的必要。都太过形式化，不要没有实际意义和模板化的内容，只会使文档成为一个摆饰，反而是在浪费大家的时间。</p>\n<p>那么一份合格的软件需求设计文档应该包括哪些内容呢？</p>\n<ul>\n<li><strong>项目背景</strong></li>\n</ul>\n<p>项目产生的实际背景、具体的运用场景、大致要解决什么样的问题、针对的阅读对象、版本修改记录、文档作者以及修改人信息。</p>\n<ul>\n<li><strong>详细的功能点描述</strong></li>\n</ul>\n<p>写明产品所包含的所有功能点，对功能、界面、接口的描述一定要充分详细，每处可以交互的地方都要给出具体的说明。再次强调，一定要<strong>详细描述每一个页面所拥有的功能</strong>。</p>\n<ul>\n<li><strong>产品不包含的功能点说明</strong></li>\n</ul>\n<p>除了写明产品所包含的所有功能点外，还应该写明软件所不包含的功能，这一点也很重要。</p>\n<ul>\n<li><strong>使用场景（画面感）</strong></li>\n</ul>\n<p>将复杂的业务逻辑融入到具体的<strong>使用场景</strong>中，更容易让项目经理、研发人员、销售人员、运营推广人员不同背景的人产生共识。</p>\n<ul>\n<li><strong>流程图</strong></li>\n</ul>\n<p>大家都知道“一图胜千言”，能用图说明的尽量用图来说明，只通过大量枯燥的文字可能效果并不太好。流程图是一种用图形表示逻辑和算法的工具，特别对研发人员撸代码很有帮助。<br>\nWindows用户可以使用Visio，Mac用户可以使用<a href=\"https://www.omnigroup.com/omnigraffle/\">OmniGraffle</a>，还可以使用免费在线作图,实时协作工具<a href=\"https://www.processon.com/\">ProcessOn</a>。</p>\n<p>我之前就用ProcessOn画了一个设置了缓存的网络请求的流程图，这里作个参考：</p>\n<p><img src=\"http://tech-blog.oss-cn-hangzhou.aliyuncs.com/sample-flowchart-template.png\"></p>\n<ul>\n<li><strong>人员角色“实例化”</strong></li>\n</ul>\n<p>跟上面提到的“画面感”相结合，将人员和角色能够实例化。比如我们的产品要实现如下功能，有两种表达方式：</p>\n<blockquote><p>医生给患者测量血压，并记录到系统中。</p></blockquote>\n<blockquote><p>上海华山医院肾内科的王主任医生在给32号病区1号病床的患者刘阿姨测量血压，将测量到的血压<code>100/70mmHg</code>输入到透析管理系统。</p></blockquote>\n<p>哪种方式更便于理解？特别是对医疗知识不太了解的码农们。当然可能有人觉得第一种方式更简洁。可能是我举的例子不够好，也可能是我的理解能力不够强。（但不要怀疑我的智商！哈哈哈…）</p>\n<ul>\n<li><strong>结合产品原型设计图</strong></li>\n</ul>\n<p>产品原型设计图可以粗枝大叶地产品大致的框架。便于项目经理、研发人员、销售人员、运营推广人员等人在产品未开发之前对产品有一个相对直观的认识。没有一个原型图，想到这帮人拉到同一个频道沟通一定是不可能的事。（如果你做到了，那么赶紧把你的简历发我，我决定录用你！）</p>\n<p>常用的原型设计工具有<a href=\"https://modao.cc/\">墨刀</a>、<a href=\"https://www.mockplus.cn/\">Mockplus</a>、<a href=\"https://www.axure.com/\">Axure</a>。</p>\n<p>扯了这么多，来个例子吧。</p>\n<p> </p>\n<p>本软件是给北京某医院集团肾内科透析患者所使用的软件，包括院内管理系统、院外大数据平台、医护端APP、患者端APP…</p>\n<table>\n<thead>\n<tr class=\"header\">\n<th>版本</th>\n<th>作者</th>\n<th>修订时间</th>\n<th>审核人</th>\n</tr>\n</thead>\n<tbody>\n<tr class=\"odd\">\n<td>v1.0.0</td>\n<td>Charlie Chu</td>\n<td>2017-2-12</td>\n<td>Vivian Wong</td>\n</tr>\n</tbody>\n</table>\n<p><strong>使用场景一</strong>：</p>\n<p>肾内科的医生王医生给31号病床刘阿姨进行透析上机操作，王医生在院内透析管理系统上点击上机操作，信息会传递到院外的大数据平台以及医护端APP、患者端APP上…</p>\n<p>刘阿姨患者的家属登录到患者端APP后，可以实时查看刘阿姨透析过程中的所有信息，还可以查看血压、血糖、体重等历史数据…</p>\n<p>当刘阿姨在家中通过蓝牙血压计测量血压时，自动同步到医院内部，如果刘阿姨的血压超过预先设置的值，院内的王医生则会在自己的手机上查看到刘阿姨的血压异常报警信息，王医生可以立即跟刘阿姨的家属进行实时沟通…</p>\n<p>…&lt;此处省略N字&gt;…</p>\n<p>本软件(v1.0.1版本)不包括的功能需求如下：</p>\n<ul>\n<li>医生与患者的实时IM</li>\n<li>医生排班设置</li>\n<li>修改密码</li>\n<li>患者积分</li>\n</ul>\n<p><strong>功能模块详细描述</strong>：</p>\n<p><strong>一、APP登录页面</strong></p>\n<p>由于本产品不存在患者自己注册的场景，所有的患者录入都发生在院外透析系统中，患者及家属在院外只需要输入相应的手机号，即可登录系统。</p>\n<p>登录页面只有两个输入框，一个手机号，一个密码。</p>\n<p>当用户要输入手机号时，手机应该弹出纯数字键盘，最多只能输入手机号固定的11位。密码最多输入10位。</p>\n<p>当用户点击登录时，APP与后台服务器进行交互：</p>\n<ol>\n<li>不输入手机号和密码，直接点击登录按钮，应该提示用户输入手机号和密码。</li>\n<li>输入手机号但不输入密码，点击登录，提示“请输入密码”。</li>\n<li>输入不正确的手机号，点击登录，应该提示“不存在该用户”。</li>\n<li>输入小于11位的手机号，应该提示“请输入正确的手机号”。</li>\n</ol>\n<p><strong>二、登录后首页</strong></p>\n<p>下图是左侧是一个首页，右侧是一个点击透析预警的详细页面:</p>\n</div>\n<p><img class=\"alignnone\" src=\"http://wx2.sinaimg.cn/large/63918611gy1fdutkmncwvj20r40o2k2z.jpg\" width=\"976\" height=\"866\"></p>\n<p>首页包括功能点：</p>\n<ol>\n<li><strong>资讯信息轮播</strong> 首页顶部资讯信息轮播功能，点击可以跳转到新的页面可以查看资讯详情。</li>\n<li><strong>病情咨询</strong> 点击“病情咨询”模块，患者查看向指定的医生了解自己的病情。</li>\n<li><strong>透析记录</strong> 点击透析记录，患者可以随时随地查看自己的过往透析记录。</li>\n<li><strong>食物速查</strong> 点击食物速查，可以查看所有类别的食物成份含量。</li>\n<li><strong>透析上下机实时信息列表</strong> 当患者在医院内进行透析上下机等操作时，会记录患者的透析上机时间 、下机时间等信息。点击其中的一条记录，跳转到透析详情页面，如上图右侧所示。</li>\n</ol>\n<h1 id=\"how---如何保证文档质量\">HOW – 如何保证文档质量</h1>\n<p>要保证文档能够实时更新同步，而不是疲于应付。那就是让大家都通过该文档来进行沟通，谁有问题直接去看文档，需求一旦变更首先就更新到文档。</p>\n<p>研发人员严格按文档上的描述来开发，<strong>在没有文档之前，对不起，拒绝开发！</strong>任何口头、QQ或邮件上的新的功能需求一概不理！提前是产品狗要比较给力，否则老板还是会让你狂撸代码…</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"110645\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"110645votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"110645\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 4 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 3 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "开发,需求", "url": "http://blog.jobbole.com/110645/", "title": "没有功能需求设计文档？对不起，拒绝开发！", "front_image_path": "full/ae50e3174376a1a13d1ed7cd64a803549b755f1f.jpg", "comment_nums": 3, "create_time": "2017/03/21", "url_object_id": "20ad287c7097190e4e559e07a2a915d9", "praise_nums": "2"},
{"front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/03/a59049e754131da2871feac43b0bc2a7.png"], "fav_nums": 2, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"><p><script src=\"http://www.imooc.com/open/courselistrandjs\"></script><span style=\"display:block;margin-bottom:10px;\"></span></p>\n</div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://chrismm.com/blog/writing-good-code-reduce-the-cognitive-load/?2\">chrismm</a>   译文出处：<a target=\"_blank\" href=\"https://www.oschina.net/translate/writing-good-code-reduce-the-cognitive-load?print\">开源中国 - 边城</a>   </div><p>Bug 少，性能好，容易修改。好的代码影响深远，而且它可能是产生 10 倍工作效率的开发者的主要原因。尽管好代码十分重要，但开发新手却不得要领。关于这一主题的技巧多而冗杂，让新手们如何记得住？“《<a href=\"https://www.amazon.cn/gp/product/B0061XKRXA/ref=as_li_qf_sp_asin_il_tl?ie=UTF8&amp;camp=536&amp;creative=3200&amp;creativeASIN=B0061XKRXA&amp;linkCode=as2&amp;tag=vastwork-23\" target=\"_blank\">代码大全</a>》)” 是这个主题的经典，但内容多达 960 页！</p>\n<p><strong>我认为应该建立起良好的心态，这样，不管你用什么语言或者库，都会自然而然的写出高质量的代码。</strong>这里我主要谈到 5 个相关的概念。记住它们，轻松写出写出好代码。</p>\n<h3>避免特立独行</h3>\n<p>当你读到一些文章中的新技巧时，如醍醐灌顶，一定会想要写点看起来很聪明的代码，让同行们眼前一亮。</p>\n<p>问题是人们只是想修完 BUG，然后继续处理其它事情。那些聪明的技巧常常只会成为一种消遣。我曾经在“<a href=\"https://chrismm.com/blog/applying-neuroscience-to-software-development/\" rel=\"nofollow\">将神经科学应用于软件开发</a>”中谈到，当人们被迫花心思来理解你的某段代码时，它们的“精神堆栈”会迅速填满，因而难以理解其中深意。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/03/a59049e754131da2871feac43b0bc2a7.png\" alt=\"\" width=\"724\" height=\"225\"></p>\n<p>[译者注：图片中的注释内容：这在 C 语言中用于避免误写成 variable = null。最近它造成不少人困惑，但似乎并没带来多大好处]</p>\n<p>不要在工作中使用太多可能需要额外解释的个性化方式。</p>\n<p>不要用“你的方式”来编写代码，只需要按照标准（的代码规范）来编写就好。再次强调，要写让人读得明白，看得下去的代码，让人家能够理解它。</p>\n<h3>分而治之</h3>\n<p>模块化可以使复杂的代码结构变得清晰，除此之外还有很多方法可以达到同样的目的，而无需创建更多函数。将长长的条件表达式保存为一到两个变量就是个不错的方法，可以避免调用函数的开销。这些变量可以用在其它地方，甚至可用于组合更复杂的条件。</p>\n<p>拆解问题的方法在于尽可能的让每个部分保持集中，只影响局部状态，不要混入不相关的问题，要避免副作用。编程语言和库通常会带来各自相应的问题，避免这些问题可以让你的代码更专注于其表达的业务。<a href=\"http://code.tutsplus.com/tutorials/solid-part-1-the-single-responsibility-principle--net-36074\" rel=\"nofollow\">单一责任原则</a>就是通过集中代码和局部化代码带来良好设计的例子。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/03/2b2b7d24ee719373f8519cd43fddaa05.png\" alt=\"\" width=\"744\" height=\"259\"></p>\n<p>[译者注：图中注释内容：这是不需要额外函数开销的一种模块化方法]</p>\n<p>我喜欢利用变更来进行逻辑划分。</p>\n<p>TDD（Test Driven Development，测试驱动开发）的成功实施表现出了它所带来的好处，它迫使人们运用一些以前不受欢迎的准则。无状态的代码曾经被嫌弃又慢又没必要（大部分老的 C/C++ 代码中可以看到），然而现在每个人都在谈论纯函数。就算你不采用 TDD，你也应该学习它背后的原则。在新的模式下工作会让你成为适应性极强的开发者。</p>\n<h3>分离代码并使其可分别处理</h3>\n<p>你写代码的时候面临着什么样的困难，你的计算机和工具也面临着同样的困难。代码的复杂性，与需要进行的预处理和需要处理的突发情况存在着或多或少的联系。</p>\n<p>现在暂时抛开那些额外的构建工具所带来的好处。它们需要你使用特定领域的语言，比如自定义模板，或者复杂的动态数据结构，比如哈稀表。IDE 通常不善于处理这些东西，要找到相关的代码段则更加困难。</p>\n<p>尽量避免使用不能很好支持 IDE 的语言扩展和库。它们给你的生产力带来的好处，远大于简易配置和用简洁语法保存击键带来的小便利。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/03/06603fe3699302c02c393a28ab3e66a2.png\" alt=\"\" width=\"720\" height=\"194\"></p>\n<p>[译者注：图中注释内容：使用神奇的字体串可能造成 IDE 不能正确识别你的代码]</p>\n<p>ServiceLocator 是与 IDE 整合不佳的一个设计样例。</p>\n<p>另一个保持 IDE“整合度”的相关方法是避免编写特殊的代码。多数语言都提供了编写动态代码的能力。如果滥用这些特性，比如特殊的字符串、特殊的数组索引和自定义模板语言特性等，会产生难以连接的代码库[译者注：这里的连接应该是指相互关联的关系，连接最直接的影响是在使用 IDE 等工具进行重构的时候可以自动根据连接关系修改相关引用]。一般说来，那些只有你一个人才能看懂的特性会让你摔跟头的，因为如果 IDE 不能理解这些代码，在你想进行结构调整的时候，IDE 就没法帮你进行重构。</p>\n<h3>让程序可读</h3>\n<p>致力于可预测的架构。这种架构下你的队友要进行某项查找就会很容易，可以节约不少时间。<strong>一旦你为项目确定了一个整体的架构，就一定要把主要元素放在显眼的位置。</strong>使用 MVC？把模型、视图和控制器放在他们自己的目录下，不要放在三个深层次的目录中，也不要放在几个不同的地方。</p>\n<p>我在前面谈到了模块化。也存在过度的模块化，让定位代码这种事情变得艰难无比。IDE 可能会带来一些帮助，但通常你往往会让 IDE 忽略库目录，因为其中有很多不相关的代码，或者它的索引需要人工处理一些问题，就会造成两败俱伤的局面。尽量使用较少的库，选用那些尽可能多覆盖你需求的库。</p>\n<p>库和工具也可能成为新人的障碍。我最近使用 EcmaScript 7 (babel) 构建了一个项目，后来我才意识到我们的初级开发人员一直因为想搞明白它而卡在那里，这对团队的生产力造成了巨大损失。我低估了这对一个新手所带来的压力。不要使用对当前来说太难掌握的工具，等时机成熟再使用。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/03/f0ad825818d83fca666870e278bdce7d.png\" alt=\"\" width=\"747\" height=\"293\"></p>\n<p>这是我写的一个 makefile 中的真实代码。新手不需掌握过多的新技术。</p>\n<h3>让代码易于理解</h3>\n<p>如果你已经做到了这一点，那我们来解决更重要的问题——选择好名字，这是软件开发中的重要部分。构建工具在这方面不能提供帮助，原因很简单，计算机不会真正知道解决方案背后的逻辑。<strong>你得通过文档来解释代码，而与主题相关，且符合上下文，体现变量和功能的名称就能很好做到这一点。</strong>语义化的名称甚至可以减少对文档的需求。</p>\n<p>在名称中使用前缀对理解它们很有帮助。这在过去是一种流行的做法，我认为对这种作法的误用导致了它的消亡。像<a href=\"http://www.joelonsoftware.com/articles/Wrong.html\" rel=\"nofollow\">匈牙利命名法</a>这样的前缀系统最初只是为了增加意义，但最后用于其中的上下文越来越少，终于少得只剩类型信息。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/03/30fce63ef347dae3a0a932b19c14e3d1.png\" alt=\"\" width=\"697\" height=\"228\"></p>\n<p>[译者注：图中的注释内容：使用名称来表达意图，不要利用语言来耍小聪明]</p>\n<p>近来，Fluent 接口经常被滥用。</p>\n<p>最后要说说老生常谈的回溯复杂度。简单地说就是要尽可能减少条件分支的数目。每多一个分支都会增加缩进，同时降低可读性。不过更重要的是，增加的东西越多，你需要跟踪的东西就越多。</p>\n<h3>结论 &amp; 相关阅读</h3>\n<p>本文介绍了五个简单的总体概念，我希望你能从中轻松的学习到组织代码的方法。</p>\n<p><strong>实践是最好的老师，用编程来巩固理论。</strong>如果你还没有这样做，我诚挚向你推荐《<a href=\"https://www.amazon.cn/gp/product/B0061XKRXA/ref=as_li_qf_sp_asin_il_tl?ie=UTF8&amp;camp=536&amp;creative=3200&amp;creativeASIN=B0061XKRXA&amp;linkCode=as2&amp;tag=vastwork-23\" target=\"_blank\">代码大全</a>》。它带来了大量的示例，几乎剖析了你可能遇到的每一种问题。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"110623\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"110623votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"110623\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "开发,代码", "url": "http://blog.jobbole.com/110623/", "title": "编写好代码：如何减少代码的认知负荷", "front_image_path": "full/ce8636a3b54a8b510ed65345797b01b5ef09b4a2.jpg", "comment_nums": 0, "create_time": "2017/03/20", "url_object_id": "697c472527a70d0f9f258873da5dffe3", "praise_nums": "1"},
{"front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/02/1919e8843bc2ef30b31780793500ba6e-300x137.jpeg"], "fav_nums": 3, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"><p><script src=\"http://www.imooc.com/open/courselistrandjs\"></script><span style=\"display:block;margin-bottom:10px;\"></span></p>\n</div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/wx1265511474\">心灵是一棵开花的树</a> 翻译，<a href=\"http://www.jobbole.com/members/hanxiaomax\">艾凌风</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://medium.com/javascript-scene/the-rise-and-fall-and-rise-of-functional-programming-composable-software-c2d91b424c8c#.8rj6dlopj\">Eric Elliott</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p> </p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/02/1919e8843bc2ef30b31780793500ba6e.jpeg\"><img class=\"alignnone size-medium wp-image-62442\" src=\"http://jbcdn2.b0.upaiyun.com/2017/02/1919e8843bc2ef30b31780793500ba6e-300x137.jpeg\" alt=\"1\" width=\"300\" height=\"137\"></a></p>\n<p>Smoke Art Cubes to Smoke — MattysFlicks — (CC BY 2.0)</p>\n<p><em>请注意：这是</em><em>JavaScript ES6+</em><em>学习</em><em>函数式编程和组合软件技术的“组合软件”系列的第</em><em>1</em><em>部分。接下来的部分更精彩，敬请期待！</em></p>\n<p>在我大约六岁时，我的大部分光阴是在与我最好的朋友玩电脑游戏中度过的。他家中有一个装满了电脑的房间，对我来说，它们像魔力一样无法抗拒。我花了很多时间探索所有的游戏。有一天，我问朋友“我们怎样能做出一个游戏呢？”</p>\n<p>他不知道，所以我们就去问他的父亲，他的父亲在一个高架子上拿下来一本关于用Basic写游戏的书。我的编程之旅从此开始。当公立学校开始讲授代数时，我已经很了解了，因为编程基本上就是代数，代数在程序中无处不在。</p>\n<p> </p>\n<p><strong>组合软件的崛起</strong></p>\n<p>在计算机技术发展的初始阶段，计算机还不能实现大多数计算前，有两位伟大的计算机科学家，阿隆佐·邱奇  （Alonzo Church）和阿兰·图灵 （Alan Turing）。他们发明了两种不同的，但是等效的通用计算模型。这两种模型都可以计算可计算的任何东西（因此被称为“通用”）。</p>\n<p>阿隆佐·邱奇发明了λ演算。λ演算是基于函数组合的通用计算模型。阿兰·图灵则以图灵机而闻名。图灵机是一种通用计算模型，它定义了一种可以处理条带上符号的理论装置。</p>\n<p>他们共同证明了λ演算和图灵机在功能上是等价的。</p>\n<p><span id=\"pos_placeholder\" style=\"width: 0px;height: 0px;margin: 0px;padding: 0px\"></span>λ演算是关于函数组合的。函数组合是一种极富有表现力的组合软件的方法。本文将讨论函数组合在软件设计中的重要性。</p>\n<p> </p>\n<p>以下三点使得λ演算与众不同，</p>\n<ol>\n<li>允许匿名函数：add(x, y) =&gt; x + y可以表示为(x, y) =&gt; x + y。</li>\n<li>λ演算中的函数只接受单个输入，它是一元的。如果需要多个参数，该函数将接受一个输入，并返回一个接收下一个参数的新函数，依此类推。N元函数 (x, y) =&gt; x + y 可以表示为这样的一元函数 x =&gt; y =&gt; x + y。从N元函数到1元函数的这种变换被称为柯里化（currying）。</li>\n<li>函数是一级的，意味着函数可以作为其他函数的输入和返回值。</li>\n</ol>\n<p>这些特征共同形成了一个简单的、表达性的词汇，用于编写使用函数作为主要构件块的软件。换句话说，使用函数组合来构建软件。</p>\n<p>经典的函数组合是将一个函数的输出作为另一个函数的输入，例如，组合f . g可以写为compose2 = f =&gt; g =&gt; x =&gt; f(g(x))</p>\n<p>以下是使用方法，</p>\n<p>double = n =&gt; n * 2<br>\ninc = n =&gt; n + 1</p>\n<p>compose2(double)(inc)(3)</p>\n<p>compose2函数将double函数作为第一个参数，inc函数作为第二个，然后将这两个函数的组合应用到参数3上。再来看一下compose2(),f 是 double(), g是inc(), x 是 3.函数调用compose2(double)(inc)(3)实际是三个不同的函数调用，</p>\n<ol>\n<li>第一个通过double，返回一个新函数。</li>\n<li>返回的函数使用inc，返回另一个新函数。</li>\n<li>另一个新函数使用3，计算f(g(x))，即double(inc(3))。</li>\n<li>x 的值是3，传递给inc()。</li>\n<li>inc(3)得到4。</li>\n<li>double(4) 得到8。</li>\n<li>8就是整个函数的返回值。</li>\n</ol>\n<p> </p>\n<p>当组合软件时，可以用一个组合图来表示，以下表达式可以直观的表示为：</p>\n<p>append = s1 =&gt; s2 =&gt; s1 + s2<br>\nappend(‘Hello, ‘)(‘world!’)</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/02/d903e84ec1e69982599c98a6590f75ee.png\"><img class=\"alignnone size-medium wp-image-62443\" src=\"http://jbcdn2.b0.upaiyun.com/2017/02/d903e84ec1e69982599c98a6590f75ee-232x300.png\" alt=\"2\" width=\"232\" height=\"300\"></a></p>\n<p>λ演算对软件设计有巨大的影响，在1980之前，很多非常有影响力的计算机科学品牌使用函数组合来构建软件。表处理语言（Lisp）创建于1958，它深受λ演算的影响。现在，Lisp是依然在广泛使用的历史第二悠久的语言了。</p>\n<p>I was introduced to it through AutoLISP: the scripting language used in the most popular Computer Aided Design (CAD) software: AutoCAD. AutoCAD is so popular, virtually every other CAD application supports AutoLISP so that they can be compatible. Lisp is also a popular teaching language in computer science curriculum for three reasons:</p>\n<ol>\n<li>Its simplicity makes it easy to learn the basic syntax and semantics of Lisp in about a day.</li>\n<li>Lisp is all about function composition, and function composition is an elegant way to structure applications.</li>\n<li>The best computer science text book I know of uses Lisp:<a href=\"https://www.amazon.com/Structure-Interpretation-Computer-Programs-Engineering/dp/0262510871/ref=as_li_ss_tl?ie=UTF8&amp;linkCode=ll1&amp;tag=eejs-20&amp;linkId=4896ed63eee8657b6379c2acd99dd3f3\">Structure and Interpretation of Computer Programs</a>.</li>\n</ol>\n<p>我通过AutoLISP了解了LISP， AutoLISP是在最流行的计算机辅助软件（CAD）AutoCAD中使用的脚本语言。AutoCAD很受欢迎，几乎每一个其他CAD应用为了能够与之兼容也使用了AutoLISP. Lisp也是计算机科学课程中的一种流行的教学语言，原因有三：</p>\n<ol>\n<li>它的简单性使得大约一天就可以学会Lisp的基本语法和语义。</li>\n<li>Lisp是关于函数组合的，而函数组合是构建应用程序最好的方法。</li>\n<li>我知道最好的计算机科学教科书是使用Lisp的：<a href=\"https://www.amazon.cn/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A8%8B%E5%BA%8F%E7%9A%84%E6%9E%84%E9%80%A0%E5%92%8C%E8%A7%A3%E9%87%8A/dp/B0011AP7RY/ref=sr_1_fkmr3_1?ie=UTF8&amp;qid=1489842042&amp;sr=8-1-fkmr3&amp;keywords=%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A8%8B%E5%BA%8F%E7%9A%84%E7%BB%93%E6%9E%84%E4%B8%8E%E8%A7%A3%E9%87%8A\">计算机程序的结构与解释</a>。</li>\n</ol>\n<p><strong> </strong></p>\n<p><strong>函数式编程的没落</strong></p>\n<p>1970到1980年间，软件的构建方法偏离了简单的组合，成为了供计算机遵循的一系列线性指令。然后出现了面向对象编程——一个关于组件封装和消息传递的伟大想法，却被流行的编程语言曲解为一个关于继承层次结构的糟糕想法。</p>\n<p>函数式编程被边缘化，沦落到了学术界：1990到2010年间，酷爱编程的极客们，常春藤名校中的教授们，和一些幸运的学生躲过了Java填鸭式的痴迷。</p>\n<p>对我们大多数人来说，在这30年中，软件开发简直是噩梦。 黑暗时代。</p>\n<p> </p>\n<p><strong>函数式编程的崛起</strong></p>\n<p>2010年左右，一些伟大的事情开始发生：JavaScript爆发了。在2006年之前，JS被广泛的认为是用来编写浏览器中小动画的玩具语言，但它隐藏了一些强大的功能，即λ演算。人们开始悄悄讨论这个被称为“函数式编程”的新事物。</p>\n<p>到了2015年，用函数组合来构建软件的想法再次流行起来。为了使它更简单，JS规范做了十年来的第一次大版本升级，并添加了箭头函数，这使得创建和阅读函数、克里化、λ演算更容易。</p>\n<p>箭头函数就像火箭燃料，使得JS中的函数式编程异常火爆。今天很少见到一个不使用大量函数式编程技术的大型应用程序。</p>\n<p>组合是一种简洁，优雅，清晰的描述软件行为的方法。组合小的、确定性的功能以创建一个大的软件组件和功能的流程，产生了易于组织、理解、调试、扩展、测试、维护的软件。</p>\n<p> </p>\n<p>当你阅读以下文章时，请将实例一一实践。请记住在学习时，要像孩子一样，找出问题、探索、边玩边学。重新发现儿时发现的乐趣。让我们来创造一些奇迹吧。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"110593\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"110593votetotal\">3</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"110593\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 3 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/wx1265511474\">心灵是一棵开花的树</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/wx1265511474\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2015/04/8fbdaaa5ea6d3b49c8c1c825aafeb5d9.png\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            程序媛        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/wx1265511474\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/wx1265511474/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/wx1265511474/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 17</a>        </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,函数式编程", "url": "http://blog.jobbole.com/110593/", "title": "函数式编程从崛起到没落到再崛起", "front_image_path": "full/6d03c03210bbc9ce15246d49ad30c880987e14e3.jpg", "comment_nums": 0, "create_time": "2017/03/18", "url_object_id": "d5aa18fcf7138ca56e116e9e7f78fea0", "praise_nums": "3"},
{"front_image_url": ["http://wx4.sinaimg.cn/mw690/63918611ly1fdmo4xuvndj207b09fwji.jpg"], "fav_nums": 19, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"><p><script src=\"http://www.imooc.com/open/courselistrandjs\"></script><span style=\"display:block;margin-bottom:10px;\"></span></p>\n</div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文作者： <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/xhb7636553\">徐汉彬</a> 。未经作者许可，禁止转载！<br>欢迎加入伯乐在线 <a href=\"http://blog.jobbole.com/99322\" target=\"_blank\">专栏作者</a>。</div><h2><b>一、人工智能和新科技革命</b></h2>\n<p>2017年围棋界发生了一件比较重要事，Master（Alphago）以60连胜横扫天下，击败各路世界冠军，人工智能以气势如虹的姿态出现在我们人类的面前。围棋曾经一度被称为“人类智慧的堡垒”，如今，这座堡垒也随之成为过去。从2016年三月份AlphaGo击败李世石开始，AI全面进入我们大众的视野，对于它的讨论变得更为火热起来，整个业界普遍认为，它很可能带来下一次科技革命，并且，在未来可预见的10多年里，深刻得改变我们的生活。</p>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/mw690/63918611ly1fdmo4xuvndj207b09fwji.jpg\" width=\"263\" height=\"339\"></p>\n<p>其实，AI除了可以做我们熟知的人脸、语音等识别之外，它可以做蛮多有趣的事情。</p>\n<p>例如，让AI学习大量古诗之后写古诗，并且可以写出质量非常不错的古诗。</p>\n<p><img class=\"alignnone\" src=\"http://wx2.sinaimg.cn/mw690/63918611ly1fdmo51f5z5j20g4068aca.jpg\" width=\"580\" height=\"224\"></p>\n<p>又或者，将两部设计造型不同的汽车进行融合，形成全新一种设计风格的新汽车造型。</p>\n<p><img class=\"alignnone\" src=\"http://wx2.sinaimg.cn/mw690/63918611ly1fdmo51yex1j20go04atcn.jpg\" width=\"600\" height=\"154\"></p>\n<p>还有，之前大家在朋友圈里可能看过的，将相片转换成对应的艺术风格的画作。</p>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/mw690/63918611ly1fdmo53079bj20go0b1an1.jpg\" width=\"600\" height=\"397\"></p>\n<p>当前，人工智能已经在图像、语音等多个领域的技术上，取得了全面的突破。与此同时，另外一个问题随之而来，如果这一轮的AI浪潮真的将会掀起新的科技革命，那么在可预见的未来，我们整个互联网都将发生翻天覆地的变化，深刻影响我们的生活。那么作为工程师的我，又应该以何种态度和方式应对这场时代洪流的冲击呢？</p>\n<p>在回答这个问题之前，我们先一起看看上一轮由计算机信息技术引领的科技革命中，过去30多年中国程序员的角色变化：</p>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/mw690/63918611ly1fdmo53mjuxj20go05ijsu.jpg\" width=\"600\" height=\"198\"></p>\n<p>通过上图可以简总结：编程技术在不断地发展并且走向普及，从最开始掌握在科学家和专家学者手中的技能，逐渐发展为一门大众技能。换而言之，我们公司内很多资深的工程师，如果带着今天对编程和计算机的理解和理念回到1980年，那么他无疑就是那个时代的计算机专家。</p>\n<p>如果这一轮AI浪潮真的会带来新的一轮科技革命，那么我们相信，它也会遵循类似的发展轨迹，逐步发展和走向普及。如果基于这个理解，或许，我们可以通过积极学习，争取成为第一代AI工程师。</p>\n<h2>二、深度学习技术</h2>\n<p>这一轮AI的技术突破，主要源于深度学习技术，而关于AI和深度学习的发展历史我们这里不重复讲述，可自行查阅。我用了一个多月的业务时间，去了解和学习了深度学习技术，在这里，我尝试以一名工程师的视角，以尽量容易让大家理解的方式一起探讨下深度学习的原理，尽管，受限于我个人的技术水平和掌握程度，未必完全准确。</p>\n<p><b>1. 人的智能和神经元</b></p>\n<p>人类智能最重要的部分是大脑，大脑虽然复杂，它的组成单元却是相对简单的，大脑皮层以及整个神经系统，是由神经元细胞组成的。而一个神经元细胞，由树突和轴突组成，它们分别代表输入和输出。连在细胞膜上的分叉结构叫树突，是输入，那根长长的“尾巴”叫轴突，是输出。神经元输出的有电信号和化学信号，最主要的是沿着轴突细胞膜表面传播的一个电脉冲。忽略掉各种细节，神经元，就是一个积累了足够的输入，就产生一次输出（兴奋）的相对简单的装置。</p>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/mw690/63918611ly1fdmo547kjrj20go0d5god.jpg\" width=\"600\" height=\"473\"></p>\n<p>树突和轴突都有大量的分支，轴突的末端通常连接到其他细胞的树突上，连接点上是一个叫“突触”的结构。一个神经元的输出通过突触传递给成千上万个下游的神经元，神经元可以调整突触的结合强度，并且，有的突触是促进下游细胞的兴奋，有的是则是抑制。一个神经元有成千上万个上游神经元，积累它们的输入，产生输出。</p>\n<p><img class=\"alignnone\" src=\"http://wx3.sinaimg.cn/mw690/63918611ly1fdmo54sdnwj208p061n0n.jpg\" width=\"313\" height=\"217\"></p>\n<p>人脑有1000亿个神经元，1000万亿个突触，它们组成人脑中庞大的神经网络，最终产生的结果即是人的智能。</p>\n<p><b>2. 人工神经元和神经网络</b></p>\n<p>一个神经元的结构相对来说是比较简单的，于是，科学家们就思考，我们的AI是否可以从中获得借鉴？神经元接受激励，输出一个响应的方式，同计算机中的输入输出非常类似，看起来简直就是量身定做的，刚好可以用一个函数来模拟。</p>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/mw690/63918611ly1fdmo55co3ej20ai07ugnx.jpg\" width=\"378\" height=\"282\"></p>\n<p>通过借鉴和参考神经元的机制，科学家们模拟出了人工神经元和人工神经网络。当然，通过上述这个抽象的描述和图，比较难让大家理解它的机制和原理。我们以“房屋价格测算”作为例子，一起来看看：</p>\n<p>一套房子的价格，会受到很多因素的影响，例如地段、朝向、房龄、面积、银行利率等等，这些因素如果细分，可能会有几十个。一般在深度学习模型里，这些影响结果的因素我们称之为特征。我们先假设一种极端的场景，例如影响价格的特征只有一种，就是房子面积。于是我们收集一批相关的数据，例如，50平米50万、93平米95万等一系列样本数据，如果将这些样本数据放到而为坐标里看，则如下图：</p>\n<p><img class=\"alignnone\" src=\"http://wx3.sinaimg.cn/mw690/63918611ly1fdmo568mu3j20go0b7dkq.jpg\" width=\"600\" height=\"403\"></p>\n<p>然后，正如我们前面所说的，我们尝试用一个“函数”去拟合这个输入（面积x）和输出（价格y），简而言之，我们就是要通过一条直线或者曲线将这些点“拟合”起来。</p>\n<p>假设情况也比较极端，这些点刚好可以用一条“直线”拟合（真实情况通常不会是直线），如下图：</p>\n<p><img class=\"alignnone\" src=\"http://wx3.sinaimg.cn/mw690/63918611ly1fdmo572s7ej20go0boq89.jpg\" width=\"600\" height=\"420\"></p>\n<p>那么我们的函数是一个一次元方程f(x) = ax +b，当然，如果是曲线的话，我们得到的将是多次元方程。我们获得这个f(x) = ax +b的函数之后，接下来就可以做房价“预测”，例如，我们可以计算一个我们从未看见的面积案例81.5平方米，它究竟是多少钱？</p>\n<p>这个新的样本案例，可以通过直线找到对应的点（黄色的点），如图下：</p>\n<p><img class=\"alignnone\" src=\"http://wx2.sinaimg.cn/mw690/63918611ly1fdmo57ygr5j20go0bjn2h.jpg\" width=\"600\" height=\"415\"></p>\n<p>粗略的理解，上面就是AI的概括性的运作方式。这一切似乎显得过于简单了？当然不会，因为，我们前面提到，影响房价其实远不止一个特征，而是有几十个，这样问题就比较复杂了，接下来，这里则要继续介绍深度学习模型的训练方式。这部分内容相对复杂一点，我尽量以业务工程师的视角来做一个粗略而简单的阐述。</p>\n<p><b>3. 深度学习模型的训练方式</b></p>\n<p>当有好几十个特征共同影响价格的时候，自然就会涉及权重分配的问题，例如有一些对房价是主要正权重的，例如地段、面积等，也有一些是负权重的，例如房龄等。</p>\n<p><b>（1）初始化权重计算</b></p>\n<p>那么，第一个步其实是给这些特征加一个权重值，但是，最开始我们根本不知道这些权重值是多少？怎么办呢？不管那么多了，先给它们随机赋值吧。随机赋值，最终计算出来的估算房价肯定是不准确的，例如，它可能将价值100万的房子，计算成了10万。</p>\n<p><b>（2）损失函数</b></p>\n<p>因为现在模型的估值和实际估值差距比较大，于是，我们需要引入一个评估“不准确”程度的衡量角色，也就是损失（loss）函数，它是衡量模型估算值和真实值差距的标准，损失函数越小，则模型的估算值和真实值的察觉越小，而我们的根本目的，就是降低这个损失函数。让刚刚的房子特征的模型估算值，逼近100万的估算结果。</p>\n<p><b>（3）模型调整</b></p>\n<p>通过梯度下降和反向传播，计算出朝着降低损失函数的方向调整权重参数。举一个不恰当的比喻，我们给面积增加一些权重，然后给房子朝向减少一些权重（实际计算方式，并非针对单个个例特征的调整），然后损失函数就变小了。</p>\n<p><b>（4）循环迭代</b></p>\n<p>调整了模型的权重之后，就可以又重新取一批新的样本数据，重复前面的步骤，经过几十万次甚至更多的训练次数，最终估算模型的估算值逼近了真实值结果，这个模型的则是我们要的“函数”。</p>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/mw690/63918611ly1fdmo59bfylj20go0f242x.jpg\" width=\"600\" height=\"542\"></p>\n<p>为了让大家更容易理解和直观，采用的例子比较粗略，并且讲述深度学习模型的训练过程，中间省略了比较多的细节。讲完了原理，那么我们就开始讲讲如何学习和搭建demo。</p>\n<h2>三、深度学习环境搭建</h2>\n<p>在2个月前（2016年11月），人工智能对我来说，只是一个高大上的概念。但是，经过一个多月的业余时间的认真学习，我发现还是能够学到一些东西，并且跑一些demo和应用出来的。</p>\n<p><b>1. 学习的提前准备</b></p>\n<p>（1）部分数学内容的复习，高中数学、概率、线性代数等部分内容。（累计花费了10个小时，，挑了关键的点看了下，其实还是不太够，只能让自己看公式的时候，相对没有那么懵）</p>\n<p>（2）Python基础语法学习。（花费了3个小时左右，我以前从未写过Python，因为后面Google的TensorFlow框架的使用是基于Python的）</p>\n<p>（3）Google的TensorFlow深度学习开源框架。（花费了10多个小时去看）</p>\n<p>数学基础好或者前期先不关注原理的同学，数学部分不看也可以开始做，全凭个人选择。</p>\n<p><b>2. Google的TensorFlow开源深度学习框架</b></p>\n<p>深度学习框架，我们可以粗略的理解为是一个“数学函数”集合和AI训练学习的执行框架。通过它，我们能够更好的将AI的模型运行和维护起来。</p>\n<p>深度学习的框架有各种各样的版本（<a class=\" wrap external\" href=\"http://link.zhihu.com/?target=https%3A//github.com/BVLC/caffe\" target=\"_blank\" rel=\"nofollow noreferrer\">Caffe<i class=\"icon-external\"></i></a>、<a class=\" wrap external\" href=\"http://link.zhihu.com/?target=https%3A//github.com/torch/torch7\" target=\"_blank\" rel=\"nofollow noreferrer\">Torch<i class=\"icon-external\"></i></a>、<a class=\" wrap external\" href=\"http://link.zhihu.com/?target=https%3A//github.com/Theano/Theano\" target=\"_blank\" rel=\"nofollow noreferrer\">Theano<i class=\"icon-external\"></i></a>等等），我只接触了Google的TensorFlow，因此，后面的内容都是基于TensorFlow展开的，它的详细介绍这里不展开讲述，建议直接进入官网查看。非常令人庆幸的是TensorFlow比较早就有中文社区了，尽管里面的内容有一点老，搭建环境方面有一些坑，但是已经属于为数不多的中文文档了，大家且看且珍惜。</p>\n<blockquote><p>TensorFlow的中文社区：</p>\n<p><a class=\" wrap external\" href=\"http://link.zhihu.com/?target=http%3A//www.tensorfly.cn/\" target=\"_blank\" rel=\"nofollow noreferrer\">TensorFlow中文社区-首页<i class=\"icon-external\"></i></a></p>\n<p>TensorFlow的英文社区：</p>\n<p><a class=\" external\" href=\"http://link.zhihu.com/?target=https%3A//www.tensorflow.org/\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">https://www.</span><span class=\"visible\">tensorflow.org/</span><i class=\"icon-external\"></i></a></p></blockquote>\n<p><b>3. TensorFlow环境搭建</b></p>\n<p>环境搭建本身并不复杂，主要解决相关的依赖。但是，基础库的依赖可以带来很多问题，因此，建议尽量一步到位，会简单很多。</p>\n<p><b>（1）操作系统</b></p>\n<p>我搭建环境使用的机器是腾讯云上的机器，软件环境如下：</p>\n<p>操作系统：CentOS 7.2 64位（GCC 4.8.5）</p>\n<p>因为这个框架依赖于python2.7和glibc 2.17。比较旧的版本的CentOS一般都是python2.6以及版本比较低的glibc，会产生比较的多基础库依赖问题。而且，glibc作为Linux的底层库，牵一发动全身，直接对它升级是比较复杂，很可能会带来更多的环境异常问题。</p>\n<p><b>（2）软件环境</b></p>\n<p>我目前安装的Python版本是python-2.7.5，建议可以采用yum install python的方式安装相关的原来软件。然后，再安装 python内的组件包管理器pip，安装好pip之后，接下来的其他软件的安装就相对比较简单了。</p>\n<p>例如安装TensorFlow，可通过如下一句命令完成（它会自动帮忙解决一些库依赖问题）：</p>\n<p>pip install -U tensorflow</p>\n<p>这里需要特别注意的是，不要按照TensorFlow的中文社区的指引去安装，因为它会安装一个非常老的版本（0.5.0），用这个版本跑很多demo都会遇到问题的。而实际上，目前通过上述提供的命令安装，是tensorflow (1.0.0)的版本了。</p>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/mw690/63918611ly1fdmo59yo9gj20go01lglw.jpg\" width=\"600\" height=\"57\"></p>\n<p>Python（2.7.5）下的其他需要安装的关键组件：</p>\n<blockquote><p>tensorflow (0.12.1)，深度学习的核心框架</p>\n<p>image (1.5.5)，图像处理相关，部分例子会用到</p>\n<p>PIL (1.1.7)，图像处理相关，部分例子会用到</p></blockquote>\n<p>除此之后，当然还有另外的一些依赖组件，通过pip list命令可以查看我们安装的python组件：</p>\n<div class=\"highlight\">\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d446d3807a0602035646\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nappdirs (1.4.0)\r\nbackports.ssl-match-hostname (3.4.0.2)\r\nchardet (2.2.1)\r\nconfigobj (4.7.2)\r\ndecorator (3.4.0)\r\nDjango (1.10.4)\r\nfuncsigs (1.0.2)\r\nimage (1.5.5)\r\niniparse (0.4)\r\nkitchen (1.1.1)\r\nlangtable (0.0.31)\r\nmock (2.0.0)\r\nnumpy (1.12.0)\r\npackaging (16.8)\r\npbr (1.10.0)\r\nperf (0.1)\r\nPIL (1.1.7)\r\nPillow (3.4.2)\r\npip (9.0.1)\r\nprotobuf (3.2.0)\r\npycurl (7.19.0)\r\npygobject (3.14.0)\r\npygpgme (0.3)\r\npyliblzma (0.5.3)\r\npyparsing (2.1.10)\r\npython-augeas (0.5.0)\r\npython-dmidecode (3.10.13)\r\npyudev (0.15)\r\npyxattr (0.5.1)\r\nsetuptools (34.2.0)\r\nsix (1.10.0)\r\nslip (0.4.0)\r\nslip.dbus (0.4.0)\r\ntensorflow (1.0.0)\r\nurlgrabber (3.10)\r\nwheel (0.29.0)\r\nyum-langpacks (0.4.2)\r\nyum-metadata-parser (1.1.4)\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d446d3807a0602035646-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d446d3807a0602035646-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d446d3807a0602035646-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d446d3807a0602035646-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-58d446d3807a0602035646-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d446d3807a0602035646-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-58d446d3807a0602035646-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d446d3807a0602035646-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-58d446d3807a0602035646-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d446d3807a0602035646-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-58d446d3807a0602035646-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d446d3807a0602035646-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-58d446d3807a0602035646-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d446d3807a0602035646-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-58d446d3807a0602035646-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d446d3807a0602035646-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-58d446d3807a0602035646-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d446d3807a0602035646-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-58d446d3807a0602035646-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d446d3807a0602035646-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-58d446d3807a0602035646-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d446d3807a0602035646-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-58d446d3807a0602035646-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d446d3807a0602035646-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-58d446d3807a0602035646-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d446d3807a0602035646-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-58d446d3807a0602035646-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d446d3807a0602035646-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-58d446d3807a0602035646-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d446d3807a0602035646-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-58d446d3807a0602035646-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d446d3807a0602035646-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-58d446d3807a0602035646-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d446d3807a0602035646-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-58d446d3807a0602035646-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d446d3807a0602035646-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-58d446d3807a0602035646-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d446d3807a0602035646-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-58d446d3807a0602035646-39\">39</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d446d3807a0602035646-1\"><span class=\"crayon-e\">appdirs</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1.4.0</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d446d3807a0602035646-2\"><span class=\"crayon-v\">backports</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">ssl</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">match</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">hostname</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3.4.0.2</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-58d446d3807a0602035646-3\"><span class=\"crayon-e\">chardet</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2.2.1</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d446d3807a0602035646-4\"><span class=\"crayon-e\">configobj</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">4.7.2</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-58d446d3807a0602035646-5\"><span class=\"crayon-e\">decorator</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3.4.0</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d446d3807a0602035646-6\"><span class=\"crayon-e\">Django</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1.10.4</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-58d446d3807a0602035646-7\"><span class=\"crayon-e\">funcsigs</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1.0.2</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d446d3807a0602035646-8\"><span class=\"crayon-e\">image</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1.5.5</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-58d446d3807a0602035646-9\"><span class=\"crayon-e\">iniparse</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0.4</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d446d3807a0602035646-10\"><span class=\"crayon-e\">kitchen</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1.1.1</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-58d446d3807a0602035646-11\"><span class=\"crayon-e\">langtable</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0.0.31</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d446d3807a0602035646-12\"><span class=\"crayon-e\">mock</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2.0.0</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-58d446d3807a0602035646-13\"><span class=\"crayon-e\">numpy</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1.12.0</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d446d3807a0602035646-14\"><span class=\"crayon-e\">packaging</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">16.8</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-58d446d3807a0602035646-15\"><span class=\"crayon-e\">pbr</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1.10.0</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d446d3807a0602035646-16\"><span class=\"crayon-e\">perf</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0.1</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-58d446d3807a0602035646-17\"><span class=\"crayon-e\">PIL</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1.1.7</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d446d3807a0602035646-18\"><span class=\"crayon-e\">Pillow</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3.4.2</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-58d446d3807a0602035646-19\"><span class=\"crayon-e\">pip</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">9.0.1</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d446d3807a0602035646-20\"><span class=\"crayon-e\">protobuf</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3.2.0</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-58d446d3807a0602035646-21\"><span class=\"crayon-e\">pycurl</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">7.19.0</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d446d3807a0602035646-22\"><span class=\"crayon-e\">pygobject</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3.14.0</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-58d446d3807a0602035646-23\"><span class=\"crayon-e\">pygpgme</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0.3</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d446d3807a0602035646-24\"><span class=\"crayon-e\">pyliblzma</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0.5.3</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-58d446d3807a0602035646-25\"><span class=\"crayon-e\">pyparsing</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2.1.10</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d446d3807a0602035646-26\"><span class=\"crayon-v\">python</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">augeas</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0.5.0</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-58d446d3807a0602035646-27\"><span class=\"crayon-v\">python</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">dmidecode</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3.10.13</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d446d3807a0602035646-28\"><span class=\"crayon-e\">pyudev</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0.15</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-58d446d3807a0602035646-29\"><span class=\"crayon-e\">pyxattr</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0.5.1</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d446d3807a0602035646-30\"><span class=\"crayon-e\">setuptools</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">34.2.0</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-58d446d3807a0602035646-31\"><span class=\"crayon-e\">six</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1.10.0</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d446d3807a0602035646-32\"><span class=\"crayon-e\">slip</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0.4.0</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-58d446d3807a0602035646-33\"><span class=\"crayon-v\">slip</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">dbus</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0.4.0</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d446d3807a0602035646-34\"><span class=\"crayon-e\">tensorflow</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1.0.0</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-58d446d3807a0602035646-35\"><span class=\"crayon-e\">urlgrabber</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3.10</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d446d3807a0602035646-36\"><span class=\"crayon-e\">wheel</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0.29.0</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-58d446d3807a0602035646-37\"><span class=\"crayon-v\">yum</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">langpacks</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0.4.2</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d446d3807a0602035646-38\"><span class=\"crayon-v\">yum</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">metadata</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">parser</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1.1.4</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-58d446d3807a0602035646-39\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0044 seconds] -->\r\n\n</div>\n<p>按照上述提供的来搭建系统，可以规避不少的环境问题。</p>\n<p>搭建环境的过程中，我遇到不少问题。例如：在跑官方的例子时的某个报，AttributeError: ‘module’ object has no attribute ‘gfile’，就是因为安装的TensorFlow的版本比较老，缺少gfile模块导致的。而且，还有各种各样的。</p>\n<p>更详细的安装说明：</p>\n<p><a class=\" external\" href=\"http://link.zhihu.com/?target=https%3A//www.tensorflow.org/install/install_linux\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">https://www.</span><span class=\"visible\">tensorflow.org/install/</span><span class=\"invisible\">install_linux</span><i class=\"icon-external\"></i></a></p>\n<p><b>（3）TensorFlow环境测试运行</b></p>\n<p>测试是否安装成功，可以采用官方的提供的一个短小的例子，demo生成了一些三维数据, 然后用一个平面拟合它们（官网的例子采用的初始化变量的函数是initialize_all_variables，该函数在新版本里已经被废弃了）：</p>\n<div class=\"highlight\">\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d446d3807b5843956478\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n#!/usr/bin/python\r\n#coding=utf-8\r\n \r\nimport tensorflow as tf\r\nimport numpy as np\r\n \r\n# 使用 NumPy 生成假数据(phony data), 总共 100 个点.\r\nx_data = np.float32(np.random.rand(2, 100)) # 随机输入\r\ny_data = np.dot([0.100, 0.200], x_data) + 0.300\r\n \r\n# 构造一个线性模型\r\n# \r\nb = tf.Variable(tf.zeros([1]))\r\nW = tf.Variable(tf.random_uniform([1, 2], -1.0, 1.0))\r\ny = tf.matmul(W, x_data) + b\r\n \r\n# 最小化方差\r\nloss = tf.reduce_mean(tf.square(y - y_data))\r\noptimizer = tf.train.GradientDescentOptimizer(0.5)\r\ntrain = optimizer.minimize(loss)\r\n \r\n# 初始化变量,旧函数（initialize_all_variables）已经被废弃，替换为新函数\r\ninit = tf.global_variables_initializer()\r\n \r\n# 启动图 (graph)\r\nsess = tf.Session()\r\nsess.run(init)\r\n \r\n# 拟合平面\r\nfor step in xrange(0, 201):\r\n    sess.run(train)\r\n    if step % 20 == 0:\r\n        print step, sess.run(W), sess.run(b)\r\n \r\n# 得到最佳拟合结果 W: [[0.100  0.200]], b: [0.300]\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d446d3807b5843956478-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d446d3807b5843956478-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d446d3807b5843956478-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d446d3807b5843956478-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-58d446d3807b5843956478-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d446d3807b5843956478-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-58d446d3807b5843956478-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d446d3807b5843956478-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-58d446d3807b5843956478-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d446d3807b5843956478-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-58d446d3807b5843956478-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d446d3807b5843956478-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-58d446d3807b5843956478-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d446d3807b5843956478-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-58d446d3807b5843956478-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d446d3807b5843956478-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-58d446d3807b5843956478-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d446d3807b5843956478-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-58d446d3807b5843956478-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d446d3807b5843956478-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-58d446d3807b5843956478-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d446d3807b5843956478-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-58d446d3807b5843956478-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d446d3807b5843956478-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-58d446d3807b5843956478-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d446d3807b5843956478-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-58d446d3807b5843956478-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d446d3807b5843956478-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-58d446d3807b5843956478-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d446d3807b5843956478-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-58d446d3807b5843956478-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d446d3807b5843956478-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-58d446d3807b5843956478-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d446d3807b5843956478-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-58d446d3807b5843956478-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d446d3807b5843956478-36\">36</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d446d3807b5843956478-1\"><span class=\"crayon-p\">#!/usr/bin/python</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d446d3807b5843956478-2\"><span class=\"crayon-p\">#coding=utf-8</span></div><div class=\"crayon-line\" id=\"crayon-58d446d3807b5843956478-3\"><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d446d3807b5843956478-4\"><span class=\"crayon-e\">import </span><span class=\"crayon-e\">tensorflow </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">tf</span></div><div class=\"crayon-line\" id=\"crayon-58d446d3807b5843956478-5\"><span class=\"crayon-e\">import </span><span class=\"crayon-e\">numpy </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d446d3807b5843956478-6\"><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-58d446d3807b5843956478-7\"><span class=\"crayon-p\"># 使用 NumPy 生成假数据(phony data), 总共 100 个点.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d446d3807b5843956478-8\"><span class=\"crayon-v\">x_data</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">float32</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">random</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">rand</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\"># 随机输入</span></div><div class=\"crayon-line\" id=\"crayon-58d446d3807b5843956478-9\"><span class=\"crayon-v\">y_data</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">dot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0.100</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.200</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x_data</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.300</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d446d3807b5843956478-10\"><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-58d446d3807b5843956478-11\"><span class=\"crayon-p\"># 构造一个线性模型</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d446d3807b5843956478-12\"><span class=\"crayon-p\"># </span></div><div class=\"crayon-line\" id=\"crayon-58d446d3807b5843956478-13\"><span class=\"crayon-v\">b</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tf</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Variable</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">tf</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">zeros</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d446d3807b5843956478-14\"><span class=\"crayon-v\">W</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tf</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Variable</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">tf</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">random_uniform</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-58d446d3807b5843956478-15\"><span class=\"crayon-v\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tf</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">matmul</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">W</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x_data</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d446d3807b5843956478-16\"><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-58d446d3807b5843956478-17\"><span class=\"crayon-p\"># 最小化方差</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d446d3807b5843956478-18\"><span class=\"crayon-v\">loss</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tf</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">reduce_mean</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">tf</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">square</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y_data</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-58d446d3807b5843956478-19\"><span class=\"crayon-v\">optimizer</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tf</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">train</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">GradientDescentOptimizer</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0.5</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d446d3807b5843956478-20\"><span class=\"crayon-v\">train</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">optimizer</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">minimize</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">loss</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-58d446d3807b5843956478-21\"><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d446d3807b5843956478-22\"><span class=\"crayon-p\"># 初始化变量,旧函数（initialize_all_variables）已经被废弃，替换为新函数</span></div><div class=\"crayon-line\" id=\"crayon-58d446d3807b5843956478-23\"><span class=\"crayon-v\">init</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tf</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">global_variables_initializer</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d446d3807b5843956478-24\"><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-58d446d3807b5843956478-25\"><span class=\"crayon-p\"># 启动图 (graph)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d446d3807b5843956478-26\"><span class=\"crayon-v\">sess</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tf</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Session</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-58d446d3807b5843956478-27\"><span class=\"crayon-v\">sess</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">run</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">init</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d446d3807b5843956478-28\"><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-58d446d3807b5843956478-29\"><span class=\"crayon-p\"># 拟合平面</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d446d3807b5843956478-30\"><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">step </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">xrange</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">201</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-58d446d3807b5843956478-31\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">sess</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">run</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">train</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d446d3807b5843956478-32\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">step</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-58d446d3807b5843956478-33\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">print </span><span class=\"crayon-v\">step</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sess</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">run</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">W</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sess</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">run</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d446d3807b5843956478-34\"><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-58d446d3807b5843956478-35\"><span class=\"crayon-p\"># 得到最佳拟合结果 W: [[0.100  0.200]], b: [0.300]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d446d3807b5843956478-36\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0050 seconds] -->\r\n\n</div>\n<p>运行的结果类似如下：</p>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/mw690/63918611ly1fdmo5gyckgj20cy05kq48.jpg\" width=\"466\" height=\"200\"></p>\n<p>经过200次的训练，模型的参数逐渐逼近最佳拟合的结果（W: [[0.100 0.200]], b: [0.300]），另外，我们也可以从代码的“风格”中，了解到框架样本训练的基本运行方式。虽然，官方的教程后续会涉及越来越多更复杂的例子，但从整体上看，也是类似的模式。</p>\n<p><img class=\"alignnone\" src=\"http://wx3.sinaimg.cn/mw690/63918611ly1fdmo5hiqipj20go01lwer.jpg\" width=\"600\" height=\"57\"></p>\n<p><b>步骤划分：</b></p>\n<ol>\n<li>准备数据：获得有标签的样本数据（带标签的训练数据称为有监督学习）；</li>\n<li>设置模型：先构建好需要使用的训练模型，可供选择的机器学习方法其实也挺多的，换而言之就是一堆数学函数的集合；</li>\n<li>损失函数和优化方式：衡量模型计算结果和真实标签值的差距；</li>\n<li>真实训练运算：训练之前构造好的模型，让程序通过循环训练和学习，获得最终我们需要的结果“参数”；</li>\n<li>验证结果：采用之前模型没有训练过的测试集数据，去验证模型的准确率。</li>\n</ol>\n<p>其中，TensorFlow为了基于python实现高效的数学计算，通常会使用到一些基础的函数库，例如Numpy（采用外部底层语言实现），但是，从外部计算切回到python也是存在开销的，尤其是在几万几十万次的训练过程。因此，Tensorflow不单独地运行单一的函数计算，而是先用图描述一系列可交互的计算操作流程，然后全部一次性提交到外部运行（在其他机器学习的库里，也是类似的实现）。所以，上述流程图中，蓝色部分都只是设置了“计算操作流程”，而绿色部分开始才是真正的提交数据给到底层库进行实际运算，而且，每次训练一般是批量执行一批数据的。</p>\n<h2>四、经典入门demo：识别手写数字（MNIST）</h2>\n<p>常规的编程入门有“Hello world”程序，而深度学习的入门程序则是MNIST，一个识别28*28像素的图片中的手写数字的程序。</p>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/mw690/63918611ly1fdmo5i56mwj208u026jrg.jpg\" width=\"318\" height=\"78\"></p>\n<p>MNIST的数据和官网：</p>\n<p><a class=\" wrap external\" href=\"http://link.zhihu.com/?target=http%3A//yann.lecun.com/exdb/mnist/\" target=\"_blank\" rel=\"nofollow noreferrer\">MNIST handwritten digit database, Yann LeCun, Corinna Cortes and Chris Burges<i class=\"icon-external\"></i></a></p>\n<p>深度学习的内容，其背后会涉及比较多的数学原理，作为一个初学者，受限于我个人的数学和技术水平，也许并不足以准确讲述相关的数学原理，因此，本文会更多的关注“应用层面”，不对背后的数学原理进行展开，感谢谅解。</p>\n<p><b>1. 加载数据</b></p>\n<p>程序执行的第一步当然是加载数据，根据我们之前获得的数据集主要包括两部分：60000的训练数据集（mnist.train）和10000的测试数据集（mnist.test）。里面每一行，是一个28*28=784的数组，数组的本质就是将28*28像素的图片，转化成对应的像素点阵。</p>\n<p>例如手写字1的图片转换出来的对应矩阵表示如下：</p>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/mw690/63918611ly1fdmo5isg95j20go06g0u2.jpg\" width=\"600\" height=\"232\"></p>\n<p>之前我们经常听说，图片方面的深度学习需要大量的计算能力，甚至需要采用昂贵、专业的GPU（Nvidia的GPU），从上述转化的案例我们就已经可以获得一些答案了。一张784像素的图片，对学习模型来说，就有784个特征，而我们实际的相片和图片动辄几十万、百万级别，则对应的基础特征数也是这个数量级，基于这样数量级的数组进行大规模运算，没有强大的计算能力支持，确实寸步难行。当然，这个入门的MNIST的demo还是可以比较快速的跑完。</p>\n<p>Demo中的关键代码（读取并且加载数据到数组对象中，方便后面使用）：</p>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/mw690/63918611ly1fdmo5jf23tj20go02hwfc.jpg\" width=\"600\" height=\"89\"></p>\n<p><b>2. 构建模型</b></p>\n<p>MNIST的每一张图片都表示一个数字，从0到9。而模型最终期望获得的是：给定一张图片，获得代表每个数字的概率。比如说，模型可能推测一张数字9的图片代表数字9的概率是80%但是判断它是8的概率是5%（因为8和9都有上半部分的小圆），然后给予它代表其他数字的概率更小的值。</p>\n<p><img class=\"alignnone\" src=\"http://wx2.sinaimg.cn/mw690/63918611ly1fdmo5n62kcj208g04dwee.jpg\" width=\"304\" height=\"157\"></p>\n<p>MNIST的入门例子，采用的是softmax回归(softmax regression)，softmax模型可以用来给不同的对象分配概率。</p>\n<p>为了得到一张给定图片属于某个特定数字类的证据（evidence），我们对图片的784个特征（点阵里的各个像素值）进行加权求和。如果某个特征（像素值）具有很强的证据说明这张图片不属于该类，那么相应的权重值为负数，相反如果某个特征（像素值）拥有有利的证据支持这张图片属于这个类，那么权重值是正数。类似前面提到的房价估算例子，对每一个像素点作出了一个权重分配。</p>\n<p>假设我们获得一张图片，需要计算它是8的概率，转化成数学公式则如下：</p>\n<p><img class=\"alignnone\" src=\"http://wx3.sinaimg.cn/mw690/63918611ly1fdmo5nsktxj206z01tq2r.jpg\" width=\"251\" height=\"65\"></p>\n<p>公式中的i代表需要预测的数字（8），<img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/mw690/63918611ly1fdmocp2ey1j200r00g0bz.jpg\" width=\"27\" height=\"16\"> 代表预测数字为8的情况下，784个特征的不同权重值，<img class=\"alignnone\" src=\"http://wx2.sinaimg.cn/mw690/63918611ly1fdmocoo9q2j200b00e07k.jpg\" width=\"11\" height=\"14\">代表8的偏置量（bias），X则是该图片784个特征的值。通过上述计算，我们则可以获得证明该图片是8的证据（evidence）的总和，softmax函数可以把这些证据转换成概率 y。（softmax的数学原理，辛苦各位查询相关资料哈）</p>\n<p>将前面的过程概括成一张图（来自官方）则如下：</p>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/mw690/63918611ly1fdmo5oh63xj20go06mgol.jpg\" width=\"600\" height=\"238\"></p>\n<p>不同的特征x和对应不同数字的权重进行相乘和求和，则获得在各个数字的分布概率，取概率最大的值，则认为是我们的图片预测结果。</p>\n<p>将上述过程写成一个等式，则如下：</p>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/mw690/63918611ly1fdmo5p2atyj20go03n0u1.jpg\" width=\"600\" height=\"131\"></p>\n<p>该等式在矩阵乘法里可以非常简单地表示，则等价为：</p>\n<p><img class=\"alignnone\" src=\"http://wx3.sinaimg.cn/mw690/63918611ly1fdmo5pr0omj20go0423zn.jpg\" width=\"600\" height=\"146\"></p>\n<p>不展开里面的具体数值，则可以简化为：</p>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/mw690/63918611ly1fdmo5qm571j205e00xa9v.jpg\" width=\"194\" height=\"33\"></p>\n<p>如果我们对线性代数中矩阵相关内容有适当学习，其实，就会明白矩阵表达在一些问题上，更易于理解。如果对矩阵内容不太记得了，也没有关系，后面我会附加上线性代数的视频。</p>\n<p>虽然前面讲述了这么多，其实关键代码就四行：</p>\n<p><img class=\"alignnone\" src=\"http://wx2.sinaimg.cn/mw690/63918611ly1fdmo5ra17lj20c302h74i.jpg\" width=\"435\" height=\"89\"></p>\n<p>上述代码都是类似变量占位符，先设置好模型计算方式，在真实训练流程中，需要批量读取源数据，不断给它们填充数据，模型计算才会真实跑起来。tf.zeros则表示，先给它们统一赋值为0占位。X数据是从数据文件中读取的，而w、b是在训练过程中不断变化和更新的，y则是基于前面的数据进行计算得到。</p>\n<p><b>3. 损失函数和优化设置</b></p>\n<p>为了训练我们的模型，我们首先需要定义一个指标来衡量这个模型是好还是坏。这个指标称为成本（cost）或损失（loss），然后尽量最小化这个指标。简单的说，就是我们需要最小化loss的值，loss的值越小，则我们的模型越逼近标签的真实结果。</p>\n<p>Demo中使用的损失函数是“交叉熵”（cross-entropy），它的公式如下：</p>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/mw690/63918611ly1fdmo5rvbqvj206301kmwz.jpg\" width=\"219\" height=\"56\"></p>\n<p>y 是我们预测的概率分布, y’ 是实际的分布（我们输入的)，交叉熵是用来衡量我们的预测结果的不准确性。TensorFlow拥有一张描述各个计算单元的图，也就是整个模型的计算流程，它可以自动地使用<a class=\" wrap external\" href=\"http://link.zhihu.com/?target=http%3A//colah.github.io/posts/2015-08-Backprop/\" target=\"_blank\" rel=\"nofollow noreferrer\">反向传播算法(backpropagation algorithm)<i class=\"icon-external\"></i></a>，来确定我们的权重等变量是如何影响我们想要最小化的那个loss值的。然后，TensorFlow会用我们设定好的优化算法来不断修改变量以降低loss值。</p>\n<p>其中，demo采用梯度下降算法（gradient descent algorithm）以0.01的学习速率最小化交叉熵。梯度下降算法是一个简单的学习过程，TensorFlow只需将每个变量一点点地往使loss值不断降低的方向更新。</p>\n<p>对应的关键代码如下：</p>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/mw690/63918611ly1fdmo5simdrj20go01nwfa.jpg\" width=\"600\" height=\"59\"></p>\n<p>备注内容：</p>\n<blockquote><p>交叉熵：<a class=\" wrap external\" href=\"http://link.zhihu.com/?target=http%3A//colah.github.io/posts/2015-09-Visual-Information/\" target=\"_blank\" rel=\"nofollow noreferrer\">Visual Information Theory<i class=\"icon-external\"></i></a></p>\n<p>反向传播：<a class=\" wrap external\" href=\"http://link.zhihu.com/?target=http%3A//colah.github.io/posts/2015-08-Backprop/\" target=\"_blank\" rel=\"nofollow noreferrer\">Calculus on Computational Graphs: Backpropagation<i class=\"icon-external\"></i></a></p></blockquote>\n<p>在代码中会看见one-hot vector的概念和变量名，其实这个是个非常简单的东西，就是设置一个10个元素的数组，其中只有一个是1，其他都是0，以此表示数字的标签结果。</p>\n<p>例如表示数字3的标签值：</p>\n<blockquote><p>[0,0,0,1,0,0,0,0,0,0]</p></blockquote>\n<p><b>4. 训练运算和模型准确度测试</b></p>\n<p>通过前面的实现，我们已经设置好了整个模型的计算“流程图”，它们都成为TensorFlow框架的一部分。于是，我们就可以启动我们的训练程序，下面的代码的含义是，循环训练我们的模型500次，每次批量取50个训练样本。</p>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/mw690/63918611ly1fdmo5t4fplj20e402caa8.jpg\" width=\"508\" height=\"84\"></p>\n<p>其训练过程，其实就是TensorFlow框架的启动训练过程，在这个过程中，python批量地将数据交给底层库进行处理。</p>\n<p>我在官方的demo里追加了两行代码，每隔50次则额外计算一次当前模型的识别准确率。它并非必要的代码，仅仅用于方便观察整个模型的识别准确率逐步变化的过程。</p>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/mw690/63918611ly1fdmo5tqwv4j20go00qwep.jpg\" width=\"600\" height=\"26\"></p>\n<p>当然，里面涉及的accuracy（预测准确率）等变量，需要在前面的地方定义占位：</p>\n<p><img class=\"alignnone\" src=\"http://wx2.sinaimg.cn/mw690/63918611ly1fdmo5udcpsj20go00wwev.jpg\" width=\"600\" height=\"32\"></p>\n<p>当我们训练完毕，则到了验证我们的模型准确率的时候，和前面相同：</p>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/mw690/63918611ly1fdmo5uztigj20go012glx.jpg\" width=\"600\" height=\"38\"></p>\n<p>我的demo跑出来的结果如下（softmax回归的例子运行速度还是比较快的），当前的准确率是0.9252：</p>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/mw690/63918611ly1fdmo5vmj0sj207t05fdg3.jpg\" width=\"281\" height=\"195\"></p>\n<p><b>5. 实时查看参数的数值的方法</b></p>\n<p>刚开始跑官方的demo的时候，我们总想将相关变量的值打印出来看看，是怎样一种格式和状态。从demo的代码中，我们可以看见很多的Tensor变量对象，而实际上这些变量对象都是无法直接输出查看，粗略地理解，有些只是占位符，直接输出的话，会获得类似如下的一个对象：</p>\n<div class=\"highlight\">\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d446d3807c1685714017\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nTensor(\"Equal:0\", shape=(?,), dtype=bool)\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d446d3807c1685714017-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d446d3807c1685714017-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d446d3807c1685714017-1\"><span class=\"crayon-e\">Tensor</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"Equal:0\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">shape</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">?</span><span class=\"crayon-sy\">,</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dtype</span><span class=\"crayon-o\">=</span><span class=\"crayon-t\">bool</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d446d3807c1685714017-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n\n</div>\n<p>既然它是占位符，那么我们就必须喂一些数据给它，它才能将真实内容展示出来。因此，正确的方法是，在打印时通常需要加上当前的输入数据给它。</p>\n<p>例如，查看y的概率数据：</p>\n<div class=\"highlight\">\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d446d3807df043163108\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nprint(sess.run(y, feed_dict={x: batch_xs, y_: batch_ys}))\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d446d3807df043163108-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d446d3807df043163108-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d446d3807df043163108-1\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">sess</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">run</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">feed_dict</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">x</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">batch_xs</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y_</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">batch_ys</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d446d3807df043163108-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n\n</div>\n<p>部分非占位符的变量还可以这样输出来：</p>\n<div class=\"highlight\">\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d446d3807f0123643057\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nprint(W.eval())\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d446d3807f0123643057-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d446d3807f0123643057-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d446d3807f0123643057-1\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">W</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">eval</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d446d3807f0123643057-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n\n</div>\n<p>总的来说，92%的识别准确率是比较令人失望，因此，官方的MNIST其实也有多种模型的不同版本，其中比较适合图片处理的CNN(卷积神经网络)的版本，可以获得99%以上的准确率，当然，它的执行耗时也是比较长的。</p>\n<p>（备注：cnn_mnist.py就是卷积神经网络版本的，后面有附带微云网盘的下载url）</p>\n<p>前馈神经网络（feed-forward neural network）版本的MNIST，可达到97%：</p>\n<p><img class=\"alignnone\" src=\"http://wx2.sinaimg.cn/mw690/63918611ly1fdmo5wfcmzj20go05c0wk.jpg\" width=\"600\" height=\"192\"></p>\n<blockquote><p>分享在微云上的数据和源码：</p>\n<p><a class=\" wrap external\" href=\"http://link.zhihu.com/?target=http%3A//url.cn/44aZOpP\" target=\"_blank\" rel=\"nofollow noreferrer\">微云文件<i class=\"icon-external\"></i></a></p></blockquote>\n<p>（备注：国外网站下载都比较慢，我这份下载相对会快一些，在环境已经搭建完毕的情况下，执行里面的run.py即可）</p>\n<h2>五、和业务场景结合的demo：预测用户是否是超级会员身份</h2>\n<p>根据前面的内容，我们对上述基于softmax只是三层（输入、处理、输出）的神经网络模型已经比较熟悉，那么，这个模型是否可以应用到我们具体的业务场景中，其中的难度大吗？为了验证这一点，我拿了一些现网的数据来做了这个试验。</p>\n<p><b>1. 数据准备</b></p>\n<p><img class=\"alignnone\" src=\"http://wx2.sinaimg.cn/mw690/63918611ly1fdmo5xot1gj20da0hj48f.jpg\" width=\"478\" height=\"631\"></p>\n<p>我将一个现网的电影票活动的用户参与数据，包括点击过哪些按钮、手机平台、IP地址、参与时间等信息抓取了出来。其实这些数据当中是隐含了用户的身份信息的，例如，某些礼包的必须是超级会员身份才能领取，如果这个按钮用户点击领取成功，则可以证明该用户的身份肯定是超级会员身份。当然，我只是将这些不知道相不相关的数据特征直观的整理出来，作为我们的样本数据，然后对应的标签为超级会员身份。</p>\n<p>用于训练的样本数据格式如下：</p>\n<p><img class=\"alignnone\" src=\"http://wx3.sinaimg.cn/mw690/63918611ly1fdmo5yg3zsj20gl028q5k.jpg\" width=\"597\" height=\"80\"></p>\n<p>第一列是QQ号码，只做认知标识的，第二列表示是否超级会员身份，作为训练的标签值，后面的就是IP地址，平台标志位以及参与活动的参与记录（0是未成功参与，1表示成功参与）。则获得一个拥有11个特征的数组（经过一些转化和映射，将特别大的数变小）：</p>\n<div class=\"highlight\">\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d446d3807f5702022858\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[0.9166666666666666, 0.4392156862745098, 0.984313725490196, 0.7411764705882353, 0.2196078431372549, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0]\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d446d3807f5702022858-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d446d3807f5702022858-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d446d3807f5702022858-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0.9166666666666666</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.4392156862745098</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.984313725490196</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.7411764705882353</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.2196078431372549</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d446d3807f5702022858-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n\n</div>\n<p>对应的是否是超级数据格式如下，作为监督学习的标签：</p>\n<blockquote><p>超级会员：[0, 1]</p>\n<p>非超级会员：[1, 0]</p></blockquote>\n<p>这里需要专门解释下，在实际应用中需要做数据转换的原因。一方面，将这些数据做一个映射转化，有助于简化数据模型。另一方面，是为了规避NaN的问题，当数值过大，在一些数学指数和除法的浮点数运算中，有可能得到一个无穷大的数值，或者其他溢出的情形，在Python里会变为NaN类型，这个类型会破坏掉后续全部计算结果，导致计算异常。</p>\n<p>例如下图，就是特征数值过大，在训练过程中，导致中间某些参数累计越来越大，最终导致产生NaN值，后续的计算结果全部被破坏掉：</p>\n<p><img class=\"alignnone\" src=\"http://wx2.sinaimg.cn/mw690/63918611ly1fdmo5zd72jj20go0kitf0.jpg\" width=\"600\" height=\"738\"></p>\n<p>而导致NaN的原因在复杂的数学计算里，会产生无穷大或者无穷小。例如，在我们的这个demo中，产生NaN的原因，主要是因为softmax的计算导致。</p>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/mw690/63918611ly1fdmo600ditj206r01udfp.jpg\" width=\"243\" height=\"66\"></p>\n<div class=\"highlight\">\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d446d3807f9350254159\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nRuntimeWarning: divide by zero encountered in log\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d446d3807f9350254159-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d446d3807f9350254159-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d446d3807f9350254159-1\"><span class=\"crayon-v\">RuntimeWarning</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">divide </span><span class=\"crayon-e\">by </span><span class=\"crayon-e\">zero </span><span class=\"crayon-e\">encountered </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">log</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d446d3807f9350254159-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n\n</div>\n<p>刚开始做实际的业务应用，就发现经常跑出极奇怪异的结果（遇到NaN问题，我发现程序也能继续走下去），几经排查才发现是NAN值问题，是非常令人沮丧的。当然，经过仔细分析问题，发现也并非没有排查的方式。因为，NaN值是个奇特的类型，可以采用下述编码方式NaN != NaN来检测自己的训练过程中，是否出现的NaN。</p>\n<p>关键程序代码如下：</p>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/mw690/63918611ly1fdmo60nlh1j20f504xwf6.jpg\" width=\"545\" height=\"177\"></p>\n<p>我采用上述方法，非常顺利地找到自己的深度学习程序，在学习到哪一批数据时产生的NaN。因此，很多原始数据我们都会做一个除以某个值，让数值变小的操作。例如官方的MNIST也是这样做的，将256的像素颜色的数值统一除以255，让它们都变成一个小于1的浮点数。</p>\n<p>MNIST在处理原始图片像素特征数据时，也对特征数据进行了变小处理：</p>\n<p><img class=\"alignnone\" src=\"http://wx2.sinaimg.cn/mw690/63918611ly1fdmo61avbcj20go040ta3.jpg\" width=\"600\" height=\"144\"></p>\n<p>处理NaN问题更专业的方法，就是对输入数据进行归一化处理（min-max标准化或Z-score标准化方法），将值控制在一个可控的范围内。NaN值问题曾一度深深地困扰着我，特别放到这里，避免入门的同学踩坑。</p>\n<p><b>2. 执行结果</b></p>\n<p>我准备的训练集（6700）和测试集（1000）数据并不多，不过，超级会员身份的预测准确率最终可以达到87%。虽然，预测准确率是不高，这个可能和我的训练集数据比较少有关系，不过，整个模型也没有花费多少时间，从整理数据、编码、训练到最终跑出结果，只用了2个晚上的时间。</p>\n<p><img class=\"alignnone\" src=\"http://wx2.sinaimg.cn/mw690/63918611ly1fdmo61wafzj205s04g74a.jpg\" width=\"208\" height=\"160\"></p>\n<p>下图是两个实际的测试例子，例如，该模型预测第一个QQ用户有82%的概率是非超级会员用户，17.9%的概率为超级会员用户（该预测是准确的）。</p>\n<p><img class=\"alignnone\" src=\"http://wx2.sinaimg.cn/mw690/63918611ly1fdmo62j93bj209d047jrv.jpg\" width=\"337\" height=\"151\"></p>\n<p>通过上面的这个例子，我们会发觉其实对于某些比较简单的场景下应用，我们是可以比较容易就实现的。</p>\n<h2>六、其他模型</h2>\n<p><b>1. CIFAR-10识别图片分类的demo（官方）</b></p>\n<p>CIFAR-10数据集的分类是机器学习中一个公开的基准测试问题，它任务是对一组32x32RGB的图像进行分类，这些图像涵盖了10个类别：飞机， 汽车， 鸟， 猫， 鹿， 狗， 青蛙， 马， 船和卡车。</p>\n<p>这也是官方的重要demo之一。</p>\n<p><img class=\"alignnone\" src=\"http://wx3.sinaimg.cn/mw690/63918611ly1fdmo63jnh4j20db0abn46.jpg\" width=\"479\" height=\"371\"></p>\n<p>更详细的介绍内容：</p>\n<blockquote><p><a class=\" wrap external\" href=\"http://link.zhihu.com/?target=http%3A//www.cs.toronto.edu/%7Ekriz/cifar.html\" target=\"_blank\" rel=\"nofollow noreferrer\">CIFAR-10 and CIFAR-100 datasets<i class=\"icon-external\"></i></a></p>\n<p><a class=\" wrap external\" href=\"http://link.zhihu.com/?target=http%3A//tensorfly.cn/tfdoc/tutorials/deep_cnn.html\" target=\"_blank\" rel=\"nofollow noreferrer\">TensorFlow 官方文档中文版<i class=\"icon-external\"></i></a></p></blockquote>\n<p>该例子执行的过程比较长，需要耐心等待。</p>\n<p>我在机器上的执行过程和结果：</p>\n<p>cifar10_train.py用于训练：</p>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/mw690/63918611ly1fdmo64e2suj20go04fwju.jpg\" width=\"600\" height=\"159\"></p>\n<p>cifar10_eval.py用于检验结果：</p>\n<p><img class=\"alignnone\" src=\"http://wx2.sinaimg.cn/mw690/63918611ly1fdmo64t78oj20go01t753.jpg\" width=\"600\" height=\"65\"></p>\n<p>识别率不高是因为该官方模型的识别率本来就不高：</p>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/mw690/63918611ly1fdmo6596hbj20go04d0uq.jpg\" width=\"600\" height=\"157\"></p>\n<p>另外，官方的例子我首次在1月5日跑的时候，还是有一些小问题的，无法跑起来（最新的官方可能已经修正），建议可以直接使用我放到微云上的版本（代码里面的log和读取文件的路径，需要调整一下）。</p>\n<blockquote><p>源码下载：<a class=\" wrap external\" href=\"http://link.zhihu.com/?target=http%3A//url.cn/44mRzBh\" target=\"_blank\" rel=\"nofollow noreferrer\">微云文件<i class=\"icon-external\"></i></a></p></blockquote>\n<p>微云盘里，不含训练集和测试集的图片数据，但是，程序如果检测到这些图片不存在，会自行下载：</p>\n<p><img class=\"alignnone\" src=\"http://wx2.sinaimg.cn/mw690/63918611ly1fdmo65vmamj20go06itce.jpg\" width=\"600\" height=\"234\"></p>\n<p><b>2. 是否大于5岁的测试demo</b></p>\n<p>为了检验softma回归模型是否能够学习到一些我自己设定好的规则，我做了一个小demo来测试。我通过随机数生成的方式构造了一系列的数据，让前面的softmax回归模型去学习，最终看看模型能否通过训练集的学习，最终100%预测这个样本数据是否大于5岁。</p>\n<p>模型和数据本身都比较简单，构造的数据的方式：</p>\n<p>我随机构造一个只有2个特征纬度的样本数据，[year, 1]，其中year随机取值0-10，数字1是放进去作为干扰。</p>\n<blockquote><p>如果year大于5岁，则标签设置为：[0, 0, 1]；</p>\n<p>否则，标签设置为：[0, 1, 0]。</p></blockquote>\n<p>生成了6000条假训练集去训练该模型，最终它能做到100%成功预测准确：</p>\n<p><img class=\"alignnone\" src=\"http://wx2.sinaimg.cn/mw690/63918611ly1fdmo66a7coj206004z3yg.jpg\" width=\"216\" height=\"179\"></p>\n<blockquote><p>微云下载（源码下载）：</p>\n<p><a class=\" wrap external\" href=\"http://link.zhihu.com/?target=http%3A//url.cn/44mKFNK\" target=\"_blank\" rel=\"nofollow noreferrer\">微云文件<i class=\"icon-external\"></i></a></p></blockquote>\n<p><b>3. 基于RNN的古诗学习</b></p>\n<p>最开头的AI写古诗，非常令人感到惊艳，那个demo是美国的一个研究者做出来的，能够根据主题生成不能的古诗，而且古诗的质量还比较高。于是，我也尝试在自己的机器上也跑一个能够写古诗的模型，后来我找到的是一个基于RNN的模型。RNN<a class=\" wrap external\" href=\"http://link.zhihu.com/?target=http%3A//www.baidu.com/link%3Furl%3Dtjmz3SR7imiWMlb9EVZY60Dq_CgrnDRgKHwJnnxhKri24Azf8G6des-foshAxZ04rfZt-dl4_M0v8q6zyScj1BVixC4XZIjOkSZtfgL7I1y\" target=\"_blank\" rel=\"nofollow noreferrer\">循环神经网络(Recurrent Neural Networks)<i class=\"icon-external\"></i></a>，是非常常用的深度学习模型之一。我基于一个外部的demo，进行一些调整后跑起一个能够学习古诗和写古诗的比较简单的程序。</p>\n<p>我的程序默认配置是读取三万首诗（做了一些过滤，将格式有误的或者非五言、七言的过滤掉），执行写诗（让它写了十首）：</p>\n<blockquote><p>画枕江天月似霜，竹房春雪夜中春。今人已向陵边寺，夜客闲行入画舟。云上古来烟雪晚，月寒溪水夜无穷。何因便是鲈根侣，又是离觞酒到年。<br>\n酒渴清秋未可还，年华偏见酒壶钱。无因不自全为叟，自觉平阳似我同。<br>\n棋中春草下春城，更被霜衣独入门。若教未开应要老，无妨归梦不离身。青苔白首无山药，落雪飞来夜夜长。何时未过无惆怅，满溪红土绿荷寒。<br>\n不辞宫树与仙郎，曾与青春得断魂。为向前溪犹绕药，可因心苦雪时春。不须爱尽春来老，自有文师说了何。不必便从归上信，也为言在此花来。<br>\n初时一点锦莲红，曾对仙舆在上河。万卷有时人未见，五金终处更难过。山横海渚人来起，天柳萧森旧殿寒。唯见长州知己所，更从平地作风光。<br>\n去事相来别恨情，年边未是我家贫。花声未觉春多病，白雪无多到日寒。三亩有愁多不定，数千终去故心忙。莫将何用知兄用，犹待青林又不迷。<br>\n子有心才非病拙，一杯曾有白流愁。三朝独到南山晚，白鹤争生未见山。多在玉壶人爱静，只能安稳更堪怜。只惭旧笔同才力，犹恐长心是主机。<br>\n尘末高台入碧霄，故王门户尽知无。黄华只拟相依锁，三落青花亦有时。不见一家相似恨，白衣无限梦长安。<br>\n莫惜花声酒醒杯，未央山冷一枝香。花垂未入东窗晓，雨冷山寒白鹤飞。长是玉山心寂漫，何曾便在旧楼间。时闻此夕来还坐，笑作青苔寄旧游。<br>\n夹江城暖望潾山，山水清深独倚楼。白云半向三山客，万顷东楼日满林。白日夜声多远浪，绿花犹向梦来迟。明年不觉长相见，欲别寒泉又夜流。</p></blockquote>\n<p> </p>\n<p>另外，我抽取其中一些个人认为写得比较好的诗句（以前跑出来的，不在上图中）：</p>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/mw690/63918611ly1fdmo66r91pj20go03odh6.jpg\" width=\"600\" height=\"132\"></p>\n<p>该模型比较简单，写诗的水平不如最前面我介绍的美国研究者demo，但是，所采用的基本方法应该是类似的，只是他做的更为复杂。</p>\n<p>另外，这是一个通用模型，可以学习不同的内容（古诗、现代诗、宋词或者英文诗等），就可以生成对应的结果。</p>\n<h2>七、深度学习的入门学习体会</h2>\n<p>1. 人工智能和深度学习技术并不神秘，更像是一个新型的工具，通过喂数据给它，然后，它能发现这些数据背后的规律，并为我们所用。</p>\n<p>2. 数学基础比较重要，这样有助于理解模型背后的数学原理，不过，从纯应用角度来说，并不一定需要完全掌握数学，也可以提前开始做一些尝试和学习。</p>\n<p>3. 我深深地感到计算资源非常缺乏，每次调整程序的参数或训练数据后，跑完一次训练集经常要很多个小时，部分场景不跑多一些训练集数据，看不出差别，例如写诗的案例。个人感觉，这个是制约AI发展的重要问题，它直接让程序的“调试”效率非常低下。</p>\n<p>4. 中文文档比较少，英文文档也不多，开源社区一直在快速更新，文档的内容过时也比较快。因此，入门学习时遇到的问题会比较多，并且缺乏成型的文档。</p>\n<h2>八、小结</h2>\n<p>我们不知道人工智能的时代是否真的会来临，也不知道它将要走向何方，但是，毫无疑问，它是一种全新的技术思维模式。更好的探索和学习这种新技术，然后在业务应用场景寻求结合点，最终达到帮助我们的业务获得更好的成果，一直以来，就是我们工程师的不懈追求。另一方面，对发展有重大推动作用的新技术，通常会快速的发展并且走向普及，就如同我们的编程一样，因此，人人都可以做深度学习应用，并非只是一句噱头。</p>\n<p>参考文档：</p>\n<blockquote><p><a class=\" wrap external\" href=\"http://link.zhihu.com/?target=http%3A//www.tensorfly.cn/\" target=\"_blank\" rel=\"nofollow noreferrer\">TensorFlow中文社区-首页<i class=\"icon-external\"></i></a></p>\n<p><a class=\" external\" href=\"http://link.zhihu.com/?target=https%3A//www.tensorflow.org/\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">https://www.</span><span class=\"visible\">tensorflow.org/</span><i class=\"icon-external\"></i></a></p></blockquote>\n<p>部分数学相关的内容：</p>\n<blockquote><p>高中和大学数学部分内容</p>\n<p><a class=\" wrap external\" href=\"http://link.zhihu.com/?target=http%3A//url.cn/44r6LAQ\" target=\"_blank\" rel=\"nofollow noreferrer\">微云文件<i class=\"icon-external\"></i></a></p>\n<p>线性代数视频：</p>\n<p><a class=\" wrap external\" href=\"http://link.zhihu.com/?target=http%3A//open.163.com/special/opencourse/daishu.html\" target=\"_blank\" rel=\"nofollow noreferrer\">麻省理工公开课：线性代数_全35集_网易公开课</a></p></blockquote>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"110557\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"110557votetotal\">4</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"110557\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 19 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 2 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/xhb7636553\">徐汉彬</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/xhb7636553\">\r\n\t\t\t<img src=\"http://www.jobbole.com/wp-content/uploads/2015/09/3467c144276101922ea37a5e698e0f17.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            现任腾讯高级工程师（T3-2），QQ会员体系合作线技术团队负责人，负责生活特权和AMS平台（高峰期CGI日请求12亿），曾就职于阿里巴巴、小满科技。        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/xhb7636553\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/xhb7636553/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/xhb7636553/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 52</a> · <a title=\"我的网站\" target=\"_blank\" href=\"http://hansionxu.blog.163.com/\"><i class=\"fa fa-link\"></i></a> <a title=\"微博主页\" target=\"_blank\" href=\"http://www.weibo.com/xhb7636553\"><i class=\"fa fa-weibo\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "开发,TensorFlow,人工智能,入门", "url": "http://blog.jobbole.com/110557/", "title": "人人都可以做深度学习应用：入门篇", "front_image_path": "full/8cb99be85d24e82ca79e5bd05a9417a6cef00061.jpg", "comment_nums": 2, "create_time": "2017/03/14", "url_object_id": "a43791db6d2bc2a6398335f493e35003", "praise_nums": "4"},
{"front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/11/53e6c01fcfa83e2f98724bf99795ee4b.png"], "fav_nums": 2, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"><p><script src=\"http://www.imooc.com/open/courselistrandjs\"></script><span style=\"display:block;margin-bottom:10px;\"></span></p>\n</div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.linqpad.net/WhyLINQBeatsSQL.aspx\">linqpad</a>   译文出处：<a target=\"_blank\" href=\"https://www.oschina.net/translate/why-linq-beats-sql\">oschina</a>   </div><p>如果你还没有沉溺于 LINQ，就会想这有啥大惊小怪的。SQL 并没有坏掉，为什么还要对它进行修补呢? 为什么我们还需要另外一种查询语言呢?</p>\n<p>流行的说法是 LINQ 同 C#（或者 VB）集成在了一起，故而消除了编程语言和数据库之间配合上的鸿沟，同时为多个数据源的组合提供了单一的查询接口。虽然这些都是事实，但仅是故事的一部分。更重要的是：当要对数据库进行查询的时候，LINQ 在大多数情况下都比 SQL 更加有效。</p>\n<p>同 SQL 相比， LINQ 更简单、整洁而且高级。这样子更像是拿 C# 同 C++ 做比较。真的，尽管有时候使用 C++ 仍然是最好的选择（比如使用 SQL 的场景），但在大多数场景中，使用现代整洁的语言而不必为底层细节操作就是一项大胜利。</p>\n<p>SQL 是一门非常古老的语言—发明于 1974 年。虽然经历过了无数此扩展，但从来没有被重新设计过。这就使得它有点混乱了—不像是 VB6 或者 Visual FoxPro。你也许已经慢慢变得习惯于此因而看不到任何错漏的地方!</p>\n<p>让我们来看一个例子。你想要编写一个简单的查询来获取客户数据，如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d43a8a54049242823313\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSELECT UPPER(Name)\r\nFROM Customer\r\nWHERE Name LIKE 'A%'\r\nORDER BY Name</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d43a8a54049242823313-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a54049242823313-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d43a8a54049242823313-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a54049242823313-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d43a8a54049242823313-1\"><span class=\"crayon-i\">SELECT</span> <span class=\"crayon-e\">UPPER</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">Name</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a54049242823313-2\"><span class=\"crayon-i\">FROM</span> <span class=\"crayon-e\">Customer</span></div><div class=\"crayon-line\" id=\"crayon-58d43a8a54049242823313-3\"><span class=\"crayon-i\">WHERE</span> <span class=\"crayon-i\">Name</span> <span class=\"crayon-i\">LIKE</span> <span class=\"crayon-s\">'A%'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a54049242823313-4\"><span class=\"crayon-i\">ORDER</span> <span class=\"crayon-i\">BY</span> <span class=\"crayon-v\">Name</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>现在假设要将结果集里的这些数据提供给一个网页，并且我们想获取第 21 到 30 行数据。所以我们需要一个子查询：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d43a8a54054161324542\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSELECT UPPER(Name) FROM\r\n(\r\n   SELECT *, RN = row_number()\r\n   OVER (ORDER BY Name)\r\n   FROM Customer\r\n   WHERE Name LIKE 'A%'\r\n) A\r\nWHERE RN BETWEEN 21 AND 30\r\nORDER BY Name</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d43a8a54054161324542-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a54054161324542-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d43a8a54054161324542-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a54054161324542-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-58d43a8a54054161324542-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a54054161324542-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-58d43a8a54054161324542-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a54054161324542-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-58d43a8a54054161324542-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d43a8a54054161324542-1\"><span class=\"crayon-i\">SELECT</span> <span class=\"crayon-e\">UPPER</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">Name</span><span class=\"crayon-sy\">)</span> <span class=\"crayon-e\">FROM</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a54054161324542-2\"><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line\" id=\"crayon-58d43a8a54054161324542-3\">   <span class=\"crayon-i\">SELECT</span> <span class=\"crayon-o\">*</span><span class=\"crayon-sy\">,</span> <span class=\"crayon-i\">RN</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-e\">row_number</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a54054161324542-4\">   <span class=\"crayon-i\">OVER</span> <span class=\"crayon-sy\">(</span><span class=\"crayon-i\">ORDER</span> <span class=\"crayon-i\">BY</span> <span class=\"crayon-v\">Name</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-58d43a8a54054161324542-5\">   <span class=\"crayon-i\">FROM</span> <span class=\"crayon-i\">Customer</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a54054161324542-6\">   <span class=\"crayon-i\">WHERE</span> <span class=\"crayon-i\">Name</span> <span class=\"crayon-i\">LIKE</span> <span class=\"crayon-s\">'A%'</span></div><div class=\"crayon-line\" id=\"crayon-58d43a8a54054161324542-7\"><span class=\"crayon-sy\">)</span> <span class=\"crayon-i\">A</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a54054161324542-8\"><span class=\"crayon-i\">WHERE</span> <span class=\"crayon-i\">RN</span> <span class=\"crayon-i\">BETWEEN</span> <span class=\"crayon-cn\">21</span> <span class=\"crayon-st\">AND</span> <span class=\"crayon-cn\">30</span></div><div class=\"crayon-line\" id=\"crayon-58d43a8a54054161324542-9\"><span class=\"crayon-i\">ORDER</span> <span class=\"crayon-i\">BY</span> <span class=\"crayon-v\">Name</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p>而如果你需要支持版本（在 SQL Server 2005 之前的）更老的数据库，情况会更糟糕:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d43a8a54057459718465\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSELECT TOP 10 UPPER (c1.Name)\r\nFROM Customer c1\r\nWHERE\r\n   c1.Name LIKE 'A%'\r\n   AND c1.ID NOT IN\r\n   (\r\n      SELECT TOP 20 c2.ID\r\n      FROM Customer c2\r\n      WHERE c2.Name LIKE 'A%'\r\n      ORDER BY c2.Name\r\n   ) \r\nORDER BY c1.Name</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d43a8a54057459718465-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a54057459718465-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d43a8a54057459718465-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a54057459718465-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-58d43a8a54057459718465-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a54057459718465-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-58d43a8a54057459718465-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a54057459718465-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-58d43a8a54057459718465-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a54057459718465-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-58d43a8a54057459718465-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a54057459718465-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d43a8a54057459718465-1\"><span class=\"crayon-i\">SELECT</span> <span class=\"crayon-i\">TOP</span> <span class=\"crayon-cn\">10</span> <span class=\"crayon-i\">UPPER</span> <span class=\"crayon-sy\">(</span><span class=\"crayon-v\">c1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Name</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a54057459718465-2\"><span class=\"crayon-i\">FROM</span> <span class=\"crayon-i\">Customer</span> <span class=\"crayon-e\">c1</span></div><div class=\"crayon-line\" id=\"crayon-58d43a8a54057459718465-3\"><span class=\"crayon-i\">WHERE</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a54057459718465-4\">   <span class=\"crayon-v\">c1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">Name</span> <span class=\"crayon-i\">LIKE</span> <span class=\"crayon-s\">'A%'</span></div><div class=\"crayon-line\" id=\"crayon-58d43a8a54057459718465-5\">   <span class=\"crayon-st\">AND</span> <span class=\"crayon-v\">c1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">ID</span> <span class=\"crayon-st\">NOT</span> <span class=\"crayon-st\">IN</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a54057459718465-6\">   <span class=\"crayon-sy\">(</span></div><div class=\"crayon-line\" id=\"crayon-58d43a8a54057459718465-7\">      <span class=\"crayon-i\">SELECT</span> <span class=\"crayon-i\">TOP</span> <span class=\"crayon-cn\">20</span> <span class=\"crayon-v\">c2</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">ID</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a54057459718465-8\">      <span class=\"crayon-i\">FROM</span> <span class=\"crayon-i\">Customer</span> <span class=\"crayon-i\">c2</span></div><div class=\"crayon-line\" id=\"crayon-58d43a8a54057459718465-9\">      <span class=\"crayon-i\">WHERE</span> <span class=\"crayon-v\">c2</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">Name</span> <span class=\"crayon-i\">LIKE</span> <span class=\"crayon-s\">'A%'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a54057459718465-10\">      <span class=\"crayon-i\">ORDER</span> <span class=\"crayon-i\">BY</span> <span class=\"crayon-v\">c2</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">Name</span></div><div class=\"crayon-line\" id=\"crayon-58d43a8a54057459718465-11\">   <span class=\"crayon-sy\">)</span> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a54057459718465-12\"><span class=\"crayon-i\">ORDER</span> <span class=\"crayon-i\">BY</span> <span class=\"crayon-v\">c1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Name</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n<p>这样做不仅复杂而混乱，而且也违背了 DRY 原则。如下是使用 LINQ 实现相同的查询功能。显然在简单性上更胜一筹：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d43a8a54066819260013\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nvar query =\r\n   from c in db.Customers\r\n   where c.Name.StartsWith (\"A\")\r\n   orderby c.Name\r\n   select c.Name.ToUpper();\r\n\r\nvar thirdPage = query.Skip(20).Take(10);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d43a8a54066819260013-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a54066819260013-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d43a8a54066819260013-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a54066819260013-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-58d43a8a54066819260013-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a54066819260013-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-58d43a8a54066819260013-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d43a8a54066819260013-1\"><span class=\"crayon-t\">var</span> <span class=\"crayon-i\">query</span> <span class=\"crayon-o\">=</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a54066819260013-2\">   <span class=\"crayon-i\">from</span> <span class=\"crayon-i\">c</span> <span class=\"crayon-st\">in</span> <span class=\"crayon-v\">db</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">Customers</span></div><div class=\"crayon-line\" id=\"crayon-58d43a8a54066819260013-3\">   <span class=\"crayon-i\">where</span> <span class=\"crayon-v\">c</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Name</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">StartsWith</span> <span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"A\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a54066819260013-4\">   <span class=\"crayon-i\">orderby</span> <span class=\"crayon-v\">c</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">Name</span></div><div class=\"crayon-line\" id=\"crayon-58d43a8a54066819260013-5\">   <span class=\"crayon-i\">select</span> <span class=\"crayon-v\">c</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Name</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">ToUpper</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a54066819260013-6\"> </div><div class=\"crayon-line\" id=\"crayon-58d43a8a54066819260013-7\"><span class=\"crayon-t\">var</span> <span class=\"crayon-i\">thirdPage</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-v\">query</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Skip</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">20</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Take</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>只有当我们枚举到 thirdPage 时，查询才会实际执行。在从 LINQ 到 SQL 或者 Entity Framework 的场景中，翻译引擎会将（我们用两个步骤组合而成的）查询转换成一个 SQL 语句，这个语句是针对其所连接的数据库服务器进行了优化的。</p>\n<h3>可组合性</h3>\n<p>您可能已经注意到 LINQ 的另一个更微妙（微妙但意义重大）的好处。我们选择了组合中的两个查询步骤：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d43a8a5406b943671572\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nIQueryable Paginate (this IQueryable query, int skip, int take)\r\n{\r\n   return query.Skip(skip).Take(take);\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d43a8a5406b943671572-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a5406b943671572-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d43a8a5406b943671572-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a5406b943671572-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d43a8a5406b943671572-1\"><span class=\"crayon-i\">IQueryable</span> <span class=\"crayon-i\">Paginate</span> <span class=\"crayon-sy\">(</span><span class=\"crayon-r\">this</span> <span class=\"crayon-i\">IQueryable</span> <span class=\"crayon-v\">query</span><span class=\"crayon-sy\">,</span> <span class=\"crayon-t\">int</span> <span class=\"crayon-v\">skip</span><span class=\"crayon-sy\">,</span> <span class=\"crayon-t\">int</span> <span class=\"crayon-v\">take</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a5406b943671572-2\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-58d43a8a5406b943671572-3\">   <span class=\"crayon-st\">return</span> <span class=\"crayon-v\">query</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Skip</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">skip</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Take</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">take</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a5406b943671572-4\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>我们可以这样做：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d43a8a5406f709792208\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nvar query = ...\r\nvar thirdPage = query.Paginate (20, 10);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d43a8a5406f709792208-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a5406f709792208-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d43a8a5406f709792208-1\"><span class=\"crayon-t\">var</span> <span class=\"crayon-i\">query</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a5406f709792208-2\"><span class=\"crayon-t\">var</span> <span class=\"crayon-i\">thirdPage</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-v\">query</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">Paginate</span> <span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">20</span><span class=\"crayon-sy\">,</span> <span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>更重要的是，在这里我们可以进行任意的分页查询。换言之就是通过 LINQ 你可以把查询分解成一部分，然后在你的应用程序中重用。</p>\n<h3>联合</h3>\n<p>LINQ 另一好处就是你可以不用 JOIN 就能进行关系间查询。例如，我们想要列出所有购物在 $1000 或者以上，并且居住在华盛顿的顾客。我们会假定让购买项目化（也就是经典的采购/项目采购场景）并且把（没有顾客记录的）现金销售也囊括进来。这就需要在四个表（Purchase, Customer, Address 以及 PurchaseItem）之间进行查询。使用 LINQ，这样的查询不费吹灰之力：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d43a8a54072440994595\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfrom p in db.Purchases\r\nwhere p.Customer.Address.State == \"WA\" || p.Customer == null\r\nwhere p.PurchaseItems.Sum (pi =&gt; pi.SaleAmount) &gt; 1000\r\nselect p</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d43a8a54072440994595-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a54072440994595-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d43a8a54072440994595-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a54072440994595-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d43a8a54072440994595-1\"><span class=\"crayon-i\">from</span> <span class=\"crayon-i\">p</span> <span class=\"crayon-st\">in</span> <span class=\"crayon-v\">db</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Purchases</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a54072440994595-2\"><span class=\"crayon-i\">where</span> <span class=\"crayon-v\">p</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Customer</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Address</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">State</span> <span class=\"crayon-o\">==</span> <span class=\"crayon-s\">\"WA\"</span> <span class=\"crayon-o\">||</span> <span class=\"crayon-v\">p</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">Customer</span> <span class=\"crayon-o\">==</span> <span class=\"crayon-t\">null</span></div><div class=\"crayon-line\" id=\"crayon-58d43a8a54072440994595-3\"><span class=\"crayon-i\">where</span> <span class=\"crayon-v\">p</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">PurchaseItems</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">Sum</span> <span class=\"crayon-sy\">(</span><span class=\"crayon-i\">pi</span> <span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span> <span class=\"crayon-v\">pi</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">SaleAmount</span><span class=\"crayon-sy\">)</span> <span class=\"crayon-o\">&gt;</span> <span class=\"crayon-cn\">1000</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a54072440994595-4\"><span class=\"crayon-i\">select</span> <span class=\"crayon-v\">p</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>将此与同等功能的 SQL 相比较：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d43a8a54075997956986\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSELECT p.*\r\nFROM Purchase p\r\n    LEFT OUTER JOIN \r\n        Customer c INNER JOIN Address a ON c.AddressID = a.ID\r\n    ON p.CustomerID = c.ID\t\r\nWHERE\r\n   (a.State = 'WA' || p.CustomerID IS NULL)\r\n    AND p.ID in\r\n    (\r\n        SELECT PurchaseID FROM PurchaseItem\r\n        GROUP BY PurchaseID HAVING SUM (SaleAmount) &gt; 1000\r\n    )</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d43a8a54075997956986-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a54075997956986-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d43a8a54075997956986-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a54075997956986-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-58d43a8a54075997956986-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a54075997956986-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-58d43a8a54075997956986-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a54075997956986-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-58d43a8a54075997956986-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a54075997956986-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-58d43a8a54075997956986-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a54075997956986-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d43a8a54075997956986-1\"><span class=\"crayon-i\">SELECT</span> <span class=\"crayon-v\">p</span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">*</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a54075997956986-2\"><span class=\"crayon-i\">FROM</span> <span class=\"crayon-i\">Purchase</span> <span class=\"crayon-i\">p</span></div><div class=\"crayon-line\" id=\"crayon-58d43a8a54075997956986-3\">    <span class=\"crayon-i\">LEFT</span> <span class=\"crayon-i\">OUTER</span> <span class=\"crayon-i\">JOIN</span> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a54075997956986-4\">        <span class=\"crayon-i\">Customer</span> <span class=\"crayon-i\">c</span> <span class=\"crayon-i\">INNER</span> <span class=\"crayon-i\">JOIN</span> <span class=\"crayon-i\">Address</span> <span class=\"crayon-i\">a</span> <span class=\"crayon-i\">ON</span> <span class=\"crayon-v\">c</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">AddressID</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-v\">a</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">ID</span></div><div class=\"crayon-line\" id=\"crayon-58d43a8a54075997956986-5\">    <span class=\"crayon-i\">ON</span> <span class=\"crayon-v\">p</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">CustomerID</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-v\">c</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">ID\t</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a54075997956986-6\"><span class=\"crayon-i\">WHERE</span></div><div class=\"crayon-line\" id=\"crayon-58d43a8a54075997956986-7\">   <span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">State</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-s\">'WA'</span> <span class=\"crayon-o\">||</span> <span class=\"crayon-v\">p</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">CustomerID</span> <span class=\"crayon-st\">IS</span> <span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a54075997956986-8\">    <span class=\"crayon-st\">AND</span> <span class=\"crayon-v\">p</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">ID</span> <span class=\"crayon-st\">in</span></div><div class=\"crayon-line\" id=\"crayon-58d43a8a54075997956986-9\">    <span class=\"crayon-sy\">(</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a54075997956986-10\">        <span class=\"crayon-i\">SELECT</span> <span class=\"crayon-i\">PurchaseID</span> <span class=\"crayon-i\">FROM</span> <span class=\"crayon-i\">PurchaseItem</span></div><div class=\"crayon-line\" id=\"crayon-58d43a8a54075997956986-11\">        <span class=\"crayon-i\">GROUP</span> <span class=\"crayon-i\">BY</span> <span class=\"crayon-i\">PurchaseID</span> <span class=\"crayon-i\">HAVING</span> <span class=\"crayon-i\">SUM</span> <span class=\"crayon-sy\">(</span><span class=\"crayon-v\">SaleAmount</span><span class=\"crayon-sy\">)</span> <span class=\"crayon-o\">&gt;</span> <span class=\"crayon-cn\">1000</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a54075997956986-12\">    <span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0019 seconds] -->\r\n<p>对此例进一步扩展，假设我们想要将结果集按价格进行逆序排列，并在最终的投影中显示销售员的姓名以及所购买项目的数量。我们可以自然不重复地表达出这些附件的查询条件：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d43a8a54078952953630\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfrom p in db.Purchases\r\nwhere p.Customer.Address.State == \"WA\" || p.Customer == null\r\nlet purchaseValue = p.PurchaseItems.Sum (pi =&gt; pi.SaleAmount)\r\nwhere purchaseValue &gt; 1000\r\norderby purchaseValue descending\r\nselect new\r\n{\r\n   p.Description,\r\n   p.Customer.SalesPerson.Name,\r\n   PurchaseItemCount = p.PurchaseItems.Count()\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d43a8a54078952953630-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a54078952953630-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d43a8a54078952953630-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a54078952953630-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-58d43a8a54078952953630-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a54078952953630-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-58d43a8a54078952953630-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a54078952953630-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-58d43a8a54078952953630-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a54078952953630-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-58d43a8a54078952953630-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d43a8a54078952953630-1\"><span class=\"crayon-i\">from</span> <span class=\"crayon-i\">p</span> <span class=\"crayon-st\">in</span> <span class=\"crayon-v\">db</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Purchases</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a54078952953630-2\"><span class=\"crayon-i\">where</span> <span class=\"crayon-v\">p</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Customer</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Address</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">State</span> <span class=\"crayon-o\">==</span> <span class=\"crayon-s\">\"WA\"</span> <span class=\"crayon-o\">||</span> <span class=\"crayon-v\">p</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">Customer</span> <span class=\"crayon-o\">==</span> <span class=\"crayon-t\">null</span></div><div class=\"crayon-line\" id=\"crayon-58d43a8a54078952953630-3\"><span class=\"crayon-i\">let</span> <span class=\"crayon-i\">purchaseValue</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-v\">p</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">PurchaseItems</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">Sum</span> <span class=\"crayon-sy\">(</span><span class=\"crayon-i\">pi</span> <span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span> <span class=\"crayon-v\">pi</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">SaleAmount</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a54078952953630-4\"><span class=\"crayon-e\">where</span> <span class=\"crayon-e\">purchaseValue</span> <span class=\"crayon-o\">&gt;</span> <span class=\"crayon-cn\">1000</span></div><div class=\"crayon-line\" id=\"crayon-58d43a8a54078952953630-5\"><span class=\"crayon-e\">orderby</span> <span class=\"crayon-e\">purchaseValue</span> <span class=\"crayon-e\">descending</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a54078952953630-6\"><span class=\"crayon-e\">select</span> <span class=\"crayon-r\">new</span></div><div class=\"crayon-line\" id=\"crayon-58d43a8a54078952953630-7\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a54078952953630-8\">   <span class=\"crayon-v\">p</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Description</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-58d43a8a54078952953630-9\">   <span class=\"crayon-v\">p</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Customer</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">SalesPerson</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Name</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a54078952953630-10\">   <span class=\"crayon-i\">PurchaseItemCount</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-v\">p</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">PurchaseItems</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Count</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-58d43a8a54078952953630-11\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n<p>下面是使用 SQL 实现相同的查询：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d43a8a5407b635608154\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSELECT \r\n    p.Description,\r\n    s.Name,\r\n    (SELECT COUNT(*) FROM PurchaseItem pi WHERE p.ID = pi.PurchaseID) PurchaseItemCount\t\r\nFROM Purchase p\r\n    LEFT OUTER JOIN \r\n        Customer c \r\n            INNER JOIN Address a ON c.AddressID = a.ID\r\n            LEFT OUTER JOIN SalesPerson s ON c.SalesPersonID = s.ID\r\n    ON p.CustomerID = c.ID\t\r\nWHERE\r\n    (a.State = 'WA' OR p.CustomerID IS NULL)\r\n    AND p.ID in\r\n    (\r\n        SELECT PurchaseID FROM PurchaseItem\r\n        GROUP BY PurchaseID HAVING SUM (SaleAmount) &gt; 1000\r\n    )\r\nORDER BY\r\n    (SELECT SUM (SaleAmount) FROM PurchaseItem pi WHERE p.ID = pi.PurchaseID) DESC</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d43a8a5407b635608154-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a5407b635608154-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d43a8a5407b635608154-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a5407b635608154-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-58d43a8a5407b635608154-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a5407b635608154-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-58d43a8a5407b635608154-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a5407b635608154-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-58d43a8a5407b635608154-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a5407b635608154-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-58d43a8a5407b635608154-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a5407b635608154-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-58d43a8a5407b635608154-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a5407b635608154-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-58d43a8a5407b635608154-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a5407b635608154-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-58d43a8a5407b635608154-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a5407b635608154-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-58d43a8a5407b635608154-19\">19</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d43a8a5407b635608154-1\"><span class=\"crayon-i\">SELECT</span> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a5407b635608154-2\">    <span class=\"crayon-v\">p</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Description</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-58d43a8a5407b635608154-3\">    <span class=\"crayon-v\">s</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Name</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a5407b635608154-4\">    <span class=\"crayon-sy\">(</span><span class=\"crayon-i\">SELECT</span> <span class=\"crayon-e\">COUNT</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">)</span> <span class=\"crayon-i\">FROM</span> <span class=\"crayon-i\">PurchaseItem</span> <span class=\"crayon-i\">pi</span> <span class=\"crayon-i\">WHERE</span> <span class=\"crayon-v\">p</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">ID</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-v\">pi</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">PurchaseID</span><span class=\"crayon-sy\">)</span> <span class=\"crayon-e\">PurchaseItemCount\t</span></div><div class=\"crayon-line\" id=\"crayon-58d43a8a5407b635608154-5\"><span class=\"crayon-i\">FROM</span> <span class=\"crayon-i\">Purchase</span> <span class=\"crayon-i\">p</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a5407b635608154-6\">    <span class=\"crayon-i\">LEFT</span> <span class=\"crayon-i\">OUTER</span> <span class=\"crayon-i\">JOIN</span> </div><div class=\"crayon-line\" id=\"crayon-58d43a8a5407b635608154-7\">        <span class=\"crayon-i\">Customer</span> <span class=\"crayon-i\">c</span> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a5407b635608154-8\">            <span class=\"crayon-i\">INNER</span> <span class=\"crayon-i\">JOIN</span> <span class=\"crayon-i\">Address</span> <span class=\"crayon-i\">a</span> <span class=\"crayon-i\">ON</span> <span class=\"crayon-v\">c</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">AddressID</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-v\">a</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">ID</span></div><div class=\"crayon-line\" id=\"crayon-58d43a8a5407b635608154-9\">            <span class=\"crayon-i\">LEFT</span> <span class=\"crayon-i\">OUTER</span> <span class=\"crayon-i\">JOIN</span> <span class=\"crayon-i\">SalesPerson</span> <span class=\"crayon-i\">s</span> <span class=\"crayon-i\">ON</span> <span class=\"crayon-v\">c</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">SalesPersonID</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-v\">s</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">ID</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a5407b635608154-10\">    <span class=\"crayon-i\">ON</span> <span class=\"crayon-v\">p</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">CustomerID</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-v\">c</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">ID\t</span></div><div class=\"crayon-line\" id=\"crayon-58d43a8a5407b635608154-11\"><span class=\"crayon-i\">WHERE</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a5407b635608154-12\">    <span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">State</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-s\">'WA'</span> <span class=\"crayon-st\">OR</span> <span class=\"crayon-v\">p</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">CustomerID</span> <span class=\"crayon-st\">IS</span> <span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-58d43a8a5407b635608154-13\">    <span class=\"crayon-st\">AND</span> <span class=\"crayon-v\">p</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">ID</span> <span class=\"crayon-st\">in</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a5407b635608154-14\">    <span class=\"crayon-sy\">(</span></div><div class=\"crayon-line\" id=\"crayon-58d43a8a5407b635608154-15\">        <span class=\"crayon-i\">SELECT</span> <span class=\"crayon-i\">PurchaseID</span> <span class=\"crayon-i\">FROM</span> <span class=\"crayon-i\">PurchaseItem</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a5407b635608154-16\">        <span class=\"crayon-i\">GROUP</span> <span class=\"crayon-i\">BY</span> <span class=\"crayon-i\">PurchaseID</span> <span class=\"crayon-i\">HAVING</span> <span class=\"crayon-i\">SUM</span> <span class=\"crayon-sy\">(</span><span class=\"crayon-v\">SaleAmount</span><span class=\"crayon-sy\">)</span> <span class=\"crayon-o\">&gt;</span> <span class=\"crayon-cn\">1000</span></div><div class=\"crayon-line\" id=\"crayon-58d43a8a5407b635608154-17\">    <span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a5407b635608154-18\"><span class=\"crayon-i\">ORDER</span> <span class=\"crayon-i\">BY</span></div><div class=\"crayon-line\" id=\"crayon-58d43a8a5407b635608154-19\">    <span class=\"crayon-sy\">(</span><span class=\"crayon-i\">SELECT</span> <span class=\"crayon-i\">SUM</span> <span class=\"crayon-sy\">(</span><span class=\"crayon-v\">SaleAmount</span><span class=\"crayon-sy\">)</span> <span class=\"crayon-i\">FROM</span> <span class=\"crayon-i\">PurchaseItem</span> <span class=\"crayon-i\">pi</span> <span class=\"crayon-i\">WHERE</span> <span class=\"crayon-v\">p</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">ID</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-v\">pi</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">PurchaseID</span><span class=\"crayon-sy\">)</span> <span class=\"crayon-v\">DESC</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0034 seconds] -->\r\n<p>有意思的是可以将上述 SQL 查询转换回到 LINQ，所生成的查询每一块都会有傻瓜式重复。论坛里常会贴出这样的查询（通常是非工作的版本）——这是用 SQL 进行思考而不是以 <a href=\"https://www.linqpad.net/Challenge.aspx\" rel=\"nofollow\">LINQ 进行思考</a>的结果。这就像是是将 Fortran 程序转换成 C# 6 时会抱怨 GOTO 的笨拙语法一样。</p>\n<h3>数据修整</h3>\n<p>在查询联合中从多个表选择数据 – 最终的结果会是一个扁平的以行为单位的元组。如果你使用了多年的 SQL，你可能认为这种事不会发生在你身上——它导致数据重复，从而使得结果集无法在客户端很好地使用。所以当它发生时往往难以接受。与此相反，LINQ 让你可以获取到休整过的分层级的数据。这就避免了重复，让结果集容易处理，而且在大多数情况下也会消除进行联合操作的必要。例如，假设我们想要提取一组顾客，每一条记录都带上了它们的高价值交易。使用 LINQ，你可以这样做：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d43a8a5407e260587940\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfrom c in db.Customers\r\nwhere c.Address.State == \"WA\"\r\nselect new\r\n{\r\n   c.Name,\r\n   c.CustomerNumber,\r\n   HighValuePurchases = c.Purchases.Where (p =&gt; p.Price &gt; 1000)\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d43a8a5407e260587940-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a5407e260587940-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d43a8a5407e260587940-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a5407e260587940-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-58d43a8a5407e260587940-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a5407e260587940-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-58d43a8a5407e260587940-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a5407e260587940-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d43a8a5407e260587940-1\"><span class=\"crayon-i\">from</span> <span class=\"crayon-i\">c</span> <span class=\"crayon-st\">in</span> <span class=\"crayon-v\">db</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Customers</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a5407e260587940-2\"><span class=\"crayon-i\">where</span> <span class=\"crayon-v\">c</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Address</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">State</span> <span class=\"crayon-o\">==</span> <span class=\"crayon-s\">\"WA\"</span></div><div class=\"crayon-line\" id=\"crayon-58d43a8a5407e260587940-3\"><span class=\"crayon-e\">select</span> <span class=\"crayon-r\">new</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a5407e260587940-4\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-58d43a8a5407e260587940-5\">   <span class=\"crayon-v\">c</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Name</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a5407e260587940-6\">   <span class=\"crayon-v\">c</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">CustomerNumber</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-58d43a8a5407e260587940-7\">   <span class=\"crayon-i\">HighValuePurchases</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-v\">c</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Purchases</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">Where</span> <span class=\"crayon-sy\">(</span><span class=\"crayon-i\">p</span> <span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span> <span class=\"crayon-v\">p</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">Price</span> <span class=\"crayon-o\">&gt;</span> <span class=\"crayon-cn\">1000</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a5407e260587940-8\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>HighValuePurchases，在这里是一个集合。由于我们查询的是一个相关属性，就不需要进行联合了。因此这是一个内联合还是外联合的细节问题就被很好的抽象掉了。在此例中，当翻译成了 SQL，可能就是一个外联合：LINQ 不会因为子集合返回的是零个元素就排除行。如果我们想要有一个可以翻译成一个内联合的东西，可以这样做:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d43a8a54084483992161\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfrom c in db.Customers\r\nwhere c.Address.State == \"WA\"\r\nlet HighValuePurchases = c.Purchases.Where (p =&gt; p.Price &gt; 1000)where HighValuePurchases.Any()select new\r\n{\r\n   c.Name,\r\n   c.CustomerNumber,\r\n   HighValuePurchases\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d43a8a54084483992161-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a54084483992161-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d43a8a54084483992161-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a54084483992161-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-58d43a8a54084483992161-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a54084483992161-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-58d43a8a54084483992161-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a54084483992161-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d43a8a54084483992161-1\"><span class=\"crayon-i\">from</span> <span class=\"crayon-i\">c</span> <span class=\"crayon-st\">in</span> <span class=\"crayon-v\">db</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Customers</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a54084483992161-2\"><span class=\"crayon-i\">where</span> <span class=\"crayon-v\">c</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Address</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">State</span> <span class=\"crayon-o\">==</span> <span class=\"crayon-s\">\"WA\"</span></div><div class=\"crayon-line\" id=\"crayon-58d43a8a54084483992161-3\"><span class=\"crayon-i\">let</span> <span class=\"crayon-i\">HighValuePurchases</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-v\">c</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Purchases</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">Where</span> <span class=\"crayon-sy\">(</span><span class=\"crayon-i\">p</span> <span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span> <span class=\"crayon-v\">p</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">Price</span> <span class=\"crayon-o\">&gt;</span> <span class=\"crayon-cn\">1000</span><span class=\"crayon-sy\">)</span><span class=\"crayon-i\">where</span> <span class=\"crayon-v\">HighValuePurchases</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Any</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-e\">select</span> <span class=\"crayon-r\">new</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a54084483992161-4\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-58d43a8a54084483992161-5\">   <span class=\"crayon-v\">c</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Name</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a54084483992161-6\">   <span class=\"crayon-v\">c</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">CustomerNumber</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-58d43a8a54084483992161-7\">   <span class=\"crayon-i\">HighValuePurchases</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a54084483992161-8\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n<p>LINQ 还通过一组丰富的操作符对平面外联合、自联合、组查询以及其它各种不同类型查询进行了支持。</p>\n<h3>参数化</h3>\n<p>如果我们想要将之前的例子参数化会如何呢，如此”WA”状态是不是就要来自于一个变量呢? 其实我们只要像下面这样做就可以了:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d43a8a54087471923930\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nstring state = \"WA\";\r\n\r\nvar query =\r\n   from c in db.Customers\r\n   where c.Address.State == state\r\n   ...</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d43a8a54087471923930-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a54087471923930-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d43a8a54087471923930-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a54087471923930-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-58d43a8a54087471923930-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a54087471923930-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d43a8a54087471923930-1\"><span class=\"crayon-t\">string</span> <span class=\"crayon-i\">state</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-s\">\"WA\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a54087471923930-2\"> </div><div class=\"crayon-line\" id=\"crayon-58d43a8a54087471923930-3\"><span class=\"crayon-t\">var</span> <span class=\"crayon-i\">query</span> <span class=\"crayon-o\">=</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a54087471923930-4\">   <span class=\"crayon-i\">from</span> <span class=\"crayon-i\">c</span> <span class=\"crayon-st\">in</span> <span class=\"crayon-v\">db</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">Customers</span></div><div class=\"crayon-line\" id=\"crayon-58d43a8a54087471923930-5\">   <span class=\"crayon-i\">where</span> <span class=\"crayon-v\">c</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Address</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">State</span> <span class=\"crayon-o\">==</span> <span class=\"crayon-i\">state</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a54087471923930-6\">   <span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>不会混淆 DbCommand 对象上面的参数，或者担心 SQL 注入攻击。 LINQ 的参数化是内联、类型安全并且高度可读的。它不仅解决了问题——而且解决得很不错。</p>\n<p>因为 LINQ 查询时可以进行组合，所以我们可以有条件的添加谓词。例如，我们写出一个方法，如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d43a8a5408a585551935\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nIQueryable GetCustomers (string state, decimal? minPurchase)\r\n{\r\n    var query = Customers.AsQueryable();\r\n    \r\n    if (state != null)\r\n        query = query.Where (c =&gt; c.Address.State == state);\r\n    \r\n    if (minPurchase != null)\r\n        query = query.Where (c =&gt; c.Purchases.Any (p =&gt; p.Price &gt; minPurchase.Value));\r\n    \r\n    return query;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d43a8a5408a585551935-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a5408a585551935-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d43a8a5408a585551935-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a5408a585551935-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-58d43a8a5408a585551935-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a5408a585551935-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-58d43a8a5408a585551935-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a5408a585551935-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-58d43a8a5408a585551935-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a5408a585551935-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-58d43a8a5408a585551935-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a5408a585551935-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d43a8a5408a585551935-1\"><span class=\"crayon-i\">IQueryable</span> <span class=\"crayon-i\">GetCustomers</span> <span class=\"crayon-sy\">(</span><span class=\"crayon-t\">string</span> <span class=\"crayon-v\">state</span><span class=\"crayon-sy\">,</span> <span class=\"crayon-v\">decimal</span><span class=\"crayon-sy\">?</span> <span class=\"crayon-v\">minPurchase</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a5408a585551935-2\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-58d43a8a5408a585551935-3\">    <span class=\"crayon-t\">var</span> <span class=\"crayon-i\">query</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-v\">Customers</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">AsQueryable</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a5408a585551935-4\">    </div><div class=\"crayon-line\" id=\"crayon-58d43a8a5408a585551935-5\">    <span class=\"crayon-st\">if</span> <span class=\"crayon-sy\">(</span><span class=\"crayon-i\">state</span> <span class=\"crayon-o\">!=</span> <span class=\"crayon-t\">null</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a5408a585551935-6\">        <span class=\"crayon-i\">query</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-v\">query</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">Where</span> <span class=\"crayon-sy\">(</span><span class=\"crayon-i\">c</span> <span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span> <span class=\"crayon-v\">c</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Address</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">State</span> <span class=\"crayon-o\">==</span> <span class=\"crayon-v\">state</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-58d43a8a5408a585551935-7\">    </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a5408a585551935-8\">    <span class=\"crayon-st\">if</span> <span class=\"crayon-sy\">(</span><span class=\"crayon-i\">minPurchase</span> <span class=\"crayon-o\">!=</span> <span class=\"crayon-t\">null</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-58d43a8a5408a585551935-9\">        <span class=\"crayon-i\">query</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-v\">query</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">Where</span> <span class=\"crayon-sy\">(</span><span class=\"crayon-i\">c</span> <span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span> <span class=\"crayon-v\">c</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Purchases</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">Any</span> <span class=\"crayon-sy\">(</span><span class=\"crayon-i\">p</span> <span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span> <span class=\"crayon-v\">p</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">Price</span> <span class=\"crayon-o\">&gt;</span> <span class=\"crayon-v\">minPurchase</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Value</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a5408a585551935-10\">    </div><div class=\"crayon-line\" id=\"crayon-58d43a8a5408a585551935-11\">    <span class=\"crayon-st\">return</span> <span class=\"crayon-v\">query</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a5408a585551935-12\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0025 seconds] -->\r\n<p>如果我们使用空的 state 以及 minPurchase 值调用了这个方法，那么在我们枚举结果集的时候如下 SQL 就会被生成出来：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d43a8a5408d992731955\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSELECT [t0].[ID], [t0].[Name], [t0].[AddressID]\r\nFROM [Customer] AS [t0]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d43a8a5408d992731955-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a5408d992731955-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d43a8a5408d992731955-1\"><span class=\"crayon-i\">SELECT</span> <span class=\"crayon-sy\">[</span><span class=\"crayon-v\">t0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">ID</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span> <span class=\"crayon-sy\">[</span><span class=\"crayon-v\">t0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">Name</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span> <span class=\"crayon-sy\">[</span><span class=\"crayon-v\">t0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">AddressID</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a5408d992731955-2\"><span class=\"crayon-i\">FROM</span> <span class=\"crayon-sy\">[</span><span class=\"crayon-v\">Customer</span><span class=\"crayon-sy\">]</span> <span class=\"crayon-st\">AS</span> <span class=\"crayon-sy\">[</span><span class=\"crayon-v\">t0</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>不过，如果我们指定了 state 和 minPurchase 的值，LINQ 到 SQL 就不只是向查询添加了谓词，还会有必要的联合语句：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d43a8a54091571056829\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSELECT [t0].[ID], [t0].[Name], [t0].[AddressID]\r\nFROM [Customer] AS [t0]\r\nLEFT OUTER JOIN [Address] AS [t1] ON [t1].[ID] = [t0].[AddressID]\r\nWHERE (EXISTS(\r\n    SELECT NULL AS [EMPTY]\r\n    FROM [Purchase] AS [t2]\r\n    WHERE ([t2].[Price] &gt; @p0) AND ([t2].[CustomerID] = [t0].[ID])\r\n    )) AND ([t1].[State] = @p1)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d43a8a54091571056829-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a54091571056829-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d43a8a54091571056829-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a54091571056829-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-58d43a8a54091571056829-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a54091571056829-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-58d43a8a54091571056829-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d43a8a54091571056829-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d43a8a54091571056829-1\"><span class=\"crayon-i\">SELECT</span> <span class=\"crayon-sy\">[</span><span class=\"crayon-v\">t0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">ID</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span> <span class=\"crayon-sy\">[</span><span class=\"crayon-v\">t0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">Name</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span> <span class=\"crayon-sy\">[</span><span class=\"crayon-v\">t0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">AddressID</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a54091571056829-2\"><span class=\"crayon-i\">FROM</span> <span class=\"crayon-sy\">[</span><span class=\"crayon-v\">Customer</span><span class=\"crayon-sy\">]</span> <span class=\"crayon-st\">AS</span> <span class=\"crayon-sy\">[</span><span class=\"crayon-v\">t0</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-58d43a8a54091571056829-3\"><span class=\"crayon-i\">LEFT</span> <span class=\"crayon-i\">OUTER</span> <span class=\"crayon-i\">JOIN</span> <span class=\"crayon-sy\">[</span><span class=\"crayon-v\">Address</span><span class=\"crayon-sy\">]</span> <span class=\"crayon-st\">AS</span> <span class=\"crayon-sy\">[</span><span class=\"crayon-v\">t1</span><span class=\"crayon-sy\">]</span> <span class=\"crayon-i\">ON</span> <span class=\"crayon-sy\">[</span><span class=\"crayon-v\">t1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">ID</span><span class=\"crayon-sy\">]</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-sy\">[</span><span class=\"crayon-v\">t0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">AddressID</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a54091571056829-4\"><span class=\"crayon-i\">WHERE</span> <span class=\"crayon-sy\">(</span><span class=\"crayon-e\">EXISTS</span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line\" id=\"crayon-58d43a8a54091571056829-5\">    <span class=\"crayon-i\">SELECT</span> <span class=\"crayon-t\">NULL</span> <span class=\"crayon-st\">AS</span> <span class=\"crayon-sy\">[</span><span class=\"crayon-v\">EMPTY</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a54091571056829-6\">    <span class=\"crayon-i\">FROM</span> <span class=\"crayon-sy\">[</span><span class=\"crayon-v\">Purchase</span><span class=\"crayon-sy\">]</span> <span class=\"crayon-st\">AS</span> <span class=\"crayon-sy\">[</span><span class=\"crayon-v\">t2</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-58d43a8a54091571056829-7\">    <span class=\"crayon-i\">WHERE</span> <span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">t2</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">Price</span><span class=\"crayon-sy\">]</span> <span class=\"crayon-o\">&gt;</span> <span class=\"crayon-sy\">@</span><span class=\"crayon-v\">p0</span><span class=\"crayon-sy\">)</span> <span class=\"crayon-st\">AND</span> <span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">t2</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">CustomerID</span><span class=\"crayon-sy\">]</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-sy\">[</span><span class=\"crayon-v\">t0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">ID</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d43a8a54091571056829-8\">    <span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span> <span class=\"crayon-st\">AND</span> <span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">t1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">State</span><span class=\"crayon-sy\">]</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-sy\">@</span><span class=\"crayon-v\">p1</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0027 seconds] -->\r\n<p>因为我们的方法返回了一个 IQueryable，查询在枚举到之前并不会被实际地转换成 SQL 并加以执行。这样就给了调用进一步添加谓词、分页、自定义投影等等的机会。</p>\n<h3>静态类型安全</h3>\n<p>在之前的查询中，如果我们将 state 变量声明成了一个整型数而不是一个字符串，那么查询可能在编译时就会报错，而不用等到运行时。这个也同样适用于把表名或者列名弄错的情况。这在重构时有一个很实在的好处：如果你没有完成手头的工作，编译器会给出提示。</p>\n<h3>客户端处理</h3>\n<p>LINQ 让你可以轻松地将查询的一些部分转移到客户端上进行处理。对于负载负担较大的数据库服务器，这样做可实际提升性能。只要你所取数据没有超过所需（换言之，你还是要在服务器上做过滤），就可以经常性地通过把对结果集进行重新排序、转换以及重组的压力转移到负载较少的应用服务器上去。使用 LINQ，你需要做的就是 AsEnumerable() 转移到查询之中，而自那个点之后的所有事情都可以在本地执行。</p>\n<h3>什么时候不用 LINQ 去查询数据库</h3>\n<p>尽管 LINQ 的功能强大，但是它并不能取代 SQL。它可以满足 95% 以上的需求，不过你有时仍然需要SQL:</p>\n<ul>\n<li>需要手动调整的查询 (特殊是需要优化和进行锁定提示的时候)；</li>\n<li>有些涉及到要 select 临时表，然后又要对那些表进行查询操作的查询；</li>\n<li>预知的更新以及批量插入操作。</li>\n</ul>\n<p>还有就在用到触发器时，你还是需要 SQL。 (尽管在使用 LINQ 的时候诸如此类的东西并非常常被需要，但在要使用存储过程和函数的时候，SQL 是不可或缺的)。你可以通过在 SQL 中编写表值函数来将 SQL 与 LINQ 结合在一起, 然后在更加复杂的 LINQ 查询里面调用这些函数。</p>\n<p>了解两门查询语言并不是问题，因为无论如何你都会想要去学习 LINQ 的 — LINQ 在查询本地集合以及 XML DOM 的时候非常实用。如果你使用的仍然是老旧的基于 XmlDocument 的 DOM，LINQ to XML 的 DOM 操作会是一种具有戏剧效果的进步。</p>\n<p>还有就是相比于 SQL， LINQ <a href=\"https://www.linqpad.net/MasteringLINQ.aspx\" rel=\"nofollow\">更易于掌握</a>，所以如果你想写个不错的查询，使用 LINQ 会比 SQL 更好达成。</p>\n<h3>将 LINQ 用于实战</h3>\n<p>我几乎是只用 LINQ 来做数据库查询，因为它更有效率。</p>\n<p>对于应用程序的编写而言，我的个人经验是一个使用 LINQ 的数据访问层（使用一个像 LINQ 到 SQL 或者 Entity Framework 的 API）可以将数据访问的开发时间砍掉一半，而且可以让维护工作更加的轻松。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"110626\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"110626votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"110626\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,Linq,SQL,数据库", "url": "http://blog.jobbole.com/110626/", "title": "为什么说 LINQ 要胜过 SQL", "front_image_path": "full/336730a32d71a69aa2a6a4134bf24159d8fc26b2.jpg", "comment_nums": 1, "create_time": "2017/03/20", "url_object_id": "a878e8627e7de3895afeaa2716a05d1e", "praise_nums": "1"},
{"front_image_url": ["http://jbcdn2.b0.upaiyun.com/2016/11/59d49abe8909a122bc2c9aa43b71e3bb-50x50.png"], "fav_nums": 2, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"><p><script src=\"http://www.imooc.com/open/courselistrandjs\"></script><span style=\"display:block;margin-bottom:10px;\"></span></p>\n</div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/daofazi\">道法子</a> 翻译，<a href=\"http://www.jobbole.com/members/upanblack\">Panblack</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"http://www.loggly.com/ultimate-guide/logging/analyzing-linux-logs/\">Amy Echeverri&amp;Sadequl Hussain</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><h1 class=\"md-end-block md-heading\">Linux 日志分析</h1>\n<p><span class=\"md-line md-end-block md-focus\"><span class=\"\">虽然提取的时候，不总是和你想的一样简单，但是日志中有大量信息在等着你。在这部分，我们会讲一些基本分析示例，你可以马上拿来处理你的日志（只是搜索里面有什么）。我们还会讲一些高级分析方法，开始的时候可能要花时间来做配置，但会为以后省很多时间。你可以把高级分析的示例用在待解析的数据上，比如生成摘要计数，过滤字段值等。</span></span></p>\n<p><span class=\"md-line md-end-block\">首先我们会演示，你应该如何使用不同的工具在命令行进行日志分析；然后，演示一个日志管理工具，它能够让大多数乏味的工作变得自动化和高效。</span></p>\n<h2 class=\"md-end-block md-heading\">使用 Grep 搜索</h2>\n<p><span class=\"md-line md-end-block\">搜索文本是找到你想要的信息的最基本方法。搜索文本最常用的工具是 <span class=\"\"><a href=\"http://linux.die.net/man/1/grep\">grep</a></span> 。这个命令行工具，大多数 Linux 发行版上都有，它支持你用正则表达式来搜索日志。正则表达式是一种用专门语言写成的语句，可用来识别匹配文本。最简单的正则表达式是把你搜索的字符串加上引号。</span></p>\n<h3 class=\"md-end-block md-heading\">正则表达式</h3>\n<p><span class=\"md-line md-end-block\">这里有个例子，它在 Ubuntu 的认证日志里搜索 “user hoover”：</span></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d4b7d8a775d416417778\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Shell</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ GREP \"USER HOOVER\" /VAR/LOG/AUTH.LOG\r\nACCEPTED PASSWORD FOR HOOVER FROM 10.0.2.2 PORT 4792 SSH2\r\nPAM_UNIX(SSHD:SESSION): SESSION OPENED FOR USER HOOVER BY (UID=0)\r\nPAM_UNIX(SSHD:SESSION): SESSION CLOSED FOR USER HOOVER</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d4b7d8a775d416417778-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d4b7d8a775d416417778-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d4b7d8a775d416417778-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d4b7d8a775d416417778-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d4b7d8a775d416417778-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">GREP</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"USER HOOVER\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-t\">VAR</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">LOG</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">AUTH</span><span class=\"crayon-e\">.LOG</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d4b7d8a775d416417778-2\"><span class=\"crayon-e\">ACCEPTED </span><span class=\"crayon-e\">PASSWORD </span><span class=\"crayon-st\">FOR</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">HOOVER </span><span class=\"crayon-i\">FROM</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10.0.2.2</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">PORT</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4792</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">SSH2</span></div><div class=\"crayon-line\" id=\"crayon-58d4b7d8a775d416417778-3\"><span class=\"crayon-e\">PAM_UNIX</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">SSHD</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">SESSION</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">SESSION </span><span class=\"crayon-e\">OPENED </span><span class=\"crayon-st\">FOR</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">USER </span><span class=\"crayon-e\">HOOVER </span><span class=\"crayon-e\">BY</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">UID</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d4b7d8a775d416417778-4\"><span class=\"crayon-e\">PAM_UNIX</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">SSHD</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">SESSION</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">SESSION </span><span class=\"crayon-e\">CLOSED </span><span class=\"crayon-st\">FOR</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">USER </span><span class=\"crayon-v\">HOOVER</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0017 seconds] -->\r\n<p><span class=\"md-line md-end-block\">构造精确的正则表达式很难。例如，假设我们搜索一个数字，比如端口号“4792” ，它也可以匹配时间戳，URLs和其他不需要的数据。在下面针对 Ubuntu 的例子里，它匹配了 Apache 日志，但这并不是我们想要的。</span></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d4b7d8a776a394974161\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ grep \"4792\" /var/log/auth.log\r\nAccepted password for hoover from 10.0.2.2 port 4792 ssh2\r\n74.91.21.46 - - [31/Mar/2015:19:44:32 +0000] \"GET /scripts/samples/search?q=4972HTTP/1.0\" 404 545 \"-\" \"-”</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d4b7d8a776a394974161-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d4b7d8a776a394974161-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d4b7d8a776a394974161-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d4b7d8a776a394974161-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">grep</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"4792\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">log</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">auth</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d4b7d8a776a394974161-2\"><span class=\"crayon-e\">Accepted </span><span class=\"crayon-e\">password </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">hoover </span><span class=\"crayon-i\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10.0.2.2</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">port</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4792</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">ssh2</span></div><div class=\"crayon-line\" id=\"crayon-58d4b7d8a776a394974161-3\"><span class=\"crayon-cn\">74.91.21.46</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">31</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">Mar</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2015</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">19</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">44</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">32</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">0000</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"GET /scripts/samples/search?q=4972HTTP/1.0\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">404</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">545</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"-\"</span><span class=\"crayon-h\"> </span>\"<span class=\"crayon-o\">-</span>”</div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p></p>\n<h3 class=\"md-end-block md-heading\">延伸搜索</h3>\n<p><span class=\"md-line md-end-block\">另一个有用的技巧是你可以用grep 做延伸搜索。它会输出匹配项的前几行和后几行内容。它可以帮你调试是什么导致了错误或问题。B 选项指定显示匹配项前面的行数，A 选项指定显示匹配项后面的行数。如下所示，我们看到，当有人以 admin 身份登陆失败后， 反向映射也会失败，这说明他们可能没有有效的域名。这很可疑！</span></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d4b7d8a776f615791009\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ grep -B 3 -A 2 'Invalid user' /var/log/auth.log\r\nApr 28 17:06:20 ip-172-31-11-241 sshd[12545]: reverse mapping checking getaddrinfo for 216-19-2-8.commspeed.net [216.19.2.8] failed - POSSIBLE BREAK-IN ATTEMPT!\r\nApr 28 17:06:20 ip-172-31-11-241 sshd[12545]: Received disconnect from 216.19.2.8: 11: Bye Bye [preauth]\r\nApr 28 17:06:20 ip-172-31-11-241 sshd[12547]: &lt;b&gt;Invalid user&lt;/b&gt;; admin from 216.19.2.8\r\nApr 28 17:06:20 ip-172-31-11-241 sshd[12547]: input_userauth_request: invalid user admin [preauth]\r\nApr 28 17:06:20 ip-172-31-11-241 sshd[12547]: Received disconnect from 216.19.2.8: 11: Bye Bye [preauth]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d4b7d8a776f615791009-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d4b7d8a776f615791009-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d4b7d8a776f615791009-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d4b7d8a776f615791009-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-58d4b7d8a776f615791009-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d4b7d8a776f615791009-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d4b7d8a776f615791009-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">grep</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">B</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Invalid user'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">log</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">auth</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d4b7d8a776f615791009-2\"><span class=\"crayon-i\">Apr</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">28</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">17</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">06</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">20</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ip</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">172</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">31</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">11</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">241</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sshd</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">12545</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">reverse </span><span class=\"crayon-e\">mapping </span><span class=\"crayon-e\">checking </span><span class=\"crayon-e\">getaddrinfo </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">216</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">19</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">8.commspeed.net</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">216.19.2.8</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">failed</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">POSSIBLE </span><span class=\"crayon-st\">BREAK</span><span class=\"crayon-o\">-</span><span class=\"crayon-st\">IN</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ATTEMPT</span><span class=\"crayon-o\">!</span></div><div class=\"crayon-line\" id=\"crayon-58d4b7d8a776f615791009-3\"><span class=\"crayon-i\">Apr</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">28</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">17</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">06</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">20</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ip</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">172</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">31</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">11</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">241</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sshd</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">12545</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Received </span><span class=\"crayon-e\">disconnect </span><span class=\"crayon-i\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">216.19.2.8</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Bye </span><span class=\"crayon-i\">Bye</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">preauth</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d4b7d8a776f615791009-4\"><span class=\"crayon-i\">Apr</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">28</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">17</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">06</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">20</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ip</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">172</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">31</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">11</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">241</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sshd</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">12547</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">b</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-e\">Invalid </span><span class=\"crayon-v\">user</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">b</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">admin </span><span class=\"crayon-i\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">216.19.2.8</span></div><div class=\"crayon-line\" id=\"crayon-58d4b7d8a776f615791009-5\"><span class=\"crayon-i\">Apr</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">28</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">17</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">06</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">20</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ip</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">172</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">31</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">11</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">241</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sshd</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">12547</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">input_userauth_request</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">invalid </span><span class=\"crayon-e\">user </span><span class=\"crayon-i\">admin</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">preauth</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d4b7d8a776f615791009-6\"><span class=\"crayon-i\">Apr</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">28</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">17</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">06</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">20</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ip</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">172</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">31</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">11</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">241</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sshd</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">12547</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Received </span><span class=\"crayon-e\">disconnect </span><span class=\"crayon-i\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">216.19.2.8</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Bye </span><span class=\"crayon-i\">Bye</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">preauth</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0048 seconds] -->\r\n<p></p>\n<h3 class=\"md-end-block md-heading\">Tail命令</h3>\n<p><span class=\"md-line md-end-block\">你也可以将 <span class=\"\"><a href=\"http://linux.die.net/man/1/tail\">tail</a></span> 和 grep 搭配起来使用，以获取文件最后几行，或者跟踪日志并实时打印。当你在进行交互式更改比如架设服务器或测试代码更改的时候，非常有用。</span></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d4b7d8a7773495874328\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ tail -f /var/log/auth.log | grep 'Invalid user'\r\nApr 30 19:49:48 ip-172-31-11-241 sshd[6512]: Invalid user ubnt from 219.140.64.136\r\nApr 30 19:49:49 ip-172-31-11-241 sshd[6514]: Invalid user; admin from 219.140.64.136</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d4b7d8a7773495874328-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d4b7d8a7773495874328-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d4b7d8a7773495874328-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d4b7d8a7773495874328-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tail</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">f</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">log</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">auth</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">log</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">grep</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Invalid user'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d4b7d8a7773495874328-2\"><span class=\"crayon-i\">Apr</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">30</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">19</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">49</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">48</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ip</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">172</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">31</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">11</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">241</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sshd</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">6512</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Invalid </span><span class=\"crayon-e\">user </span><span class=\"crayon-e\">ubnt </span><span class=\"crayon-i\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">219.140.64.136</span></div><div class=\"crayon-line\" id=\"crayon-58d4b7d8a7773495874328-3\"><span class=\"crayon-i\">Apr</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">30</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">19</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">49</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">49</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ip</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">172</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">31</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">11</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">241</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sshd</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">6514</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Invalid </span><span class=\"crayon-v\">user</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">admin </span><span class=\"crayon-i\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">219.140.64.136</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0019 seconds] -->\r\n<p><span class=\"md-line md-end-block\">全面介绍 grep 和正则表达式超出了本文的范围，<span class=\"\"><a href=\"http://ryanstutorials.net/linuxtutorial/grep.php\">Ryan 的教程</a></span>里有更深入的介绍。</span></p>\n<p><span class=\"md-line md-end-block\">日志管理系统中有更高效更强大的搜索工具。它们通常对数据建立索引和并行查询，因此你可以在数秒之内快速查询高达 G 字节或 T 字节的日志。相比之下，用 grep ，可能要花几分钟，极端情况下会花费数小时。日志管理系统也像 <span class=\"\"><a href=\"https://lucene.apache.org/core/2_9_4/queryparsersyntax.html\">Lucene</a></span> （译注：一个开源的全文检索引擎工具包）一样使用查询语言 ，它为数字，字段等的搜索提供了简单的语法。</span></p>\n<h2 class=\"md-end-block md-heading\">用Cut，AWK 和 Grok 解析日志</h2>\n<h3 class=\"md-end-block md-heading\">命令行工具</h3>\n<p><span class=\"md-line md-end-block\">Linux 提供了几种文本解析和分析的命令行工具。如果你想快速解析少量的数据，它们很强大，但是处理大量数据要花很长时间。</span></p>\n<h3 class=\"md-end-block md-heading\">Cut 命令</h3>\n<p><span class=\"md-line md-end-block\"><span class=\"\"><a href=\"http://linux.die.net/man/1/cut\">cut</a></span> 命令可以从带分隔符的日志中解析字段。分隔符是类似等号或逗号的字符，用来划分字段或键值对。</span></p>\n<p><span class=\"md-line md-end-block\">比如说，我们想从这个日志中提取用户名：</span></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d4b7d8a7777762656990\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npam_unix(su:auth): authentication failure; logname=hoover uid=1000 euid=0 tty=/dev/pts/0 ruser=hoover rhost=  user=root</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d4b7d8a7777762656990-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d4b7d8a7777762656990-1\"><span class=\"crayon-e\">pam_unix</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">su</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">auth</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">authentication </span><span class=\"crayon-v\">failure</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">logname</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">hoover </span><span class=\"crayon-v\">uid</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1000</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">euid</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tty</span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">dev</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">pts</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ruser</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">hoover </span><span class=\"crayon-v\">rhost</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">user</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">root</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p><span class=\"md-line md-end-block\">我们可以和下面一样使用 cut 命令，获取第八个等号后边的文本。这是 Ubuntu 上的例子：</span></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d4b7d8a777d296325208\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ grep \"authentication failure\" /var/log/auth.log | cut -d '=' -f 8\r\nroot\r\nhoover\r\nroot\r\nnagios\r\nnagios</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d4b7d8a777d296325208-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d4b7d8a777d296325208-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d4b7d8a777d296325208-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d4b7d8a777d296325208-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-58d4b7d8a777d296325208-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d4b7d8a777d296325208-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d4b7d8a777d296325208-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">grep</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"authentication failure\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">log</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">auth</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">log</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cut</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">d</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'='</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">f</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d4b7d8a777d296325208-2\"><span class=\"crayon-e\">root</span></div><div class=\"crayon-line\" id=\"crayon-58d4b7d8a777d296325208-3\"><span class=\"crayon-e\">hoover</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d4b7d8a777d296325208-4\"><span class=\"crayon-e\">root</span></div><div class=\"crayon-line\" id=\"crayon-58d4b7d8a777d296325208-5\"><span class=\"crayon-e\">nagios</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d4b7d8a777d296325208-6\"><span class=\"crayon-v\">nagios</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p></p>\n<h3 class=\"md-end-block md-heading\">AWK 命令</h3>\n<p><span class=\"md-line md-end-block\">此外，你还可以用 <span class=\"\"><a href=\"http://linux.die.net/man/1/awk\">awk</a></span>，它拥有更强的解析字段的功能。它提供了一个脚本语言，让你几乎可以过滤出任何毫不相关的信息。</span></p>\n<p><span class=\"md-line md-end-block\">举个例子，假设我们在 Ubuntu 上有如下的日志，我们想提取登陆失败的用户名：</span></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d4b7d8a7781894171997\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nMar 24 08:28:18 ip-172-31-11-241 sshd[32701]: input_userauth_request: invalid user guest [preauth]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d4b7d8a7781894171997-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d4b7d8a7781894171997-1\"><span class=\"crayon-i\">Mar</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">24</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">28</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">18</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ip</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">172</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">31</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">11</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">241</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sshd</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">32701</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">input_userauth_request</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">invalid </span><span class=\"crayon-e\">user </span><span class=\"crayon-i\">guest</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">preauth</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p><span class=\"md-line md-end-block\">下面是使用 awk 的例子。首先，用一个正则表达式 /sshd.*invalid user/ 匹配 sshd 无效用户的那一行。然后使用 { print $9 } 打印第九个字段（默认的分隔符是空格）。这样就输出了用户名。</span></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d4b7d8a7784740549923\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ awk '/sshd.*invalid user/ { print $9 }' /var/log/auth.log\r\nguest\r\nadmin\r\ninfo\r\ntest\r\nubnt</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d4b7d8a7784740549923-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d4b7d8a7784740549923-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d4b7d8a7784740549923-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d4b7d8a7784740549923-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-58d4b7d8a7784740549923-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d4b7d8a7784740549923-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d4b7d8a7784740549923-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">awk</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'/sshd.*invalid user/ { print $9 }'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">log</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">auth</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d4b7d8a7784740549923-2\"><span class=\"crayon-e\">guest</span></div><div class=\"crayon-line\" id=\"crayon-58d4b7d8a7784740549923-3\"><span class=\"crayon-e\">admin</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d4b7d8a7784740549923-4\"><span class=\"crayon-e\">info</span></div><div class=\"crayon-line\" id=\"crayon-58d4b7d8a7784740549923-5\"><span class=\"crayon-e\">test</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d4b7d8a7784740549923-6\"><span class=\"crayon-v\">ubnt</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p><span class=\"md-line md-end-block\">你可以从 <span class=\"\"><a href=\"http://www.delorie.com/gnu/docs/gawk/gawk_26.html#IDX155\">Awk 用户指南</a></span>中获取更多关于如何使用正则表达式和打印字段的信息。</span></p>\n<h3 class=\"md-end-block md-heading\">日志管理系统</h3>\n<p><span class=\"md-line md-end-block\">日志管理系统让解析更容易并且让用户可以快速分析大量日志文件。它们可以自动解析标准日志格式，比如公共 Linux 日志或 web 服务日志。这会节省很多时间，因为你在定位系统问题的时候不用去想如何写你的解析逻辑。</span></p>\n<p><span class=\"md-line md-end-block\">这里你可以看一个来自 sshd 的日志信息，解析出了远程主机和用户字段。这个截图来自 Loggly，一个基于云计算的日志管理服务。</span></p>\n<p><img src=\"http://wx4.sinaimg.cn/mw690/6941baebly1fdx2hcoct8j20d409m0su.jpg\"></p>\n<p><span class=\"md-line md-end-block\">对非标准格式的日志，你也可以自定义解析规则。最常用的工具是 <span class=\"\"><a href=\"http://www.delorie.com/gnu/docs/gawk/gawk_26.html#IDX155\">Grok</a></span>，它用通用正则表达式库把纯文本解析成 JSON 格式。这是 Grok 的配置示例，用来解析 Logstash 的内核日志 ：</span></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d4b7d8a7788005545434\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfilter{\r\ngrok {\r\nmatch =&gt; {\"message\" =&gt; \"%{CISCOTIMESTAMP:timestamp} %{HOST:host} %{WORD:program}%{NOTSPACE} %{NOTSPACE}%{NUMBER:duration}%{NOTSPACE} %{GREEDYDATA:kernel_logs}\"\r\n}\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d4b7d8a7788005545434-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d4b7d8a7788005545434-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d4b7d8a7788005545434-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d4b7d8a7788005545434-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-58d4b7d8a7788005545434-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d4b7d8a7788005545434-1\"><span class=\"crayon-e\">filter</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d4b7d8a7788005545434-2\"><span class=\"crayon-e\">grok</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-58d4b7d8a7788005545434-3\"><span class=\"crayon-v\">match</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">\"message\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"%{CISCOTIMESTAMP:timestamp} %{HOST:host} %{WORD:program}%{NOTSPACE} %{NOTSPACE}%{NUMBER:duration}%{NOTSPACE} %{GREEDYDATA:kernel_logs}\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d4b7d8a7788005545434-4\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-58d4b7d8a7788005545434-5\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p><span class=\"md-line md-end-block\">这是用 Grok 解析后输出的结果：</span></p>\n<p><img src=\"http://wx2.sinaimg.cn/mw690/6941baebly1fdx2hc1ly1j20nh04v0sl.jpg\"></p>\n<h2 class=\"md-end-block md-heading\">使用 Rsyslog 和 AWK 过滤</h2>\n<p><span class=\"md-line md-end-block\">过滤是搜索特定的字段，而不是全部文本。这让你的日志分析更精确，因为它会忽略其他不需要的日志信息。为了搜索一个字段值，你需要先解析你的日志或者至少有一种基于事件结构的搜索方法。</span></p>\n<h3 class=\"md-end-block md-heading\">如何筛选出同一个应用的日志</h3>\n<p><span class=\"md-line md-end-block\">通常，你只想看来自同一个应用的日志。如果你的应用总是把日志记录在单个文件中，这样很容易分析。如果你要从聚合或集中起来的日志里筛选出和某个程序相关的日志，会很复杂。这里有几种解决的办法。</span></p>\n<ol class=\"ol-list\" start=\"\">\n<li><span class=\"md-line md-end-block\">用 Rsyslog 服务解析和过滤日志。这个例子是将 sshd 应用程序的日志写入名为 sshd-messages 的文件中，然后丢弃事件，所以它不会在其他日志里重复出现。你可以把它加到你的 Rsyslog.conf 文件里试一下。</span></li>\n</ol>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d4b7d8a778e630531818\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n:programname, isequal, “sshd” /var/log/sshd-messages\r\n&amp;~</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d4b7d8a778e630531818-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d4b7d8a778e630531818-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d4b7d8a778e630531818-1\"><span class=\"crayon-o\">:</span><span class=\"crayon-v\">programname</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">isequal</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span>“<span class=\"crayon-i\">sshd</span>”<span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">log</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sshd</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">messages</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d4b7d8a778e630531818-2\"><span class=\"crayon-o\">&amp;</span><span class=\"crayon-o\">~</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p></p>\n<ol class=\"ol-list\" start=\"2\">\n<li><span class=\"md-line md-end-block\">使用命令行工具比如 awk ，提取特定字段的值，比如取 sshd 用户名。这是 Ubuntu 上的例子。</span></li>\n</ol>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d4b7d8a7792770143073\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ awk '/sshd.*invalid user/ { print $9 }' /var/log/auth.log\r\nguestadmin\r\ninfo\r\ntest\r\nubnt</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d4b7d8a7792770143073-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d4b7d8a7792770143073-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d4b7d8a7792770143073-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d4b7d8a7792770143073-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-58d4b7d8a7792770143073-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d4b7d8a7792770143073-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">awk</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'/sshd.*invalid user/ { print $9 }'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">log</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">auth</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d4b7d8a7792770143073-2\"><span class=\"crayon-e\">guestadmin</span></div><div class=\"crayon-line\" id=\"crayon-58d4b7d8a7792770143073-3\"><span class=\"crayon-e\">info</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d4b7d8a7792770143073-4\"><span class=\"crayon-e\">test</span></div><div class=\"crayon-line\" id=\"crayon-58d4b7d8a7792770143073-5\"><span class=\"crayon-v\">ubnt</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p></p>\n<ol class=\"ol-list\" start=\"3\">\n<li><span class=\"md-line md-end-block\">使用日志管理系统自动解析你的日志，然后点击目标应用的名字进行过滤。这个截图显示了 syslog 的各个字段，在一个叫做 Loggly 的日志管理服务中。如图中文氏图所示，当前正在过滤 sshd 这个应用。</span></li>\n</ol>\n<p><img src=\"http://wx4.sinaimg.cn/mw690/6941baebly1fdx2hbjh5yj20h509jdfw.jpg\"></p>\n<h3>如何筛选出错误信息</h3>\n<p><span class=\"md-line md-end-block\">最常见的事情是，人们想看到日志中的错误。不巧的是，默认的 syslog 配置不会直接输出错误的级别，这使得错误信息很难被筛选。</span></p>\n<p><span class=\"md-line md-end-block\">这里有两种方案来解决这个问题。首先，你可以修改 rsyslog 配置，让它输出级别到日志文件中，使得错误信息容易被读取和搜索。在你的 Rsyslog 配置中你可以加一个pri-text <span class=\"\"><a href=\"http://www.rsyslog.com/doc/v8-stable/configuration/templates.html\">模版</a></span>，如下所示：</span></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d4b7d8a7796376024898\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-mixed-highlight\" title=\"含多种语言\"></span><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n\"&lt;%pri-text%&gt; : %timegenerated%,%HOSTNAME%,%syslogtag%,%msg%n\"</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d4b7d8a7796376024898-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d4b7d8a7796376024898-1\"><span class=\"crayon-s\">\"<span class=\"crayon-ta\">&lt;%</span><span class=\"crayon-v\">pri</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">text</span><span class=\"crayon-ta\">%&gt;</span> : %timegenerated%,%HOSTNAME%,%syslogtag%,%msg%n\"</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0028 seconds] -->\r\n<p><span class=\"md-line md-end-block\">这个例子的输出如下，可以看到级别是 err。</span></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d4b7d8a7799440648342\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&lt;authpriv.err&gt; : Mar 11 18:18:00,hoover-VirtualBox,su[5026]:, pam_authenticate: Authentication failure</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d4b7d8a7799440648342-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d4b7d8a7799440648342-1\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">authpriv</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">err</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Mar</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">hoover</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">VirtualBox</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">su</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">5026</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pam_authenticate</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Authentication </span><span class=\"crayon-v\">failure</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p><span class=\"md-line md-end-block\">你可以用 awk 或grep 筛选出错误信息。这是 Ubuntu 下的例子，我们加了开始结束标志 . 和 &gt; ，这样它就只匹配这个字段。</span></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d4b7d8a779c784089642\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ grep '.err&gt;' /var/log/auth.log\r\n&lt;authpriv.err&gt; : Mar 11 18:18:00,hoover-VirtualBox,su[5026]:, pam_authenticate: Authentication failure</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d4b7d8a779c784089642-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d4b7d8a779c784089642-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d4b7d8a779c784089642-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">grep</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'.err&gt;'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">log</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">auth</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">log</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d4b7d8a779c784089642-2\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">authpriv</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">err</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Mar</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">hoover</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">VirtualBox</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">su</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">5026</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pam_authenticate</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Authentication </span><span class=\"crayon-v\">failure</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p><span class=\"md-line md-end-block\">第二种选择是使用日志管理系统。好的日志管理系统会自动解析 syslog 消息并提取出级别字段。只需点一下，就会按指定的级别筛选日志。</span></p>\n<p><span class=\"md-line md-end-block\">这是 Loggly 的截图。显示了 syslog 各个字段， Error 级别高亮显示了，说明正在按级别 Error 过滤</span></p>\n<p><img src=\"http://wx3.sinaimg.cn/mw690/6941baebly1fdx2hb23nwj20fw0a2t8r.jpg\"></p>\n\r\n        \r\n            <blockquote class=\"rewards\">\n        <p><strong>打赏支持我翻译更多好文章，谢谢！</strong></p>\n        <a href=\"#rewardbox\" id=\"rewards-button\" class=\"fancybox\"><span class=\"btn-bluet-blue href-style\"><i class=\"fa fa-jpy\"></i> 打赏译者</span></a>\n    </blockquote>\n\n    <div id=\"rewardbox\">\n        <h4>打赏支持我翻译更多好文章，谢谢！</h4>\n                <p>\n                        <img src=\"http://jbcdn2.b0.upaiyun.com/2016/11/4ec823de9f4637cdb4ee2f4b27a0aba9.png\">\n            \n                    </p>\n    </div>\n\n    \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"110660\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"110660votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"110660\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/daofazi\">道法子</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/daofazi\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2016/08/a84a2baaaa98a48bb36349cd6431bcb3.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            a programmer,Do one's level best and leave the rest to God's will.I love this saying.        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/daofazi\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/daofazi/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/daofazi/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 11</a>        </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,Linux,日志", "url": "http://blog.jobbole.com/110660/", "title": "Linux 日志终极指南", "front_image_path": "full/53395b71a56c4dca845d5d14451a58fe50d36f65.jpg", "comment_nums": 0, "create_time": "2017/03/23", "url_object_id": "084b15fcc07bc9e85b62fb709a316300", "praise_nums": "1"},
{"front_image_url": ["http://jbcdn2.b0.upaiyun.com/2013/06/IntelliJIDEA-logo.png"], "fav_nums": 4, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"><p><script src=\"http://www.imooc.com/open/courselistrandjs\"></script><span style=\"display:block;margin-bottom:10px;\"></span></p>\n</div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文作者： <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/Yonah\">肖汉松</a> 。未经作者许可，禁止转载！<br>欢迎加入伯乐在线 <a href=\"http://blog.jobbole.com/99322\" target=\"_blank\">专栏作者</a>。</div><h2 id=\"u524D_u8A00\">前言</h2>\n<p>Java 开发过程经常需要编写有固定格式的代码，例如说声明一个私有变量，<code>logger</code>或者<code>bean</code>等等。对于这种小范围的代码生成，我们可以利用 IDEA 提供的 <code>Live Templates</code>功能。刚开始觉得它只是一个简单的<code>Code Snippet</code>，后来发现它支持变量函数配置，可以支持很复杂的代码生成。下面我来介绍一下<code>Live Templates</code>的用法。</p>\n<h2 id=\"u57FA_u672C_u4F7F_u7528\">基本使用</h2>\n<p>IDEA 自带很多常用的动态模板，在 Java 代码中输入<code>fori</code>，回车就会出现</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d452dd17fbc308580930\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfor (int i = 0; i &lt; ; i++) {\r\n\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d452dd17fbc308580930-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d452dd17fbc308580930-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d452dd17fbc308580930-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d452dd17fbc308580930-1\"><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d452dd17fbc308580930-2\"> </div><div class=\"crayon-line\" id=\"crayon-58d452dd17fbc308580930-3\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p><img class=\"alignnone\" src=\"http://wx3.sinaimg.cn/large/63918611gy1fdr9qkuk8sg20p104c0tc.gif\" width=\"901\" height=\"156\"><br>\n按<code>Tab</code>可以在各个空白处跳转，手动填值。</p>\n<h2 id=\"u81EA_u5B9A_u4E49_Template\">自定义 Template</h2>\n<p>官方自带模板毕竟不能满足我们个人编码风格的需要，<code>Live Templates</code>提供了变量函数的方式供我们自定义。</p>\n<h3 id=\"u7B80_u5355_u7528_u6CD5\">简单用法</h3>\n<p>新增自定义模板，首先需要填写触发单词（即 Abbreviation），描述是可选的，然后定义模板的上下文，点击<code>define</code>选择<code>Java</code>，这样在编辑 Java 的时候就会触发当前模板，定义完上下文之后，就可以填写模板了。</p>\n<p><img class=\"alignnone\" src=\"http://wx2.sinaimg.cn/large/63918611gy1fdr9ql565eg212a0ij7kh.gif\" width=\"1378\" height=\"667\"><br>\n下面列举几个我常用的简单模板</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d452dd17fc6164228667\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n==========\r\n&lt;out&gt;\r\n----------\r\nSystem.out.println($END$)\r\n==========\r\n&lt;pfs&gt;\r\n----------\r\nprivate final static String $varName$  = \"$var$\";`\r\n==========\r\n&lt;privateField&gt;\r\n----------\r\n/**\r\n * $COMMENT$\r\n */\r\n@Getter\r\n@Setter\r\nprivate $TYPE$ $NAME$;\r\n==========\r\n&lt;main&gt;\r\n----------\r\npublic static void main(String[] args) {\r\n     $END$\r\n}\r\n==========</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d452dd17fc6164228667-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d452dd17fc6164228667-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d452dd17fc6164228667-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d452dd17fc6164228667-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-58d452dd17fc6164228667-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d452dd17fc6164228667-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-58d452dd17fc6164228667-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d452dd17fc6164228667-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-58d452dd17fc6164228667-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d452dd17fc6164228667-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-58d452dd17fc6164228667-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d452dd17fc6164228667-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-58d452dd17fc6164228667-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d452dd17fc6164228667-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-58d452dd17fc6164228667-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d452dd17fc6164228667-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-58d452dd17fc6164228667-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d452dd17fc6164228667-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-58d452dd17fc6164228667-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d452dd17fc6164228667-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-58d452dd17fc6164228667-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d452dd17fc6164228667-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-58d452dd17fc6164228667-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d452dd17fc6164228667-24\">24</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d452dd17fc6164228667-1\"><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">=</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d452dd17fc6164228667-2\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">out</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-58d452dd17fc6164228667-3\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d452dd17fc6164228667-4\"><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">out</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">println</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-st\">END</span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-58d452dd17fc6164228667-5\"><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">=</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d452dd17fc6164228667-6\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">pfs</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-58d452dd17fc6164228667-7\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d452dd17fc6164228667-8\"><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">final</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">varName</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"$var$\"</span><span class=\"crayon-sy\">;</span><span class=\"crayon-sy\">`</span></div><div class=\"crayon-line\" id=\"crayon-58d452dd17fc6164228667-9\"><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">=</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d452dd17fc6164228667-10\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">privateField</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-58d452dd17fc6164228667-11\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d452dd17fc6164228667-12\"><span class=\"crayon-c\">/**</span></div><div class=\"crayon-line\" id=\"crayon-58d452dd17fc6164228667-13\"><span class=\"crayon-c\"> * $COMMENT$</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d452dd17fc6164228667-14\"><span class=\"crayon-c\"> */</span></div><div class=\"crayon-line\" id=\"crayon-58d452dd17fc6164228667-15\"><span class=\"crayon-sy\">@</span><span class=\"crayon-i\">Getter</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d452dd17fc6164228667-16\"><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">Setter</span></div><div class=\"crayon-line\" id=\"crayon-58d452dd17fc6164228667-17\"><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">TYPE</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">NAME</span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d452dd17fc6164228667-18\"><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">=</span></div><div class=\"crayon-line\" id=\"crayon-58d452dd17fc6164228667-19\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">main</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d452dd17fc6164228667-20\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span></div><div class=\"crayon-line\" id=\"crayon-58d452dd17fc6164228667-21\"><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">args</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d452dd17fc6164228667-22\"><span class=\"crayon-h\">     </span><span class=\"crayon-sy\">$</span><span class=\"crayon-st\">END</span><span class=\"crayon-sy\">$</span></div><div class=\"crayon-line\" id=\"crayon-58d452dd17fc6164228667-23\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d452dd17fc6164228667-24\"><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">===</span><span class=\"crayon-o\">=</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0025 seconds] -->\r\n<p>模板支持变量的定义，使用<code>$$</code>包围的字符表示一个变量。<code>$END$</code>是一个特殊的预定义变量，表示光标最后跳转的位置。每个变量的位置都可以跳转过去。</p>\n<h3 id=\"u9AD8_u7EA7_u7528_u6CD5\">高级用法</h3>\n<p>如果你用过 vim 的<code>Code Sinppet</code>插件，你会发现模板里面是可以执行函数的，强大的 <code>Live Templates</code>当然也支持，而且 IDEA 能够感知代码的语义，例如说当前编辑的函数的参数。但这一点就能够让我们玩出花来。我们从易到难来研究模板函数的功能。<br>\n<img class=\"alignnone\" src=\"http://wx2.sinaimg.cn/large/63918611gy1fdr9qlmsydg20zb0ieagj.gif\" width=\"1271\" height=\"662\"><br>\n前面我们提到的变量可以绑定函数，配置方式如上图所示。</p>\n<h4 id=\"u5FEB_u901F_u58F0_u660E_u53D8_u91CF\">快速声明变量</h4>\n<p>声明变量是一个常用的操作，特别是需要声明变量需要加注解，注释的时候，这些代码写起来就很枯燥。下面是我定义的模板：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d452dd17fcb373159954\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&lt;osgiRef&gt;\r\n----------\r\n/**\r\n * $END$\r\n */\r\n@OsgiReference\r\n@Setter\r\nprivate $TYPE$ $NAME$;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d452dd17fcb373159954-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d452dd17fcb373159954-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d452dd17fcb373159954-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d452dd17fcb373159954-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-58d452dd17fcb373159954-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d452dd17fcb373159954-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-58d452dd17fcb373159954-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d452dd17fcb373159954-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d452dd17fcb373159954-1\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">osgiRef</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d452dd17fcb373159954-2\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span></div><div class=\"crayon-line\" id=\"crayon-58d452dd17fcb373159954-3\"><span class=\"crayon-c\">/**</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d452dd17fcb373159954-4\"><span class=\"crayon-c\"> * $END$</span></div><div class=\"crayon-line\" id=\"crayon-58d452dd17fcb373159954-5\"><span class=\"crayon-c\"> */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d452dd17fcb373159954-6\"><span class=\"crayon-sy\">@</span><span class=\"crayon-i\">OsgiReference</span></div><div class=\"crayon-line\" id=\"crayon-58d452dd17fcb373159954-7\"><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">Setter</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d452dd17fcb373159954-8\"><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">TYPE</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">NAME</span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>乍一看这个模板跟我上面定义的<code>privateField</code>差不多，唯一的不同在于我给这些变量绑定了函数。</p>\n<ol>\n<li><code>clipboard()</code>：返回当前粘贴板的字符串</li>\n<li><code>decapitalize()</code>：将输入的字符串首字母变为小写</li>\n</ol>\n<p>下面我们演示一下，我们先拷贝当前类名，然后输入<code>osgiRef</code></p>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/large/63918611gy1fdr9qlzql7g20k406owfe.gif\" width=\"724\" height=\"240\"></p>\n<h4 id=\"u5FEB_u901F_u58F0_u660E_logger\">快速声明 logger</h4>\n<p>声明 logger 也是一个常用的操作，上面我们是利用了粘贴函数来快速声明变量，现在我们来利用另一个函数<code>className()</code>，顾名思义，它的作用就是返回当前类名。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d452dd17fd2804320831\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&lt;logger&gt;\r\n----------\r\n/** logger */\r\nprivate static final Logger LOGGER = LoggerFactory.getLogger($CLASS$.class);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d452dd17fd2804320831-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d452dd17fd2804320831-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d452dd17fd2804320831-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d452dd17fd2804320831-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d452dd17fd2804320831-1\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">logger</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d452dd17fd2804320831-2\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span></div><div class=\"crayon-line\" id=\"crayon-58d452dd17fd2804320831-3\"><span class=\"crayon-c\">/** logger */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d452dd17fd2804320831-4\"><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">final</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Logger </span><span class=\"crayon-v\">LOGGER</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">LoggerFactory</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getLogger</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-t\">CLASS</span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">.</span><span class=\"crayon-t\">class</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p><img class=\"alignnone\" src=\"http://wx2.sinaimg.cn/large/63918611gy1fdr9qmg7xfg20ll06hgn0.gif\" width=\"777\" height=\"233\"></p>\n<h4 id=\"u6700_u5F3A_u5927_u7684_groovyScript_28_29\">最强大的 groovyScript()</h4>\n<p>如果说上面用到的函数提供的能力有限，不够灵活，那么<code>groovyScript()</code>提供了一切你想要的能力，它支持执行 Groovy 脚本处理输入，然后输出处理后的字符串。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d452dd17fd5687641989\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ngroovyScript(\"code\", ...)\r\n\r\n|  code   |   一段Groovy代码或者Groovy脚本代码绝对路径    |\r\n|  ...    |   可选入参，这些参数会绑定到`_1, _2, _3, ..._n`, 在 Groovy 代码中使用。|</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d452dd17fd5687641989-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d452dd17fd5687641989-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d452dd17fd5687641989-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d452dd17fd5687641989-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d452dd17fd5687641989-1\"><span class=\"crayon-e\">groovyScript</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"code\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d452dd17fd5687641989-2\"> </div><div class=\"crayon-line\" id=\"crayon-58d452dd17fd5687641989-3\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">code</span><span class=\"crayon-h\">   </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\">   </span>一段<span class=\"crayon-i\">Groovy</span>代码或者<span class=\"crayon-i\">Groovy</span>脚本代码绝对路径<span class=\"crayon-h\">    </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d452dd17fd5687641989-4\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\">    </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\">   </span>可选入参，这些参数会绑定到<span class=\"crayon-sy\">`</span><span class=\"crayon-v\">_1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">_2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">_3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_n</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span>在<span class=\"crayon-h\"> </span><span class=\"crayon-i\">Groovy</span><span class=\"crayon-h\"> </span>代码中使用。<span class=\"crayon-o\">|</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p>下面我们来看一下它的实际应用。</p>\n<h5 id=\"u5FEB_u901F_bean__u914D_u7F6E\">快速 bean 配置</h5>\n<p>新增一个服务都要在 Spring 中注册一个 bean，一般这个配置无非就是将指明<code>id</code>和<code>class</code>，由于我们是在 xml 中配置，所以不能利用<code>className()</code>函数，但是我们可以利用<code>clipboard()</code>函数获取到类的全引用，在 IDEA 中我们直接右键类名，点击<code>Copy Reference</code>就行。然后执行 groovy 脚本获取类名。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d452dd17fd8018447895\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&lt;bean&gt;\r\n----------\r\n&lt;bean id=\"$id$\" class=\"$REF$\" /&gt;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d452dd17fd8018447895-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d452dd17fd8018447895-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d452dd17fd8018447895-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d452dd17fd8018447895-1\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">bean</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d452dd17fd8018447895-2\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span></div><div class=\"crayon-line\" id=\"crayon-58d452dd17fd8018447895-3\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">bean </span><span class=\"crayon-v\">id</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"$id$\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"$REF$\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-o\">&gt;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p><code>id</code>绑定<code>decapitalize(groovyScript(\"_1.tokenize('.')[-1]\", clipboard()))</code>，首先取<code>clipboard()</code>的值得到类的全引用，然后执行 groovy 代码<code>_1.tokenize('.')[-1]</code>（按<code>.</code>分割为字符串数组，然后取最后一个即可得到类名，然后用<code>decapitalize()</code>将首字母小写即可得到<code>id</code>。</p>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/large/63918611gy1fdr9qmtcklg21270js0xe.gif\" width=\"1375\" height=\"712\"></p>\n<h5 id=\"u5FEB_u901F_u6253_u5370_u5F53_u524D_u4E0A_u4E0B_u6587_u4FE1_u606F\">快速打印当前上下文信息</h5>\n<p>打印错误日志的时候需要打印当前上下文信息的，例<span id=\"pos_placeholder\" style=\"width: 0px;height: 0px;margin: 0px;padding: 0px\"></span>如说入参，有时候入参很多的时候，写起来很痛苦，好在有模板函数<code>methodParameters()</code>，返回当前函数参数的列表，当然这个列表我们不能直接使用，需要结合<code>groovyScript</code>对它进行转化。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-58d452dd17fdb768605581\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&lt;printContext&gt;\r\n---------------\r\nLogUtil.$TYPE$(LOGGER, \"$MSG$ \" + $params$);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-58d452dd17fdb768605581-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-58d452dd17fdb768605581-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-58d452dd17fdb768605581-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-58d452dd17fdb768605581-1\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">printContext</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-58d452dd17fdb768605581-2\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span></div><div class=\"crayon-line\" id=\"crayon-58d452dd17fdb768605581-3\"><span class=\"crayon-v\">LogUtil</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">TYPE</span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">LOGGER</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"$MSG$ \"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">params</span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>将<code>params</code>绑定到<code>groovyScript(\"'\\\"' + _1.collect { it + ' = [\\\" + ' + it + ' + \\\"]'}.join(', ') + '\\\"'\", methodParameters())</code>，就能够自动将当前函数的参数格式化后输出。</p>\n<p><img class=\"alignnone\" src=\"http://wx3.sinaimg.cn/large/63918611gy1fdr9qn64vfg20p104cgou.gif\" width=\"901\" height=\"156\"></p>\n<h2 id=\"u603B_u7ED3\">总结</h2>\n<p>上面我们简单介绍了常用的模板函数，其实 IDEA 还有很多其它模板函数，具体参考<a href=\"https://www.jetbrains.com/help/idea/2016.3/creating-and-editing-template-variables.html\" target=\"_blank\" rel=\"external\">Creating and Editing Template Variables</a>。IDEA 是一个很强大的工具，善用工具能够极大的提高工作效率，将精力投入到关键的事情上，而不是将时间浪费在编写重复代码上面。一些更高级的用法还有待大家去发掘。最后推广一波我写的代码生成插件<a href=\"https://github.com/x-hansong/CodeMaker\" target=\"_blank\" rel=\"external\">CodeMaker</a>，好好利用也能节省很多重复编写代码的时间。</p>\n\r\n        \r\n            <blockquote class=\"rewards\">\n        <p><strong>打赏支持我写出更多好文章，谢谢！</strong></p>\n        <a href=\"#rewardbox\" id=\"rewards-button\" class=\"fancybox\"><span class=\"btn-bluet-blue href-style\"><i class=\"fa fa-jpy\"></i> 打赏作者</span></a>\n    </blockquote>\n\n    <div id=\"rewardbox\">\n        <h4>打赏支持我写出更多好文章，谢谢！</h4>\n                <p>任选一种支付方式</p>\n                <p>\n                        <img src=\"http://jbcdn2.b0.upaiyun.com/2016/05/5bf123eeb2d2e5d53b487415f6c0555c.png\">\n            \n                            <img src=\"http://jbcdn2.b0.upaiyun.com/2016/05/c7fcb7a46ab889ed5518728242187ab5.jpg\">\n                    </p>\n    </div>\n\n    \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"110607\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"110607votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"110607\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 4 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/Yonah\">肖汉松</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/Yonah\">\r\n\t\t\t<img src=\"http://www.jobbole.com/wp-content/uploads/2015/10/b312ba4ffd5245fa2a1ab819ec0d0347.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            热爱阅读，喜欢挑战。热衷尝试新的技术，关注技术背后的原理。关注领域：Java 服务端开发，网络编程。关注语言：Java, C, Python。        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/Yonah\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/yonah/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/Yonah/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 39</a> · <a title=\"我的网站\" target=\"_blank\" href=\"http://blog.xiaohansong.com\"><i class=\"fa fa-link\"></i></a> <a title=\"微博主页\" target=\"_blank\" href=\"http://weibo.com/xiaohansong\"><i class=\"fa fa-weibo\"></i></a> <a title=\"GitHub主页\" target=\"_blank\" href=\"https://github.com/x-hansong\"><i class=\"fa fa-github\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,IDEA", "url": "http://blog.jobbole.com/110607/", "title": "代码生成利器：IDEA 强大的 Live Templates", "front_image_path": "full/2199e75c3956716ac98be68a72ca0bd6ef28c797.jpg", "comment_nums": 0, "create_time": "2017/03/18", "url_object_id": "73c6420eb3efea3a1d8b64d3e510b12b", "praise_nums": "2"}